"use strict";var s=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var U=Object.prototype.hasOwnProperty;var h=(r,t)=>{for(var e in t)s(r,e,{get:t[e],enumerable:!0})},I=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of S(t))!U.call(r,i)&&i!==e&&s(r,i,{get:()=>t[i],enumerable:!(o=A(t,i))||o.enumerable});return r};var D=r=>I(s({},"__esModule",{value:!0}),r);var M={};h(M,{handler:()=>$});module.exports=D(M);var y=require("@aws-sdk/client-dynamodb"),l=require("@aws-sdk/lib-dynamodb");var n=[];for(let r=0;r<256;++r)n.push((r+256).toString(16).slice(1));function g(r,t=0){return(n[r[t+0]]+n[r[t+1]]+n[r[t+2]]+n[r[t+3]]+"-"+n[r[t+4]]+n[r[t+5]]+"-"+n[r[t+6]]+n[r[t+7]]+"-"+n[r[t+8]]+n[r[t+9]]+"-"+n[r[t+10]]+n[r[t+11]]+n[r[t+12]]+n[r[t+13]]+n[r[t+14]]+n[r[t+15]]).toLowerCase()}var v=require("node:crypto"),d=new Uint8Array(256),m=d.length;function p(){return m>d.length-16&&((0,v.randomFillSync)(d),m=0),d.slice(m,m+=16)}var E=require("node:crypto"),c={randomUUID:E.randomUUID};function T(r,t,e){r=r||{};let o=r.random??r.rng?.()??p();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){if(e=e||0,e<0||e+16>t.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[e+i]=o[i];return t}return g(o)}function P(r,t,e){return c.randomUUID&&!t&&!r?c.randomUUID():T(r,t,e)}var x=P;var C=l.DynamoDBDocumentClient.from(new y.DynamoDBClient({})),L=process.env.TABLE_NAME,R=process.env.PK_NAME??"pk",_=process.env.SK_NAME??"sk",$=async r=>{let{creatorId:t,niche:e,platforms:o,trendBriefs:i,contentIdeas:f}=r;if(!t)throw new Error("Missing creatorId in Social Pulse persist");let a=x(),u=new Date().toISOString(),w={[R]:`CREATOR#${t}`,[_]:`PULSE#${a}`,type:"CREATOR_SOCIAL_PULSE",id:a,creatorId:t,niche:e,platforms:o,trendBriefs:i,contentIdeas:f,createdAt:u,gsi1pk:`CREATOR#${t}`,gsi1sk:`PULSE#${u}#${a}`};return await C.send(new l.PutCommand({TableName:L,Item:w})),{id:a,creatorId:t,niche:e,platforms:o,trendBriefs:i,contentIdeas:f,createdAt:u}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
