{
  "version": 3,
  "sources": ["../../lambda/closet/validate-background-change.ts"],
  "sourcesContent": ["// lambda/closet/validate-background-change.ts\r\n\r\n/**\r\n * Validate background-change requests before the heavy work runs.\r\n *\r\n * This is wired into the Besties background-change Step Function by\r\n * BestiesClosetStack. For now it's a simple \"always allow\" stub so\r\n * the workflow can execute end-to-end without any real business rules.\r\n *\r\n * Later, you can:\r\n *   - throttle how often a user can request changes\r\n *   - block certain backgrounds (e.g. containing disallowed content)\r\n *   - check user tier, status, etc.\r\n */\r\n\r\nexport type ValidateBgChangeEvent = {\r\n  itemId?: string;\r\n  ownerId?: string;\r\n  requestedBackground?: string;\r\n  reason?: string;\r\n  // anything else the state machine passes through:\r\n  [key: string]: any;\r\n};\r\n\r\nexport type ValidateBgChangeResult = {\r\n  ok: boolean;\r\n  allowed: boolean;\r\n  itemId?: string;\r\n  ownerId?: string;\r\n  requestedBackground?: string;\r\n  message?: string;\r\n};\r\n\r\nexport const handler = async (\r\n  event: ValidateBgChangeEvent | any\r\n): Promise<ValidateBgChangeResult> => {\r\n  console.log(\r\n    \"[validate-background-change] incoming event:\",\r\n    JSON.stringify(event)\r\n  );\r\n\r\n  const { itemId, ownerId, requestedBackground } = event || {};\r\n\r\n  // \uD83D\uDD12 Hook for future rules:\r\n  // e.g., if (event.timesRequestedToday > 5) { allowed = false; ... }\r\n\r\n  return {\r\n    ok: true,\r\n    allowed: true, // always allow for now\r\n    itemId,\r\n    ownerId,\r\n    requestedBackground,\r\n    message:\r\n      \"Background change validation stub \u2013 all requests are allowed in this version.\",\r\n  };\r\n};\r\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAiCO,IAAME,EAAU,MACrBE,GACoC,CACpC,QAAQ,IACN,+CACA,KAAK,UAAUA,CAAK,CACtB,EAEA,GAAM,CAAE,OAAAC,EAAQ,QAAAC,EAAS,oBAAAC,CAAoB,EAAIH,GAAS,CAAC,EAK3D,MAAO,CACL,GAAI,GACJ,QAAS,GACT,OAAAC,EACA,QAAAC,EACA,oBAAAC,EACA,QACE,oFACJ,CACF",
  "names": ["validate_background_change_exports", "__export", "handler", "__toCommonJS", "event", "itemId", "ownerId", "requestedBackground"]
}
