"use strict";var a=Object.defineProperty;var o=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var d=(n,e)=>{for(var r in e)a(n,r,{get:e[r],enumerable:!0})},c=(n,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of u(e))!l.call(n,t)&&t!==r&&a(n,t,{get:()=>e[t],enumerable:!(s=o(e,t))||s.enumerable});return n};var p=n=>c(a({},"__esModule",{value:!0}),n);var f={};d(f,{handler:()=>g});module.exports=p(f);function m(n){var s,t;if(!n)return!1;let e=((s=n.claims)==null?void 0:s["cognito:groups"])??((t=n.claims)==null?void 0:t["custom:groups"])??n.groups,r=Array.isArray(e)?e:typeof e=="string"?e.split(","):[];return r.includes("admin")||r.includes("ADMIN")}var g=async n=>{let e=n.identity,r=n.info.fieldName;if(!(e!=null&&e.sub))throw new Error("Unauthorized");if(!m(e))throw new Error("Forbidden");switch(r){case"adminSendShoutout":{let{message:s,audience:t}=n.arguments||{};return{ok:!0,delivered:!1,message:s??"",audience:t??"ALL",sentAt:new Date().toISOString()}}case"adminSendTargetedInvite":{let{email:s,userId:t,templateId:i}=n.arguments||{};return{ok:!0,delivered:!1,email:s??null,userId:t??null,templateId:i??null,sentAt:new Date().toISOString()}}default:return{ok:!0,handled:!1,field:r}}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
