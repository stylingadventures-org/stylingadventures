# ─────────────────────────────────────────
# Core / Auth
# ─────────────────────────────────────────

type Me {
  id: ID!
  email: String!
  displayName: String
  createdAt: String
  # role and tier will be fetched separately via meBestieStatus, meCreatorApplicationStatus
}

type MeCreatorApplicationStatus {
  hasApplied: Boolean!
  status: String # PENDING, APPROVED, REJECTED, null if not applied
  shopStatus: String # DRAFT, PUBLISHED, etc
}

type RoleResult {
  userId: ID!
  role: String!
}

extend type Query {
  # Simple healthcheck (used by hello.graphql in site/src/graphql)
  hello: String

  # Current user basic info - call this to ensure profile exists and get user data
  me: Me! @aws_cognito_user_pools

  # Bestie subscription status (reuses existing BestieStatus type from 30_bestie.graphql)
  meBestieStatus: BestieStatus @aws_cognito_user_pools

  # Creator application and shop status
  meCreatorApplicationStatus: MeCreatorApplicationStatus @aws_cognito_user_pools
}

extend type Mutation {
  setUserRole(userId: ID!, role: String!): RoleResult!
    @aws_cognito_user_pools
    @aws_auth(cognito_groups: ["ADMIN", "PRIME"])
}
