"use strict";var p=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var u=(e,n)=>{for(var s in n)p(e,s,{get:n[s],enumerable:!0})},N=(e,n,s,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of c(n))!d.call(e,o)&&o!==s&&p(e,o,{get:()=>n[o],enumerable:!(a=l(n,o))||a.enumerable});return e};var E=e=>N(p({},"__esModule",{value:!0}),e);var A={};u(A,{handler:()=>y});module.exports=E(A);var t=require("@aws-sdk/client-dynamodb"),x=new t.DynamoDBClient({}),w=process.env.TABLE_NAME,y=async e=>{let{fieldName:n}=e.info,{limit:s=10,season:a="GLOBAL"}=e.arguments||{};if(n==="topXP"||n==="topCoins"){let o=`LEADERBOARD#${a}`,i=await x.send(new t.QueryCommand({TableName:w,IndexName:"GSI1",KeyConditionExpression:"gsi1pk = :p",ExpressionAttributeValues:{":p":{S:o}},ScanIndexForward:!0,Limit:Math.min(100,s)})),m=1;return(i.Items??[]).map(r=>({userId:(r.pk.S??"").replace("USER#",""),displayName:r.displayName?.S,xp:r.xp?Number(r.xp.N):null,coins:r.coins?Number(r.coins.N):null,rank:m++}))}throw new Error(`Unknown field ${n}`)};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
