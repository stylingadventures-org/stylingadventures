"use strict";var i=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var u=(e,n)=>{for(var o in n)i(e,o,{get:n[o],enumerable:!0})},f=(e,n,o,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of c(n))!d.call(e,s)&&s!==o&&i(e,s,{get:()=>n[s],enumerable:!(r=l(n,s))||r.enumerable});return e};var y=e=>f(i({},"__esModule",{value:!0}),e);var k={};u(k,{handler:()=>A});module.exports=y(k);var m=require("@aws-sdk/client-dynamodb"),a=require("@aws-sdk/lib-dynamodb"),E=process.env.TABLE_NAME,x=a.DynamoDBDocumentClient.from(new m.DynamoDBClient({}),{marshallOptions:{removeUndefinedValues:!0}}),A=async e=>{let{fieldName:n}=e.info,{limit:o=10,season:r="GLOBAL"}=e.arguments||{};if(n==="topXP"||n==="topCoins"){let s=`LEADERBOARD#${r}`;return((await x.send(new a.QueryCommand({TableName:E,IndexName:"gsi1",KeyConditionExpression:"#pk = :p",ExpressionAttributeNames:{"#pk":"gsi1pk"},ExpressionAttributeValues:{":p":s},ScanIndexForward:!1,Limit:Math.min(100,o)}))).Items??[]).map((t,p)=>({userId:String(t.pk||"").replace("USER#",""),displayName:t.displayName??null,xp:typeof t.xp=="number"?t.xp:null,coins:typeof t.coins=="number"?t.coins:null,rank:p+1}))}throw new Error(`Unknown field ${n}`)};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
