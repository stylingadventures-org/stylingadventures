{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.219.0"},"children":{"IdentityStack":{"id":"IdentityStack","path":"IdentityStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"UserPool":{"id":"UserPool","path":"IdentityStack/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityStack/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":12,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"email","mutable":false,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"App":"stylingadventures","Env":"dev"},"usernameAttributes":["email"],"verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}}}},"WebClient":{"id":"WebClient","path":"IdentityStack/WebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityStack/WebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["openid","email","profile"],"callbackUrLs":["https://d1682i07dc1r3k.cloudfront.net/callback/index.html"],"explicitAuthFlows":["ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"logoutUrLs":["https://d1682i07dc1r3k.cloudfront.net/logout/index.html","https://d1682i07dc1r3k.cloudfront.net/logout/","https://d1682i07dc1r3k.cloudfront.net/"],"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"HostedUiDomain":{"id":"HostedUiDomain","path":"IdentityStack/HostedUiDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityStack/HostedUiDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"sa-dev-637423256673","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"FANGroup":{"id":"FANGroup","path":"IdentityStack/FANGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"FAN group","groupName":"FAN","precedence":10,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"BESTIEGroup":{"id":"BESTIEGroup","path":"IdentityStack/BESTIEGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"BESTIE group","groupName":"BESTIE","precedence":11,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"CREATORGroup":{"id":"CREATORGroup","path":"IdentityStack/CREATORGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"CREATOR group","groupName":"CREATOR","precedence":12,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"COLLABGroup":{"id":"COLLABGroup","path":"IdentityStack/COLLABGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"COLLAB group","groupName":"COLLAB","precedence":13,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"ADMINGroup":{"id":"ADMINGroup","path":"IdentityStack/ADMINGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"ADMIN group","groupName":"ADMIN","precedence":1,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"PRIMEGroup":{"id":"PRIMEGroup","path":"IdentityStack/PRIMEGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"PRIME group","groupName":"PRIME","precedence":15,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"IdentityPool":{"id":"IdentityPool","path":"IdentityStack/IdentityPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnIdentityPool","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::IdentityPool","aws:cdk:cloudformation:props":{"allowUnauthenticatedIdentities":false,"identityPoolTags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"cognitoIdentityProviders":[{"clientId":{"Ref":"WebClient697086FD"},"providerName":{"Fn::GetAtt":["UserPool6BA7E5F2","ProviderName"]}}]}}},"CognitoUserPoolId":{"id":"CognitoUserPoolId","path":"IdentityStack/CognitoUserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CognitoWebClientId":{"id":"CognitoWebClientId","path":"IdentityStack/CognitoWebClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"IdentityPoolId":{"id":"IdentityPoolId","path":"IdentityStack/IdentityPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"HostedUiLoginUrl":{"id":"HostedUiLoginUrl","path":"IdentityStack/HostedUiLoginUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"IdentityStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"IdentityStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"Exports":{"id":"Exports","path":"IdentityStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"UserPool6BA7E5F2\"}":{"id":"Output{\"Ref\":\"UserPool6BA7E5F2\"}","path":"IdentityStack/Exports/Output{\"Ref\":\"UserPool6BA7E5F2\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}","path":"IdentityStack/Exports/Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"IdentityStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"IdentityStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"DataStack":{"id":"DataStack","path":"DataStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"AppTable":{"id":"AppTable","path":"DataStack/AppTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DataStack/AppTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"sa-dev-app","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"DataStack/AppTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"CDKMetadata":{"id":"CDKMetadata","path":"DataStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"DataStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"Exports":{"id":"Exports","path":"DataStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Fn::GetAtt\":[\"AppTable815C50BC\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"AppTable815C50BC\",\"Arn\"]}","path":"DataStack/Exports/Output{\"Fn::GetAtt\":[\"AppTable815C50BC\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Ref\":\"AppTable815C50BC\"}":{"id":"Output{\"Ref\":\"AppTable815C50BC\"}","path":"DataStack/Exports/Output{\"Ref\":\"AppTable815C50BC\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"DataStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"DataStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"WorkflowsStack":{"id":"WorkflowsStack","path":"WorkflowsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"VirusScanFn":{"id":"VirusScanFn","path":"WorkflowsStack/VirusScanFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WorkflowsStack/VirusScanFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WorkflowsStack/VirusScanFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsStack/VirusScanFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Resource":{"id":"Resource","path":"WorkflowsStack/VirusScanFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n          exports.handler = async (event) => {\n            console.log(\"VirusScanFn\", JSON.stringify(event));\n            return { ok: true, name: \"VirusScanFn\", event };\n          };\n        "},"handler":"index.handler","role":{"Fn::GetAtt":["VirusScanFnServiceRole105BB56B","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"ModerationFn":{"id":"ModerationFn","path":"WorkflowsStack/ModerationFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WorkflowsStack/ModerationFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WorkflowsStack/ModerationFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsStack/ModerationFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Resource":{"id":"Resource","path":"WorkflowsStack/ModerationFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n          exports.handler = async (event) => {\n            console.log(\"ModerationFn\", JSON.stringify(event));\n            return { ok: true, name: \"ModerationFn\", event };\n          };\n        "},"handler":"index.handler","role":{"Fn::GetAtt":["ModerationFnServiceRoleBF6ED484","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"PiiCheckFn":{"id":"PiiCheckFn","path":"WorkflowsStack/PiiCheckFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WorkflowsStack/PiiCheckFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WorkflowsStack/PiiCheckFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsStack/PiiCheckFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Resource":{"id":"Resource","path":"WorkflowsStack/PiiCheckFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n          exports.handler = async (event) => {\n            console.log(\"PiiCheckFn\", JSON.stringify(event));\n            return { ok: true, name: \"PiiCheckFn\", event };\n          };\n        "},"handler":"index.handler","role":{"Fn::GetAtt":["PiiCheckFnServiceRole84F31904","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"PublishFn":{"id":"PublishFn","path":"WorkflowsStack/PublishFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WorkflowsStack/PublishFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WorkflowsStack/PublishFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsStack/PublishFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WorkflowsStack/PublishFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsStack/PublishFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"PublishFnServiceRoleDefaultPolicy0D921A88","roles":[{"Ref":"PublishFnServiceRoleC9D15B30"}]}}}}}}},"Resource":{"id":"Resource","path":"WorkflowsStack/PublishFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n          exports.handler = async (event) => {\n            console.log(\"PublishFn\", JSON.stringify(event));\n            return { ok: true, name: \"PublishFn\", event };\n          };\n        "},"handler":"index.handler","role":{"Fn::GetAtt":["PublishFnServiceRoleC9D15B30","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"RejectFn":{"id":"RejectFn","path":"WorkflowsStack/RejectFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WorkflowsStack/RejectFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WorkflowsStack/RejectFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsStack/RejectFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WorkflowsStack/RejectFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsStack/RejectFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"RejectFnServiceRoleDefaultPolicyFAA6A835","roles":[{"Ref":"RejectFnServiceRole9BBF1C50"}]}}}}}}},"Resource":{"id":"Resource","path":"WorkflowsStack/RejectFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n          exports.handler = async (event) => {\n            console.log(\"RejectFn\", JSON.stringify(event));\n            return { ok: true, name: \"RejectFn\", event };\n          };\n        "},"handler":"index.handler","role":{"Fn::GetAtt":["RejectFnServiceRole9BBF1C50","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"ClosetApprovalTopic":{"id":"ClosetApprovalTopic","path":"WorkflowsStack/ClosetApprovalTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsStack/ClosetApprovalTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"WaitForHumanApproval":{"id":"WaitForHumanApproval","path":"WorkflowsStack/WaitForHumanApproval","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.SnsPublish","version":"2.219.0"}},"VirusScan":{"id":"VirusScan","path":"WorkflowsStack/VirusScan","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.219.0"}},"Moderation":{"id":"Moderation","path":"WorkflowsStack/Moderation","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.219.0"}},"PIICheck":{"id":"PIICheck","path":"WorkflowsStack/PIICheck","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.219.0"}},"Approved?":{"id":"Approved?","path":"WorkflowsStack/Approved?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.219.0"}},"Publish":{"id":"Publish","path":"WorkflowsStack/Publish","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.219.0"}},"Reject":{"id":"Reject","path":"WorkflowsStack/Reject","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.219.0"}},"ClosetUploadApproval":{"id":"ClosetUploadApproval","path":"WorkflowsStack/ClosetUploadApproval","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.219.0","metadata":[]},"children":{"Role":{"id":"Role","path":"WorkflowsStack/ClosetUploadApproval/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"WorkflowsStack/ClosetUploadApproval/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsStack/ClosetUploadApproval/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WorkflowsStack/ClosetUploadApproval/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsStack/ClosetUploadApproval/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["VirusScanFnE6FC2115","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["VirusScanFnE6FC2115","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},":*"]]}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"ClosetApprovalTopic3451AB0B"}},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["RejectFnEB2EE464","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["RejectFnEB2EE464","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PublishFnB0C9E186","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PublishFnB0C9E186","Arn"]},":*"]]}]},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ClosetUploadApprovalRoleDefaultPolicy11CFF20D","roles":[{"Ref":"ClosetUploadApprovalRoleC5B63322"}]}}}}}}},"Resource":{"id":"Resource","path":"WorkflowsStack/ClosetUploadApproval/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"VirusScan\",\"States\":{\"VirusScan\":{\"Next\":\"Moderation\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":null,\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["VirusScanFnE6FC2115","Arn"]},"\",\"Payload.$\":\"$\"}},\"Moderation\":{\"Next\":\"PIICheck\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":null,\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},"\",\"Payload.$\":\"$\"}},\"PIICheck\":{\"Next\":\"WaitForHumanApproval\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":null,\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},"\",\"Payload.$\":\"$\"}},\"WaitForHumanApproval\":{\"Next\":\"Approved?\",\"Type\":\"Task\",\"ResultPath\":null,\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::sns:publish.waitForTaskToken\",\"Parameters\":{\"TopicArn\":\"",{"Ref":"ClosetApprovalTopic3451AB0B"},"\",\"Message\":{\"token.$\":\"$$.Task.Token\",\"itemId.$\":\"$.itemId\",\"ownerSub.$\":\"$.ownerSub\"},\"Subject\":\"ApprovalRequired\"}},\"Approved?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.approved\",\"BooleanEquals\":true,\"Next\":\"Publish\"}],\"Default\":\"Reject\"},\"Reject\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":null,\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["RejectFnEB2EE464","Arn"]},"\",\"Payload.$\":\"$\"}},\"Publish\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":null,\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["PublishFnB0C9E186","Arn"]},"\",\"Payload.$\":\"$\"}}},\"TimeoutSeconds\":21600}"]]},"roleArn":{"Fn::GetAtt":["ClosetUploadApprovalRoleC5B63322","Arn"]},"stateMachineType":"STANDARD","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"WorkflowsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"WorkflowsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"Exports":{"id":"Exports","path":"WorkflowsStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"ClosetUploadApprovalDA1D2210\"}":{"id":"Output{\"Ref\":\"ClosetUploadApprovalDA1D2210\"}","path":"WorkflowsStack/Exports/Output{\"Ref\":\"ClosetUploadApprovalDA1D2210\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WorkflowsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WorkflowsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"ApiStack":{"id":"ApiStack","path":"ApiStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"HelloFn":{"id":"HelloFn","path":"ApiStack/HelloFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/HelloFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/HelloFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/HelloFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Code":{"id":"Code","path":"ApiStack/HelloFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/HelloFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/HelloFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/HelloFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"dba505f53767a9e6657cdeba0a1fe85822984a28978face5a785b36aa3fb4af7.zip"},"environment":{"variables":{"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","role":{"Fn::GetAtt":["HelloFnServiceRoleDA97FE56","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"StylingApi":{"id":"StylingApi","path":"ApiStack/StylingApi","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.GraphqlApi","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLApi","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLApi","aws:cdk:cloudformation:props":{"authenticationType":"AMAZON_COGNITO_USER_POOLS","name":"stylingadventures-api","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"userPoolConfig":{"userPoolId":{"Fn::ImportValue":"IdentityStack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"awsRegion":"us-east-1","defaultAction":"ALLOW"},"xrayEnabled":true}}},"Schema":{"id":"Schema","path":"ApiStack/StylingApi/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLSchema","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLSchema","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"definition":"\"\"\"Auth directive used in this API\"\"\"\r\ndirective @aws_auth(cognito_groups: [String]) on FIELD_DEFINITION | OBJECT\r\n\r\n\"\"\"App base types\"\"\"\r\ntype ClosetItem {\r\n  id: ID!\r\n  ownerSub: String!\r\n  status: String!        # PENDING | APPROVED | REJECTED | PUBLISHED\r\n  createdAt: AWSDateTime!\r\n  updatedAt: AWSDateTime!\r\n  mediaKey: String\r\n  title: String\r\n}\r\n\r\n\"\"\"RBAC: roles & tiers\"\"\"\r\nenum Role { FAN BESTIE CREATOR COLLAB ADMIN }\r\nenum Tier { FREE PRIME }\r\n\r\ntype User {\r\n  id: ID!\r\n  email: AWSEmail\r\n  role: Role!\r\n  tier: Tier\r\n  createdAt: AWSDateTime!\r\n  updatedAt: AWSDateTime!\r\n}\r\n\r\ninput SetUserRoleInput {\r\n  userId: ID!\r\n  email: AWSEmail\r\n  role: Role!\r\n  tier: Tier\r\n}\r\n\r\ntype Query {\r\n  # existing\r\n  hello: String!\r\n  myCloset: [ClosetItem!]!\r\n\r\n  # NEW\r\n  me: User!\r\n}\r\n\r\ntype Mutation {\r\n  # existing\r\n  requestClosetApproval(id: ID!): String!  # returns executionArn\r\n  createClosetItem(title: String, mediaKey: String): ClosetItem! @aws_auth\r\n  adminListPending: [ClosetItem!]! @aws_auth(cognito_groups: [\"ADMIN\",\"COLLAB\",\"PRIME\"])\r\n\r\n  # NEW\r\n  setUserRole(input: SetUserRoleInput!): User!\r\n}\r\n\r\nschema {\r\n  query: Query\r\n  mutation: Mutation\r\n}\r\n"}}},"LogGroup":{"id":"LogGroup","path":"ApiStack/StylingApi/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"RolesDS":{"id":"RolesDS","path":"ApiStack/StylingApi/RolesDS","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.219.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/RolesDS/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/RolesDS/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/RolesDS/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/RolesDS/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/RolesDS/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["RolesRolesFn3CC83E37","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["RolesRolesFn3CC83E37","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiRolesDSServiceRoleDefaultPolicy31FB8C9C","roles":[{"Ref":"StylingApiRolesDSServiceRole6309BB1F"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/RolesDS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["RolesRolesFn3CC83E37","Arn"]}},"name":"RolesDS","serviceRoleArn":{"Fn::GetAtt":["StylingApiRolesDSServiceRole6309BB1F","Arn"]},"type":"AWS_LAMBDA"}}}}},"MeResolver":{"id":"MeResolver","path":"ApiStack/StylingApi/MeResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/MeResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"RolesDS","fieldName":"me","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"SetUserRoleResolver":{"id":"SetUserRoleResolver","path":"ApiStack/StylingApi/SetUserRoleResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/SetUserRoleResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"RolesDS","fieldName":"setUserRole","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"HelloDS":{"id":"HelloDS","path":"ApiStack/StylingApi/HelloDS","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.219.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/HelloDS/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/HelloDS/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/HelloDS/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/HelloDS/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/HelloDS/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["HelloFn7942DF23","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["HelloFn7942DF23","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiHelloDSServiceRoleDefaultPolicy42C67BA4","roles":[{"Ref":"StylingApiHelloDSServiceRoleEDCF88D7"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/HelloDS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["HelloFn7942DF23","Arn"]}},"name":"HelloDS","serviceRoleArn":{"Fn::GetAtt":["StylingApiHelloDSServiceRoleEDCF88D7","Arn"]},"type":"AWS_LAMBDA"}}}}},"HelloResolver":{"id":"HelloResolver","path":"ApiStack/StylingApi/HelloResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/HelloResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"HelloDS","fieldName":"hello","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"ClosetDS":{"id":"ClosetDS","path":"ApiStack/StylingApi/ClosetDS","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.219.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/ClosetDS/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/ClosetDS/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetDS/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/ClosetDS/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetDS/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ClosetResolverFnDB09D91C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ClosetResolverFnDB09D91C","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiClosetDSServiceRoleDefaultPolicyE9F47815","roles":[{"Ref":"StylingApiClosetDSServiceRole455891F3"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetDS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["ClosetResolverFnDB09D91C","Arn"]}},"name":"ClosetDS","serviceRoleArn":{"Fn::GetAtt":["StylingApiClosetDSServiceRole455891F3","Arn"]},"type":"AWS_LAMBDA"}}}}},"CreateClosetItem":{"id":"CreateClosetItem","path":"ApiStack/StylingApi/CreateClosetItem","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreateClosetItem/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDS","fieldName":"createClosetItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"RequestClosetApproval":{"id":"RequestClosetApproval","path":"ApiStack/StylingApi/RequestClosetApproval","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/RequestClosetApproval/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDS","fieldName":"requestClosetApproval","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}}}},"Roles":{"id":"Roles","path":"ApiStack/Roles","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"UserRolesTable":{"id":"UserRolesTable","path":"ApiStack/Roles/UserRolesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/Roles/UserRolesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"id","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"ApiStack/Roles/UserRolesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"UserRolesTableName":{"id":"UserRolesTableName","path":"ApiStack/Roles/UserRolesTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"RolesFn":{"id":"RolesFn","path":"ApiStack/Roles/RolesFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/Roles/RolesFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/Roles/RolesFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/Roles/RolesFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/Roles/RolesFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/Roles/RolesFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["RolesUserRolesTable5E79EE44","Arn"]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"RolesRolesFnServiceRoleDefaultPolicyF68D6A51","roles":[{"Ref":"RolesRolesFnServiceRoleE0BF34F6"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/Roles/RolesFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/Roles/RolesFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/Roles/RolesFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/Roles/RolesFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"6da0712b677a1fa83023b6a73997f1542d8b1ed4ab421b26a517f41fab46d187.zip"},"environment":{"variables":{"TABLE_NAME":{"Ref":"RolesUserRolesTable5E79EE44"},"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","role":{"Fn::GetAtt":["RolesRolesFnServiceRoleE0BF34F6","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}}}},"ClosetResolverFn":{"id":"ClosetResolverFn","path":"ApiStack/ClosetResolverFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/ClosetResolverFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/ClosetResolverFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/ClosetResolverFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Ref":"AWS::NoValue"}]},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"WorkflowsStack:ExportsOutputRefClosetUploadApprovalDA1D2210CE637AAA"}}],"Version":"2012-10-17"},"policyName":"ClosetResolverFnServiceRoleDefaultPolicy2117A20A","roles":[{"Ref":"ClosetResolverFnServiceRole21435BA2"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/ClosetResolverFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/ClosetResolverFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/ClosetResolverFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"37a4023c43939682d391e1d687ad2d04916c57ab7a26aae540a54535078adf32.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"APPROVAL_SM_ARN":{"Fn::ImportValue":"WorkflowsStack:ExportsOutputRefClosetUploadApprovalDA1D2210CE637AAA"},"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","role":{"Fn::GetAtt":["ClosetResolverFnServiceRole21435BA2","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"GraphQlApiUrl":{"id":"GraphQlApiUrl","path":"ApiStack/GraphQlApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"GraphQlApiId":{"id":"GraphQlApiId","path":"ApiStack/GraphQlApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ApiStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ApiStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"UploadsStack":{"id":"UploadsStack","path":"UploadsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"UploadsBucket":{"id":"UploadsBucket","path":"UploadsStack/UploadsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"corsConfiguration":{"corsRules":[{"maxAge":86400,"allowedHeaders":["Origin","Accept","Referer","User-Agent","Range"],"allowedMethods":["GET","HEAD"],"allowedOrigins":["https://d1682i07dc1r3k.cloudfront.net"],"exposedHeaders":["ETag","Content-Type","Content-Length","Last-Modified","Accept-Ranges"]},{"maxAge":86400,"allowedHeaders":["*"],"allowedMethods":["PUT"],"allowedOrigins":["https://d1682i07dc1r3k.cloudfront.net"],"exposedHeaders":["ETag","x-amz-version-id"]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"Policy":{"id":"Policy","path":"UploadsStack/UploadsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"UploadsBucket5E5E9B64"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["ThumbsOai69797662","S3CanonicalUserId"]}},"Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/thumbs/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["ThumbsOai69797662","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}},{"Action":["s3:PutObject","s3:AbortMultipartUpload"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["PresignFnServiceRole01C8BCF6","Arn"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/users/*"]]},"Sid":"AllowPresignFnPutObject"}],"Version":"2012-10-17"}}}}}},"Notifications":{"id":"Notifications","path":"UploadsStack/UploadsBucket/Notifications","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}}}},"ThumbsOai":{"id":"ThumbsOai","path":"UploadsStack/ThumbsOai","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbsOai/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Allows CloudFront to reach the bucket"}}}}}},"ThumbsCors":{"id":"ThumbsCors","path":"UploadsStack/ThumbsCors","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.ResponseHeadersPolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbsCors/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnResponseHeadersPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::ResponseHeadersPolicy","aws:cdk:cloudformation:props":{"responseHeadersPolicyConfig":{"name":"UploadsStackThumbsCors4856C759","corsConfig":{"accessControlAllowCredentials":false,"accessControlAllowHeaders":{"items":["Origin","Accept","Referer","User-Agent","Range"]},"accessControlAllowMethods":{"items":["GET","HEAD","OPTIONS"]},"accessControlAllowOrigins":{"items":["https://d1682i07dc1r3k.cloudfront.net"]},"accessControlExposeHeaders":{"items":["ETag","Content-Type","Content-Length","Last-Modified","Accept-Ranges"]},"accessControlMaxAgeSec":86400,"originOverride":true}}}}}}},"ThumbsCache":{"id":"ThumbsCache","path":"UploadsStack/ThumbsCache","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CachePolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbsCache/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCachePolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CachePolicy","aws:cdk:cloudformation:props":{"cachePolicyConfig":{"name":"UploadsStackThumbsCacheA2E882A0-us-east-1","comment":"Thumbs cache with query strings allowed","minTtl":0,"maxTtl":3600,"defaultTtl":600,"parametersInCacheKeyAndForwardedToOrigin":{"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"none"},"enableAcceptEncodingGzip":false,"enableAcceptEncodingBrotli":false,"queryStringsConfig":{"queryStringBehavior":"all"}}}}}}}},"ThumbsDistribution":{"id":"ThumbsDistribution","path":"UploadsStack/ThumbsDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.219.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"UploadsStack/ThumbsDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"UploadsStack/ThumbsDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["UploadsBucket5E5E9B64","RegionalDomainName"]},"id":"UploadsStackThumbsDistributionOrigin194D796EC","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"ThumbsOai69797662"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"UploadsStackThumbsDistributionOrigin194D796EC","allowedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":{"Ref":"ThumbsCacheE4A4665D"},"compress":true,"responseHeadersPolicyId":{"Ref":"ThumbsCorsDCDF4AF7"},"viewerProtocolPolicy":"redirect-to-https"},"customErrorResponses":[{"errorCachingMinTtl":5,"errorCode":404},{"errorCachingMinTtl":5,"errorCode":403}],"httpVersion":"http2","ipv6Enabled":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ThumbDlq":{"id":"ThumbDlq","path":"UploadsStack/ThumbDlq","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbDlq/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ThumbQueue":{"id":"ThumbQueue","path":"UploadsStack/ThumbQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["ThumbDlqB425C70E","Arn"]},"maxReceiveCount":3},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"visibilityTimeout":60}}},"Policy":{"id":"Policy","path":"UploadsStack/ThumbQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:SendMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl"],"Condition":{"ArnLike":{"aws:SourceArn":{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]}}},"Effect":"Allow","Principal":{"Service":"s3.amazonaws.com"},"Resource":{"Fn::GetAtt":["ThumbQueueB1CB3F96","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"ThumbQueueB1CB3F96"}]}}}}}}},"PresignFn":{"id":"PresignFn","path":"UploadsStack/PresignFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/PresignFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/PresignFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/PresignFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/PresignFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/PresignFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]},{"Action":["sqs:SendMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ThumbQueueB1CB3F96","Arn"]}}],"Version":"2012-10-17"},"policyName":"PresignFnServiceRoleDefaultPolicyA1C82940","roles":[{"Ref":"PresignFnServiceRole01C8BCF6"}]}}}}}}},"Code":{"id":"Code","path":"UploadsStack/PresignFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/PresignFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/PresignFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"UploadsStack/PresignFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"d9ddbfd0c000652af9848f2f2487d07c554c9aaa18c8a48c2997785f2d165ab0.zip"},"environment":{"variables":{"BUCKET":{"Ref":"UploadsBucket5E5E9B64"},"WEB_ORIGIN":"https://d1682i07dc1r3k.cloudfront.net","THUMB_QUEUE_URL":{"Ref":"ThumbQueueB1CB3F96"},"THUMBS_CDN":{"Fn::Join":["",["https://",{"Fn::GetAtt":["ThumbsDistribution18F928EF","DomainName"]}]]}}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["PresignFnServiceRole01C8BCF6","Arn"]},"runtime":"nodejs18.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}},"LogRetention":{"id":"LogRetention","path":"UploadsStack/PresignFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"UploadsStack/PresignFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"LogGroup":{"id":"LogGroup","path":"UploadsStack/PresignFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Code":{"id":"Code","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:PutRetentionPolicy","logs:DeleteRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"ListFn":{"id":"ListFn","path":"UploadsStack/ListFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/ListFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/ListFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/ListFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/ListFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ListFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ListFnServiceRoleDefaultPolicy40CF7272","roles":[{"Ref":"ListFnServiceRole4DFB7CA2"}]}}}}}}},"Code":{"id":"Code","path":"UploadsStack/ListFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/ListFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/ListFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"UploadsStack/ListFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"56de791db47e9ef4957c7a916c59c5f49e6438c872453734ef41a7a4dcc93288.zip"},"environment":{"variables":{"BUCKET":{"Ref":"UploadsBucket5E5E9B64"},"WEB_ORIGIN":"https://d1682i07dc1r3k.cloudfront.net"}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["ListFnServiceRole4DFB7CA2","Arn"]},"runtime":"nodejs18.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}},"LogRetention":{"id":"LogRetention","path":"UploadsStack/ListFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ListFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"LogGroup":{"id":"LogGroup","path":"UploadsStack/ListFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"ThumbnailerFn":{"id":"ThumbnailerFn","path":"UploadsStack/ThumbnailerFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/ThumbnailerFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/ThumbnailerFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/ThumbnailerFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/ThumbnailerFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbnailerFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ThumbnailerFnServiceRoleDefaultPolicy3EC6C0A9","roles":[{"Ref":"ThumbnailerFnServiceRole368D8473"}]}}}}}}},"Code":{"id":"Code","path":"UploadsStack/ThumbnailerFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/ThumbnailerFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/ThumbnailerFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"UploadsStack/ThumbnailerFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["x86_64"],"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"86635b52fecfd33753c54f6ca24744ff1551f5d8bfb9fcdd2677d36a7a1b575b.zip"},"environment":{"variables":{"BUCKET":{"Ref":"UploadsBucket5E5E9B64"},"THUMBS_PREFIX":"thumbs/","MAX_WIDTH":"360","JPEG_QUALITY":"80"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ThumbnailerFnServiceRole368D8473","Arn"]},"runtime":"nodejs18.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":60}}},"LogRetention":{"id":"LogRetention","path":"UploadsStack/ThumbnailerFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbnailerFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"LogGroup":{"id":"LogGroup","path":"UploadsStack/ThumbnailerFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"GenerateThumbnail":{"id":"GenerateThumbnail","path":"UploadsStack/GenerateThumbnail","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.219.0"}},"ThumbStateMachine":{"id":"ThumbStateMachine","path":"UploadsStack/ThumbStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.219.0","metadata":[]},"children":{"Role":{"id":"Role","path":"UploadsStack/ThumbStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"UploadsStack/ThumbStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/ThumbStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/ThumbStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ThumbnailerFnEDCB14F0","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ThumbnailerFnEDCB14F0","Arn"]},":*"]]}]},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ThumbStateMachineRoleDefaultPolicyD4C45F7F","roles":[{"Ref":"ThumbStateMachineRole4BEDD96E"}]}}}}}}},"Resource":{"id":"Resource","path":"UploadsStack/ThumbStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"GenerateThumbnail\",\"States\":{\"GenerateThumbnail\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2},{\"ErrorEquals\":[\"States.TaskFailed\",\"States.Timeout\"],\"IntervalSeconds\":3,\"MaxAttempts\":2,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["ThumbnailerFnEDCB14F0","Arn"]},"\"}},\"TimeoutSeconds\":300}"]]},"roleArn":{"Fn::GetAtt":["ThumbStateMachineRole4BEDD96E","Arn"]},"stateMachineType":"STANDARD","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"StartThumbFlowFn":{"id":"StartThumbFlowFn","path":"UploadsStack/StartThumbFlowFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/StartThumbFlowFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/StartThumbFlowFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/StartThumbFlowFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/StartThumbFlowFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/StartThumbFlowFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"ThumbStateMachineDAEB9766"}},{"Action":["sqs:ReceiveMessage","sqs:ChangeMessageVisibility","sqs:GetQueueUrl","sqs:DeleteMessage","sqs:GetQueueAttributes"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ThumbQueueB1CB3F96","Arn"]}}],"Version":"2012-10-17"},"policyName":"StartThumbFlowFnServiceRoleDefaultPolicy2D5898F3","roles":[{"Ref":"StartThumbFlowFnServiceRole916A6687"}]}}}}}}},"Code":{"id":"Code","path":"UploadsStack/StartThumbFlowFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/StartThumbFlowFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/StartThumbFlowFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"UploadsStack/StartThumbFlowFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"9760038a154a8dcc438328aca4a0954ca182babe914b8759d9fa283e4f4f45c0.zip"},"environment":{"variables":{"THUMB_SM_ARN":{"Ref":"ThumbStateMachineDAEB9766"},"AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["StartThumbFlowFnServiceRole916A6687","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}},"LogRetention":{"id":"LogRetention","path":"UploadsStack/StartThumbFlowFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"UploadsStack/StartThumbFlowFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"LogGroup":{"id":"LogGroup","path":"UploadsStack/StartThumbFlowFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"SqsEventSource:UploadsStackThumbQueue408A7875":{"id":"SqsEventSource:UploadsStackThumbQueue408A7875","path":"UploadsStack/StartThumbFlowFn/SqsEventSource:UploadsStackThumbQueue408A7875","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/StartThumbFlowFn/SqsEventSource:UploadsStackThumbQueue408A7875/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":5,"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventSourceArn":{"Fn::GetAtt":["ThumbQueueB1CB3F96","Arn"]},"functionName":{"Ref":"StartThumbFlowFnD5A01751"}}}}}}}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Role":{"id":"Role","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]}}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}}}}}}},"Resource":{"id":"Resource","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"UploadsAuthorizer":{"id":"UploadsAuthorizer","path":"UploadsStack/UploadsAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CognitoUserPoolsAuthorizer","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"identitySource":"method.request.header.Authorization","name":"UploadsStackUploadsAuthorizerD9299124","providerArns":[{"Fn::ImportValue":"IdentityStack:ExportsOutputFnGetAttUserPool6BA7E5F2Arn686ACC00"}],"restApiId":{"Ref":"UploadsApiF6E592E7"},"type":"COGNITO_USER_POOLS"}}}}},"UploadsApi":{"id":"UploadsApi","path":"UploadsStack/UploadsApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"uploads-api","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"UploadsStack/UploadsApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"UploadsStack/UploadsApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Account":{"id":"Account","path":"UploadsStack/UploadsApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["UploadsApiCloudWatchRole6FE18421","Arn"]}}}},"Deployment":{"id":"Deployment","path":"UploadsStack/UploadsApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"UploadsStack/UploadsApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"UploadsApiDeployment4A67E04Ce91748700bfc319a66e72f268c2c829e"},"restApiId":{"Ref":"UploadsApiF6E592E7"},"stageName":"prod","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Endpoint":{"id":"Endpoint","path":"UploadsStack/UploadsApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Default":{"id":"Default","path":"UploadsStack/UploadsApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.219.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Api-Key,X-Amz-Security-Token,Cookie'","method.response.header.Access-Control-Allow-Origin":"'https://d1682i07dc1r3k.cloudfront.net'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"list":{"id":"list","path":"UploadsStack/UploadsApi/Default/list","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/list/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"pathPart":"list","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/list/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/list/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Api-Key,X-Amz-Security-Token,Cookie'","method.response.header.Access-Control-Allow-Origin":"'https://d1682i07dc1r3k.cloudfront.net'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"UploadsApilist04BFB266"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"GET":{"id":"GET","path":"UploadsStack/UploadsApi/Default/list/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.GET..list":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.GET..list","path":"UploadsStack/UploadsApi/Default/list/GET/ApiPermission.UploadsStackUploadsApiC6DB0904.GET..list","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListFn7192A255","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/GET/list"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.GET..list":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.GET..list","path":"UploadsStack/UploadsApi/Default/list/GET/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.GET..list","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListFn7192A255","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/GET/list"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/list/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"UploadsAuthorizer5E742C62"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ListFn7192A255","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApilist04BFB266"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}},"presign":{"id":"presign","path":"UploadsStack/UploadsApi/Default/presign","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/presign/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"pathPart":"presign","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/presign/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/presign/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Api-Key,X-Amz-Security-Token,Cookie'","method.response.header.Access-Control-Allow-Origin":"'https://d1682i07dc1r3k.cloudfront.net'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"UploadsApipresignE1161A2C"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"POST":{"id":"POST","path":"UploadsStack/UploadsApi/Default/presign/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..presign":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..presign","path":"UploadsStack/UploadsApi/Default/presign/POST/ApiPermission.UploadsStackUploadsApiC6DB0904.POST..presign","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/POST/presign"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..presign":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..presign","path":"UploadsStack/UploadsApi/Default/presign/POST/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..presign","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/POST/presign"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/presign/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"UploadsAuthorizer5E742C62"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApipresignE1161A2C"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}},"delete":{"id":"delete","path":"UploadsStack/UploadsApi/Default/delete","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/delete/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"pathPart":"delete","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/delete/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/delete/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Api-Key,X-Amz-Security-Token,Cookie'","method.response.header.Access-Control-Allow-Origin":"'https://d1682i07dc1r3k.cloudfront.net'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"UploadsApidelete14170098"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"DELETE":{"id":"DELETE","path":"UploadsStack/UploadsApi/Default/delete/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.DELETE..delete":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.DELETE..delete","path":"UploadsStack/UploadsApi/Default/delete/DELETE/ApiPermission.UploadsStackUploadsApiC6DB0904.DELETE..delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/DELETE/delete"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.DELETE..delete":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.DELETE..delete","path":"UploadsStack/UploadsApi/Default/delete/DELETE/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.DELETE..delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/DELETE/delete"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/delete/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"UploadsAuthorizer5E742C62"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApidelete14170098"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}},"thumb-head":{"id":"thumb-head","path":"UploadsStack/UploadsApi/Default/thumb-head","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/thumb-head/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"pathPart":"thumb-head","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/thumb-head/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/thumb-head/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Api-Key,X-Amz-Security-Token,Cookie'","method.response.header.Access-Control-Allow-Origin":"'https://d1682i07dc1r3k.cloudfront.net'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true}}],"resourceId":{"Ref":"UploadsApithumbhead26656547"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"GET":{"id":"GET","path":"UploadsStack/UploadsApi/Default/thumb-head/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.GET..thumb-head":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.GET..thumb-head","path":"UploadsStack/UploadsApi/Default/thumb-head/GET/ApiPermission.UploadsStackUploadsApiC6DB0904.GET..thumb-head","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ThumbHeadFn9C2B9FD0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/GET/thumb-head"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.GET..thumb-head":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.GET..thumb-head","path":"UploadsStack/UploadsApi/Default/thumb-head/GET/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.GET..thumb-head","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ThumbHeadFn9C2B9FD0","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/GET/thumb-head"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/thumb-head/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"UploadsAuthorizer5E742C62"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["ThumbHeadFn9C2B9FD0","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApithumbhead26656547"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}}}},"Default4XX":{"id":"Default4XX","path":"UploadsStack/UploadsApi/Default4XX","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default4XX/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.Access-Control-Allow-Origin":"'https://d1682i07dc1r3k.cloudfront.net'","gatewayresponse.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,Cookie'","gatewayresponse.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","gatewayresponse.header.Access-Control-Allow-Credentials":"'true'"},"responseType":"DEFAULT_4XX","restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"Default5XX":{"id":"Default5XX","path":"UploadsStack/UploadsApi/Default5XX","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default5XX/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.Access-Control-Allow-Origin":"'https://d1682i07dc1r3k.cloudfront.net'","gatewayresponse.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key,Cookie'","gatewayresponse.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'","gatewayresponse.header.Access-Control-Allow-Credentials":"'true'"},"responseType":"DEFAULT_5XX","restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}},"ThumbHeadFn":{"id":"ThumbHeadFn","path":"UploadsStack/ThumbHeadFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/ThumbHeadFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/ThumbHeadFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/ThumbHeadFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/ThumbHeadFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbHeadFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ThumbHeadFnServiceRoleDefaultPolicy91888102","roles":[{"Ref":"ThumbHeadFnServiceRole3E5C13F3"}]}}}}}}},"Code":{"id":"Code","path":"UploadsStack/ThumbHeadFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/ThumbHeadFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/ThumbHeadFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"UploadsStack/ThumbHeadFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"70060b90ef03979a5b38a576f09072cf753f53668ce2b65c5f8cd52f94d654c7.zip"},"environment":{"variables":{"BUCKET":{"Ref":"UploadsBucket5E5E9B64"},"WEB_ORIGIN":"https://d1682i07dc1r3k.cloudfront.net"}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["ThumbHeadFnServiceRole3E5C13F3","Arn"]},"runtime":"nodejs18.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}},"LogRetention":{"id":"LogRetention","path":"UploadsStack/ThumbHeadFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbHeadFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"LogGroup":{"id":"LogGroup","path":"UploadsStack/ThumbHeadFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"UploadsDashboard":{"id":"UploadsDashboard","path":"UploadsStack/UploadsDashboard","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsDashboard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":{"Fn::Join":["",["{\"widgets\":[{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Thumb Queue Depth\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",{"Fn::GetAtt":["ThumbQueueB1CB3F96","QueueName"]},"\",{\"period\":60}],[\"AWS/SQS\",\"ApproximateAgeOfOldestMessage\",\"QueueName\",\"",{"Fn::GetAtt":["ThumbQueueB1CB3F96","QueueName"]},"\",{\"period\":60,\"stat\":\"Maximum\",\"yAxis\":\"right\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Step Functions Executions\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/States\",\"ExecutionsSucceeded\",\"StateMachineArn\",\"",{"Ref":"ThumbStateMachineDAEB9766"},"\",{\"stat\":\"Sum\"}],[\"AWS/States\",\"ExecutionsFailed\",\"StateMachineArn\",\"",{"Ref":"ThumbStateMachineDAEB9766"},"\",{\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda Errors\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"StartThumbFlowFnD5A01751"},"\",{\"period\":60,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"ThumbnailerFnEDCB14F0"},"\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}}]}"]]},"dashboardName":"UploadsStack-Uploads"}}}}},"UploadsApiUrl":{"id":"UploadsApiUrl","path":"UploadsStack/UploadsApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"UploadsBucketName":{"id":"UploadsBucketName","path":"UploadsStack/UploadsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ThumbQueueUrl":{"id":"ThumbQueueUrl","path":"UploadsStack/ThumbQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ThumbsCdnDomainName":{"id":"ThumbsCdnDomainName","path":"UploadsStack/ThumbsCdnDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ThumbStateMachineArn":{"id":"ThumbStateMachineArn","path":"UploadsStack/ThumbStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"UploadsDashboardName":{"id":"UploadsDashboardName","path":"UploadsStack/UploadsDashboardName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"UploadsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"UploadsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"UploadsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"UploadsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"WebStack":{"id":"WebStack","path":"WebStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"SiteBucket":{"id":"SiteBucket","path":"WebStack/SiteBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/SiteBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"aws-cdk:cr-owned:ac28870b","value":"true"},{"key":"Env","value":"dev"}]}}},"Policy":{"id":"Policy","path":"WebStack/SiteBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/SiteBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"SiteBucket397A1860"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["SiteOaiE31FB8B2","S3CanonicalUserId"]}},"Resource":[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["SiteOaiE31FB8B2","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"SiteOai":{"id":"SiteOai","path":"WebStack/SiteOai","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/SiteOai/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Allows CloudFront to reach the bucket"}}}}}},"DirIndexRewriteFn":{"id":"DirIndexRewriteFn","path":"WebStack/DirIndexRewriteFn","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Function","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/DirIndexRewriteFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Function","aws:cdk:cloudformation:props":{"autoPublish":true,"functionCode":"\nfunction handler(event) {\n  var req = event.request;\n  var uri = req.uri || '/';\n  if (uri.endsWith('/')) { req.uri = uri + 'index.html'; return req; }\n  if (uri.indexOf('.') === -1) { req.uri = uri + '/index.html'; return req; }\n  return req;\n}\n      ","functionConfig":{"comment":"us-east-1WebStackDirIndexRewriteFnB90BEA1B","runtime":"cloudfront-js-1.0"},"name":"us-east-1WebStackDirIndexRewriteFnB90BEA1B"}}}}},"Distribution":{"id":"Distribution","path":"WebStack/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.219.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"WebStack/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"WebStack/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["SiteBucket397A1860","RegionalDomainName"]},"id":"WebStackDistributionOrigin128332BA7","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"SiteOaiE31FB8B2"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"WebStackDistributionOrigin128332BA7","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"responseHeadersPolicyId":"67f7725c-6f97-4210-82d7-5512b31e9d03","viewerProtocolPolicy":"redirect-to-https","functionAssociations":[{"functionArn":{"Fn::GetAtt":["DirIndexRewriteFn951FA463","FunctionARN"]},"eventType":"viewer-request"}]},"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"DeploySite":{"id":"DeploySite","path":"WebStack/DeploySite","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.219.0"},"children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"WebStack/DeploySite/AwsCliLayer","constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.219.0","metadata":[]},"children":{"Code":{"id":"Code","path":"WebStack/DeploySite/AwsCliLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"WebStack/DeploySite/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"WebStack/DeploySite/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WebStack/DeploySite/AwsCliLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"c49d356cac773d491c5f7ac148995a1181498a8e289429f8612a7f7e3814f535.zip"},"description":"/opt/awscli/aws"}}}}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"WebStack/DeploySite/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.219.0","metadata":[]}},"Asset1":{"id":"Asset1","path":"WebStack/DeploySite/Asset1","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"WebStack/DeploySite/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"WebStack/DeploySite/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"CustomResource":{"id":"CustomResource","path":"WebStack/DeploySite/CustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"WebStack/DeploySite/CustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}}}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-637423256673-us-east-1"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-637423256673-us-east-1/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}]},{"Action":["cloudfront:GetInvalidation","cloudfront:CreateInvalidation"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265"}]}}}}}}},"Code":{"id":"Code","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"3423a042b818e31c1e34a19d6689ab2e5f9b70fcbe9e71df66f241b20a200bd9.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"handler":"index.handler","layers":[{"Ref":"DeploySiteAwsCliLayer88B0EBE2"}],"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265","Arn"]},"runtime":"python3.13","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":900}}}}},"CloudFrontDistributionDomainName":{"id":"CloudFrontDistributionDomainName","path":"WebStack/CloudFrontDistributionDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"StaticSiteBucketName":{"id":"StaticSiteBucketName","path":"WebStack/StaticSiteBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"WebStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"WebStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WebStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WebStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}