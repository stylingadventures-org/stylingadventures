{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.223.0"},"children":{"WebStack":{"id":"WebStack","path":"WebStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"WebBucket":{"id":"WebBucket","path":"WebStack/WebBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/WebBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Env","value":"dev"}]}}},"Policy":{"id":"Policy","path":"WebStack/WebBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/WebBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WebBucket12880F5B"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}]},{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["WebDistributionOrigin1S3Origin242B188A","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"WebStack/WebBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"WebStack/WebBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"WebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.223.0"},"children":{"Staging":{"id":"Staging","path":"WebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"Role":{"id":"Role","path":"WebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}},"Handler":{"id":"Handler","path":"WebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"WebDistribution":{"id":"WebDistribution","path":"WebStack/WebDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.223.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"WebStack/WebDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"S3Origin":{"id":"S3Origin","path":"WebStack/WebDistribution/Origin1/S3Origin","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/WebDistribution/Origin1/S3Origin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for WebStackWebDistributionOrigin1AAF54134"}}}}}}}},"Resource":{"id":"Resource","path":"WebStack/WebDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["WebBucket12880F5B","RegionalDomainName"]},"id":"WebStackWebDistributionOrigin1AAF54134","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"WebDistributionOrigin1S3Origin242B188A"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"WebStackWebDistributionOrigin1AAF54134","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"WebBucketName":{"id":"WebBucketName","path":"WebStack/WebBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CloudFrontDistributionId":{"id":"CloudFrontDistributionId","path":"WebStack/CloudFrontDistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CloudFrontDomainName":{"id":"CloudFrontDomainName","path":"WebStack/CloudFrontDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"WebStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"WebStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"WebStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"WebDistribution59C46482\",\"DomainName\"]}":{"id":"Output{\"Fn::GetAtt\":[\"WebDistribution59C46482\",\"DomainName\"]}","path":"WebStack/Exports/Output{\"Fn::GetAtt\":[\"WebDistribution59C46482\",\"DomainName\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WebStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WebStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"IdentityV2Stack":{"id":"IdentityV2Stack","path":"IdentityV2Stack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"UserPool":{"id":"UserPool","path":"IdentityV2Stack/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityV2Stack/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"schema":[{"name":"email","mutable":false,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"App":"stylingadventures","Env":"dev"},"usernameAttributes":["email"],"userPoolName":"sa2-dev-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}}}},"AdminGroup":{"id":"AdminGroup","path":"IdentityV2Stack/AdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Platform admins","groupName":"admin","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"CreatorGroup":{"id":"CreatorGroup","path":"IdentityV2Stack/CreatorGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Pro creators with access to creator tools","groupName":"creator","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"UserPoolClient":{"id":"UserPoolClient","path":"IdentityV2Stack/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityV2Stack/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":[{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]}],"clientName":"sa2-dev-web-client","generateSecret":false,"logoutUrLs":[{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]}],"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"UserPoolId":{"id":"UserPoolId","path":"IdentityV2Stack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"IdentityV2Stack/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"WebOrigin":{"id":"WebOrigin","path":"IdentityV2Stack/WebOrigin","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"IdentityV2Stack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"IdentityV2Stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"IdentityV2Stack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"UserPool6BA7E5F2\"}":{"id":"Output{\"Ref\":\"UserPool6BA7E5F2\"}","path":"IdentityV2Stack/Exports/Output{\"Ref\":\"UserPool6BA7E5F2\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}","path":"IdentityV2Stack/Exports/Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"IdentityV2Stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"IdentityV2Stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"DataStack":{"id":"DataStack","path":"DataStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"AppTable":{"id":"AppTable","path":"DataStack/AppTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DataStack/AppTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"},{"attributeName":"gsi1pk","attributeType":"S"},{"attributeName":"gsi1sk","attributeType":"S"},{"attributeName":"gsi2pk","attributeType":"S"},{"attributeName":"gsi2sk","attributeType":"S"},{"attributeName":"rawMediaKey","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi1","keySchema":[{"attributeName":"gsi1pk","keyType":"HASH"},{"attributeName":"gsi1sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"gsi2","keySchema":[{"attributeName":"gsi2pk","keyType":"HASH"},{"attributeName":"gsi2sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"rawMediaKeyIndex","keySchema":[{"attributeName":"rawMediaKey","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"sa-dev-app","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"DataStack/AppTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"CDKMetadata":{"id":"CDKMetadata","path":"DataStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"DataStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"DataStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"AppTable815C50BC\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"AppTable815C50BC\",\"Arn\"]}","path":"DataStack/Exports/Output{\"Fn::GetAtt\":[\"AppTable815C50BC\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"AppTable815C50BC\"}":{"id":"Output{\"Ref\":\"AppTable815C50BC\"}","path":"DataStack/Exports/Output{\"Ref\":\"AppTable815C50BC\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"DataStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"DataStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"WorkflowsV2Stack":{"id":"WorkflowsV2Stack","path":"WorkflowsV2Stack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"ApprovalNoop":{"id":"ApprovalNoop","path":"WorkflowsV2Stack/ApprovalNoop","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"ApprovalStateMachine":{"id":"ApprovalStateMachine","path":"WorkflowsV2Stack/ApprovalStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"WorkflowsV2Stack/ApprovalStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"WorkflowsV2Stack/ApprovalStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/ApprovalStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/ApprovalStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":"{\"StartAt\":\"ApprovalNoop\",\"States\":{\"ApprovalNoop\":{\"Type\":\"Pass\",\"Comment\":\"Closet approval workflow placeholder – expand to multi-step moderation later\",\"End\":true}}}","roleArn":{"Fn::GetAtt":["ApprovalStateMachineRoleE1EEC7A5","Arn"]},"stateMachineName":"SA2-ClosetApproval-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"BgChangeNoop":{"id":"BgChangeNoop","path":"WorkflowsV2Stack/BgChangeNoop","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"BackgroundChangeStateMachine":{"id":"BackgroundChangeStateMachine","path":"WorkflowsV2Stack/BackgroundChangeStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"WorkflowsV2Stack/BackgroundChangeStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"WorkflowsV2Stack/BackgroundChangeStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/BackgroundChangeStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/BackgroundChangeStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":"{\"StartAt\":\"BgChangeNoop\",\"States\":{\"BgChangeNoop\":{\"Type\":\"Pass\",\"Comment\":\"Background change workflow placeholder – expand to moderation + processing later\",\"End\":true}}}","roleArn":{"Fn::GetAtt":["BackgroundChangeStateMachineRole7FBE53CC","Arn"]},"stateMachineName":"SA2-BackgroundChange-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"StoryPublishNoop":{"id":"StoryPublishNoop","path":"WorkflowsV2Stack/StoryPublishNoop","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"StoryPublishStateMachine":{"id":"StoryPublishStateMachine","path":"WorkflowsV2Stack/StoryPublishStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"WorkflowsV2Stack/StoryPublishStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"WorkflowsV2Stack/StoryPublishStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/StoryPublishStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/StoryPublishStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":"{\"StartAt\":\"StoryPublishNoop\",\"States\":{\"StoryPublishNoop\":{\"Type\":\"Pass\",\"Comment\":\"Story publish workflow placeholder – expand to scheduling / publishing / syndication later\",\"End\":true}}}","roleArn":{"Fn::GetAtt":["StoryPublishStateMachineRole46B5253B","Arn"]},"stateMachineName":"SA2-StoryPublish-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ApprovalStateMachineArn":{"id":"ApprovalStateMachineArn","path":"WorkflowsV2Stack/ApprovalStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"BgChangeStateMachineArn":{"id":"BgChangeStateMachineArn","path":"WorkflowsV2Stack/BgChangeStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"StoryPublishStateMachineArn":{"id":"StoryPublishStateMachineArn","path":"WorkflowsV2Stack/StoryPublishStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"WorkflowsV2Stack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"WorkflowsV2Stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"WorkflowsV2Stack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"ApprovalStateMachine767589AA\"}":{"id":"Output{\"Ref\":\"ApprovalStateMachine767589AA\"}","path":"WorkflowsV2Stack/Exports/Output{\"Ref\":\"ApprovalStateMachine767589AA\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WorkflowsV2Stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WorkflowsV2Stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"UploadsStack":{"id":"UploadsStack","path":"UploadsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"UploadsBucket":{"id":"UploadsBucket","path":"UploadsStack/UploadsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"corsConfiguration":{"corsRules":[{"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST","DELETE"],"allowedOrigins":[{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"http://localhost:5173"],"exposedHeaders":["ETag"]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Env","value":"dev"}]}}},"Policy":{"id":"Policy","path":"UploadsStack/UploadsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"UploadsBucket5E5E9B64"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"UploadsStack/UploadsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"UploadsStack/UploadsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"UploadsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.223.0"},"children":{"Staging":{"id":"Staging","path":"UploadsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"Role":{"id":"Role","path":"UploadsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}},"Handler":{"id":"Handler","path":"UploadsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"UploadsBucketName":{"id":"UploadsBucketName","path":"UploadsStack/UploadsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"UploadApiFn":{"id":"UploadApiFn","path":"UploadsStack/UploadApiFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/UploadApiFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/UploadApiFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/UploadApiFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/UploadApiFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadApiFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"UploadApiFnServiceRoleDefaultPolicy12879165","roles":[{"Ref":"UploadApiFnServiceRoleF47EDB66"}]}}}}}}},"Code":{"id":"Code","path":"UploadsStack/UploadApiFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/UploadApiFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/UploadApiFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadApiFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"5f995b7b53292763f5dcba8e9b6ca0e27790093e091814353f2e4326936d2237.zip"},"environment":{"variables":{"UPLOADS_BUCKET_NAME":{"Ref":"UploadsBucket5E5E9B64"}}},"handler":"index.handler","role":{"Fn::GetAtt":["UploadApiFnServiceRoleF47EDB66","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"UploadsApi":{"id":"UploadsApi","path":"UploadsStack/UploadsApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"SA-UploadsApi-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"UploadsStack/UploadsApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"UploadsStack/UploadsApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Account":{"id":"Account","path":"UploadsStack/UploadsApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["UploadsApiCloudWatchRole6FE18421","Arn"]}}}},"Deployment":{"id":"Deployment","path":"UploadsStack/UploadsApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"UploadsStack/UploadsApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"UploadsApiDeployment4A67E04Cd75a0206d7f9f939ebfbac2326b899ea"},"restApiId":{"Ref":"UploadsApiF6E592E7"},"stageName":"prod","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Endpoint":{"id":"Endpoint","path":"UploadsStack/UploadsApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Default":{"id":"Default","path":"UploadsStack/UploadsApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.223.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":{"Fn::Join":["",["'https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"},"'"]]},"method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"presign":{"id":"presign","path":"UploadsStack/UploadsApi/Default/presign","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/presign/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"pathPart":"presign","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/presign/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/presign/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":{"Fn::Join":["",["'https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"},"'"]]},"method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"UploadsApipresignE1161A2C"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"POST":{"id":"POST","path":"UploadsStack/UploadsApi/Default/presign/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..presign":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..presign","path":"UploadsStack/UploadsApi/Default/presign/POST/ApiPermission.UploadsStackUploadsApiC6DB0904.POST..presign","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/POST/presign"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..presign":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..presign","path":"UploadsStack/UploadsApi/Default/presign/POST/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..presign","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/POST/presign"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/presign/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApipresignE1161A2C"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}},"get":{"id":"get","path":"UploadsStack/UploadsApi/Default/get","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/get/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"pathPart":"get","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/get/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/get/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":{"Fn::Join":["",["'https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"},"'"]]},"method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"UploadsApiget25FE2824"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"POST":{"id":"POST","path":"UploadsStack/UploadsApi/Default/get/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..get":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..get","path":"UploadsStack/UploadsApi/Default/get/POST/ApiPermission.UploadsStackUploadsApiC6DB0904.POST..get","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/POST/get"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..get":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..get","path":"UploadsStack/UploadsApi/Default/get/POST/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..get","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/POST/get"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/get/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApiget25FE2824"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}}}}}},"UploadsApiUrl":{"id":"UploadsApiUrl","path":"UploadsStack/UploadsApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"UploadsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"UploadsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"UploadsStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"UploadsBucket5E5E9B64\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"UploadsBucket5E5E9B64\",\"Arn\"]}","path":"UploadsStack/Exports/Output{\"Fn::GetAtt\":[\"UploadsBucket5E5E9B64\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"UploadsBucket5E5E9B64\"}":{"id":"Output{\"Ref\":\"UploadsBucket5E5E9B64\"}","path":"UploadsStack/Exports/Output{\"Ref\":\"UploadsBucket5E5E9B64\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"UploadsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"UploadsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"BestiesClosetStack":{"id":"BestiesClosetStack","path":"BestiesClosetStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"ModerationFn":{"id":"ModerationFn","path":"BestiesClosetStack/ModerationFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ModerationFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ModerationFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerationFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ModerationFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerationFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ModerationFnServiceRoleDefaultPolicy9C9AC1C0","roles":[{"Ref":"ModerationFnServiceRoleBF6ED484"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ModerationFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ModerationFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ModerationFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerationFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"4ba85edecef9110bbd9f4f8617884cc5035e2fedc970981b6cd6c797038cb3e8.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"BUCKET_NAME":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["ModerationFnServiceRoleBF6ED484","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"PiiCheckFn":{"id":"PiiCheckFn","path":"BestiesClosetStack/PiiCheckFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/PiiCheckFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/PiiCheckFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/PiiCheckFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/PiiCheckFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/PiiCheckFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"PiiCheckFnServiceRoleDefaultPolicy5209AB8F","roles":[{"Ref":"PiiCheckFnServiceRole84F31904"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/PiiCheckFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/PiiCheckFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/PiiCheckFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/PiiCheckFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"766afd677f7428b144d1d6909f75cb666bcab663974d7e3f06c4796203b98d84.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["PiiCheckFnServiceRole84F31904","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"PublishClosetItemFn":{"id":"PublishClosetItemFn","path":"BestiesClosetStack/PublishClosetItemFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/PublishClosetItemFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/PublishClosetItemFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/PublishClosetItemFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/PublishClosetItemFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/PublishClosetItemFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PublishClosetItemFnServiceRoleDefaultPolicy4282ADC3","roles":[{"Ref":"PublishClosetItemFnServiceRole9997268D"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/PublishClosetItemFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/PublishClosetItemFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/PublishClosetItemFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/PublishClosetItemFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"fea5a6ff2cd4c4887afea8687d9ffd6488623ad8f4e1ce48eefa967df941ddf7.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"BUCKET_NAME":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"PUBLISHED_PREFIX":"published","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["PublishClosetItemFnServiceRole9997268D","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"NotifyAdminFn":{"id":"NotifyAdminFn","path":"BestiesClosetStack/NotifyAdminFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/NotifyAdminFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/NotifyAdminFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/NotifyAdminFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/NotifyAdminFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/NotifyAdminFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["states:SendTaskSuccess","states:SendTaskFailure","states:SendTaskHeartbeat"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"NotifyAdminFnServiceRoleDefaultPolicyBA423BD5","roles":[{"Ref":"NotifyAdminFnServiceRole14F33905"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/NotifyAdminFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/NotifyAdminFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/NotifyAdminFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/NotifyAdminFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"e78556db2333377fbf093172446d391a474860d6d16ccd35534389d447ab40ee.zip"},"environment":{"variables":{"AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["NotifyAdminFnServiceRole14F33905","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ModerateImage":{"id":"ModerateImage","path":"BestiesClosetStack/ModerateImage","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"CheckPII":{"id":"CheckPII","path":"BestiesClosetStack/CheckPII","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"NotifyAdminForApproval":{"id":"NotifyAdminForApproval","path":"BestiesClosetStack/NotifyAdminForApproval","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"PublishClosetItem":{"id":"PublishClosetItem","path":"BestiesClosetStack/PublishClosetItem","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"Rejected":{"id":"Rejected","path":"BestiesClosetStack/Rejected","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Fail","version":"2.223.0"}},"Published":{"id":"Published","path":"BestiesClosetStack/Published","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Succeed","version":"2.223.0"}},"AdminApproved?":{"id":"AdminApproved?","path":"BestiesClosetStack/AdminApproved?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"ClosetUploadApprovalSM":{"id":"ClosetUploadApprovalSM","path":"BestiesClosetStack/ClosetUploadApprovalSM","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"BestiesClosetStack/ClosetUploadApprovalSM/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"BestiesClosetStack/ClosetUploadApprovalSM/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetUploadApprovalSM/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ClosetUploadApprovalSM/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetUploadApprovalSM/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["NotifyAdminFnFDB24FD6","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["NotifyAdminFnFDB24FD6","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PublishClosetItemFn8BF46E04","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PublishClosetItemFn8BF46E04","Arn"]},":*"]]}]},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ClosetUploadApprovalSMRoleDefaultPolicyFFBBCD8F","roles":[{"Ref":"ClosetUploadApprovalSMRole38D45F6B"}]}}}}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetUploadApprovalSM/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"ModerateImage\",\"States\":{\"ModerateImage\":{\"Next\":\"CheckPII\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},"\",\"Payload.$\":\"$\"}},\"CheckPII\":{\"Next\":\"NotifyAdminForApproval\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},"\",\"Payload.$\":\"$\"}},\"NotifyAdminForApproval\":{\"Next\":\"AdminApproved?\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke.waitForTaskToken\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["NotifyAdminFnFDB24FD6","Arn"]},"\",\"Payload\":{\"token.$\":\"$$.Task.Token\",\"item.$\":\"$.item\"}}},\"AdminApproved?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.decision\",\"StringEquals\":\"APPROVE\",\"Next\":\"PublishClosetItem\"},{\"Variable\":\"$.decision\",\"StringEquals\":\"REJECT\",\"Next\":\"Rejected\"}],\"Default\":\"Rejected\"},\"Rejected\":{\"Type\":\"Fail\",\"Cause\":\"RejectedByAdmin\"},\"PublishClosetItem\":{\"Next\":\"Published\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["PublishClosetItemFn8BF46E04","Arn"]},"\",\"Payload.$\":\"$\"}},\"Published\":{\"Type\":\"Succeed\"}}}"]]},"roleArn":{"Fn::GetAtt":["ClosetUploadApprovalSMRole38D45F6B","Arn"]},"stateMachineType":"STANDARD","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"ValidateBgChangeFn":{"id":"ValidateBgChangeFn","path":"BestiesClosetStack/ValidateBgChangeFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ValidateBgChangeFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ValidateBgChangeFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ValidateBgChangeFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ValidateBgChangeFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ValidateBgChangeFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ValidateBgChangeFnServiceRoleDefaultPolicyF44C3E36","roles":[{"Ref":"ValidateBgChangeFnServiceRoleA475219F"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ValidateBgChangeFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ValidateBgChangeFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ValidateBgChangeFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ValidateBgChangeFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"747c8b56a542c8c793d144d82a5d2e732230958c7beb96fe84efe4d8b105e204.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["ValidateBgChangeFnServiceRoleA475219F","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ModerateBgFn":{"id":"ModerateBgFn","path":"BestiesClosetStack/ModerateBgFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ModerateBgFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ModerateBgFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerateBgFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ModerateBgFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerateBgFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ModerateBgFnServiceRoleDefaultPolicy75CA2E9C","roles":[{"Ref":"ModerateBgFnServiceRoleA8662475"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ModerateBgFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ModerateBgFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ModerateBgFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerateBgFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"5ca245031610985bf8d9820d169d4b2a39d406e6f44ec6685cf1ab11f7f2d014.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["ModerateBgFnServiceRoleA8662475","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ApplyBgChangeFn":{"id":"ApplyBgChangeFn","path":"BestiesClosetStack/ApplyBgChangeFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ApplyBgChangeFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ApplyBgChangeFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ApplyBgChangeFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ApplyBgChangeFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ApplyBgChangeFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ApplyBgChangeFnServiceRoleDefaultPolicyF1F3687F","roles":[{"Ref":"ApplyBgChangeFnServiceRole9AC3176A"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ApplyBgChangeFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ApplyBgChangeFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ApplyBgChangeFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ApplyBgChangeFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"14041ff7aa30d0fc5af97f3a3c10e8844f0c327d989f903aeba1b3cb284b0e1a.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["ApplyBgChangeFnServiceRole9AC3176A","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"BestieBackgroundApprovalTopic":{"id":"BestieBackgroundApprovalTopic","path":"BestiesClosetStack/BestieBackgroundApprovalTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BestieBackgroundApprovalTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"Bestie Background Change Approvals","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"Policy":{"id":"Policy","path":"BestiesClosetStack/BestieBackgroundApprovalTopic/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.TopicPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BestieBackgroundApprovalTopic/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopicPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::TopicPolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Ref":"BestieBackgroundApprovalTopic895968C0"},"Sid":"0"}],"Version":"2012-10-17"},"topics":[{"Ref":"BestieBackgroundApprovalTopic895968C0"}]}}}}}}},"BestiesBus":{"id":"BestiesBus","path":"BestiesClosetStack/BestiesBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BestiesBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"name":"sa-BestiesClosetStack-besties"}}}}},"BgChangePendingReviewRule":{"id":"BgChangePendingReviewRule","path":"BestiesClosetStack/BgChangePendingReviewRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BgChangePendingReviewRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventBusName":{"Ref":"BestiesBus2096AB60"},"eventPattern":{"source":["stylingadventures.besties"],"detail-type":["BestieBackgroundChangePendingReview"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Ref":"BestieBackgroundApprovalTopic895968C0"}}]}}}}},"ClosetItemPendingReviewRule":{"id":"ClosetItemPendingReviewRule","path":"BestiesClosetStack/ClosetItemPendingReviewRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetItemPendingReviewRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventBusName":{"Ref":"BestiesBus2096AB60"},"eventPattern":{"source":["stylingadventures.besties"],"detail-type":["BestieClosetItemPendingReview"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Ref":"BestieBackgroundApprovalTopic895968C0"}}]}}}}},"ValidateBackgroundChange":{"id":"ValidateBackgroundChange","path":"BestiesClosetStack/ValidateBackgroundChange","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"ModerateBackground":{"id":"ModerateBackground","path":"BestiesClosetStack/ModerateBackground","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"NotifyAdminBgChange":{"id":"NotifyAdminBgChange","path":"BestiesClosetStack/NotifyAdminBgChange","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.SnsPublish","version":"2.223.0"}},"ApplyBackgroundChange":{"id":"ApplyBackgroundChange","path":"BestiesClosetStack/ApplyBackgroundChange","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"AdminApprovedBgChange?":{"id":"AdminApprovedBgChange?","path":"BestiesClosetStack/AdminApprovedBgChange?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"BackgroundChangeRejected":{"id":"BackgroundChangeRejected","path":"BestiesClosetStack/BackgroundChangeRejected","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"BackgroundChangeApprovalSM":{"id":"BackgroundChangeApprovalSM","path":"BestiesClosetStack/BackgroundChangeApprovalSM","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ValidateBgChangeFn419727A4","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ValidateBgChangeFn419727A4","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ModerateBgFn9078832F","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ModerateBgFn9078832F","Arn"]},":*"]]}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"BestieBackgroundApprovalTopic895968C0"}},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ApplyBgChangeFn6D1C78C3","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ApplyBgChangeFn6D1C78C3","Arn"]},":*"]]}]},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BackgroundChangeApprovalSMRoleDefaultPolicy631B6BC3","roles":[{"Ref":"BackgroundChangeApprovalSMRole8975368A"}]}}}}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"ValidateBackgroundChange\",\"States\":{\"ValidateBackgroundChange\":{\"Next\":\"ModerateBackground\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["ValidateBgChangeFn419727A4","Arn"]},"\"},\"ModerateBackground\":{\"Next\":\"NotifyAdminBgChange\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["ModerateBgFn9078832F","Arn"]},"\"},\"NotifyAdminBgChange\":{\"Next\":\"AdminApprovedBgChange?\",\"Type\":\"Task\",\"ResultPath\":\"$.approval\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::sns:publish.waitForTaskToken\",\"Parameters\":{\"TopicArn\":\"",{"Ref":"BestieBackgroundApprovalTopic895968C0"},"\",\"Message\":{\"type\":\"BESTIE_BACKGROUND_CHANGE\",\"detail.$\":\"$\",\"taskToken.$\":\"$$.Task.Token\"}}},\"AdminApprovedBgChange?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.approval.approved\",\"BooleanEquals\":true,\"Next\":\"ApplyBackgroundChange\"}],\"Default\":\"BackgroundChangeRejected\"},\"BackgroundChangeRejected\":{\"Type\":\"Pass\",\"Result\":{\"status\":\"REJECTED\"},\"End\":true},\"ApplyBackgroundChange\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["ApplyBgChangeFn6D1C78C3","Arn"]},"\"}}}"]]},"roleArn":{"Fn::GetAtt":["BackgroundChangeApprovalSMRole8975368A","Arn"]},"stateMachineType":"STANDARD","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"BestiesClosetStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"BestiesClosetStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"BestiesClosetStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"BackgroundChangeApprovalSMA6DF140D\"}":{"id":"Output{\"Ref\":\"BackgroundChangeApprovalSMA6DF140D\"}","path":"BestiesClosetStack/Exports/Output{\"Ref\":\"BackgroundChangeApprovalSMA6DF140D\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"BestiesClosetStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BestiesClosetStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"BestiesStoriesStack":{"id":"BestiesStoriesStack","path":"BestiesStoriesStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"ComposeStoryFn":{"id":"ComposeStoryFn","path":"BestiesStoriesStack/ComposeStoryFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesStoriesStack/ComposeStoryFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesStoriesStack/ComposeStoryFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/ComposeStoryFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesStoriesStack/ComposeStoryFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesStoriesStack/ComposeStoryFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ComposeStoryFnServiceRoleDefaultPolicy4DBFE2C1","roles":[{"Ref":"ComposeStoryFnServiceRoleFE40AFBE"}]}}}}}}},"Code":{"id":"Code","path":"BestiesStoriesStack/ComposeStoryFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesStoriesStack/ComposeStoryFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesStoriesStack/ComposeStoryFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/ComposeStoryFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"69ff2ce4ecc33817942aeefb4dc5561a76cc78ff49fbcfb8e8048e4fbd40e252.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["ComposeStoryFnServiceRoleFE40AFBE","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"PublishStoryFn":{"id":"PublishStoryFn","path":"BestiesStoriesStack/PublishStoryFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesStoriesStack/PublishStoryFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesStoriesStack/PublishStoryFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/PublishStoryFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesStoriesStack/PublishStoryFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesStoriesStack/PublishStoryFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"PublishStoryFnServiceRoleDefaultPolicyF363D55A","roles":[{"Ref":"PublishStoryFnServiceRoleB5B265C6"}]}}}}}}},"Code":{"id":"Code","path":"BestiesStoriesStack/PublishStoryFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesStoriesStack/PublishStoryFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesStoriesStack/PublishStoryFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/PublishStoryFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"b72d9b0d601064eb78ca86b0615630051d85104eeca937271f61bef2267bef23.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["PublishStoryFnServiceRoleB5B265C6","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"StoriesBus":{"id":"StoriesBus","path":"BestiesStoriesStack/StoriesBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesStoriesStack/StoriesBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"name":"sa-BestiesStoriesStack-stories"}}}}},"ComposeStory":{"id":"ComposeStory","path":"BestiesStoriesStack/ComposeStory","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"ScheduleStoryPublish":{"id":"ScheduleStoryPublish","path":"BestiesStoriesStack/ScheduleStoryPublish","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.EventBridgePutEvents","version":"2.223.0"}},"ImmediatePublishStory":{"id":"ImmediatePublishStory","path":"BestiesStoriesStack/ImmediatePublishStory","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"HasScheduledAt?":{"id":"HasScheduledAt?","path":"BestiesStoriesStack/HasScheduledAt?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"StoryPublishSM":{"id":"StoryPublishSM","path":"BestiesStoriesStack/StoryPublishSM","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"BestiesStoriesStack/StoryPublishSM/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"BestiesStoriesStack/StoryPublishSM/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/StoryPublishSM/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesStoriesStack/StoryPublishSM/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesStoriesStack/StoryPublishSM/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ComposeStoryFnF8C158BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ComposeStoryFnF8C158BE","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PublishStoryFn8B780F0D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PublishStoryFn8B780F0D","Arn"]},":*"]]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["StoriesBusEF1D1BF7","Arn"]}},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"StoryPublishSMRoleDefaultPolicy91D3877C","roles":[{"Ref":"StoryPublishSMRole044986ED"}]}}}}}}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/StoryPublishSM/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"ComposeStory\",\"States\":{\"ComposeStory\":{\"Next\":\"HasScheduledAt?\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["ComposeStoryFnF8C158BE","Arn"]},"\"},\"HasScheduledAt?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.scheduledAt\",\"IsNull\":false,\"Next\":\"ScheduleStoryPublish\"}],\"Default\":\"ImmediatePublishStory\"},\"ImmediatePublishStory\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["PublishStoryFn8B780F0D","Arn"]},"\"},\"ScheduleStoryPublish\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::events:putEvents\",\"Parameters\":{\"Entries\":[{\"Detail\":{\"storyId.$\":\"$.storyId\",\"scheduledAt.$\":\"$.scheduledAt\"},\"DetailType\":\"BestieStoryScheduled\",\"EventBusName\":\"",{"Fn::GetAtt":["StoriesBusEF1D1BF7","Arn"]},"\",\"Source\":\"stylingadventures.besties\"}]}}}}"]]},"roleArn":{"Fn::GetAtt":["StoryPublishSMRole044986ED","Arn"]},"stateMachineType":"STANDARD","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"StoryPublishRule":{"id":"StoryPublishRule","path":"BestiesStoriesStack/StoryPublishRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesStoriesStack/StoryPublishRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventBusName":{"Ref":"StoriesBusEF1D1BF7"},"eventPattern":{"source":["stylingadventures.besties"],"detail-type":["BestieStoryScheduled"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["PublishStoryFn8B780F0D","Arn"]},"inputPath":"$.detail"}]}}},"AllowEventRuleBestiesStoriesStackPublishStoryFn0121DBB3":{"id":"AllowEventRuleBestiesStoriesStackPublishStoryFn0121DBB3","path":"BestiesStoriesStack/StoryPublishRule/AllowEventRuleBestiesStoriesStackPublishStoryFn0121DBB3","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PublishStoryFn8B780F0D","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["StoryPublishRuleDD5AC73C","Arn"]}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"BestiesStoriesStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"BestiesStoriesStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"BestiesStoriesStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"StoryPublishSMAF8A4148\"}":{"id":"Output{\"Ref\":\"StoryPublishSMAF8A4148\"}","path":"BestiesStoriesStack/Exports/Output{\"Ref\":\"StoryPublishSMAF8A4148\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"BestiesStoriesStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BestiesStoriesStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"BestiesEngagementStack":{"id":"BestiesEngagementStack","path":"BestiesEngagementStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"EngagementFn":{"id":"EngagementFn","path":"BestiesEngagementStack/EngagementFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesEngagementStack/EngagementFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesEngagementStack/EngagementFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesEngagementStack/EngagementFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesEngagementStack/EngagementFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesEngagementStack/EngagementFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"EngagementFnServiceRoleDefaultPolicyD13F4823","roles":[{"Ref":"EngagementFnServiceRoleC4BCE19C"}]}}}}}}},"Code":{"id":"Code","path":"BestiesEngagementStack/EngagementFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesEngagementStack/EngagementFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesEngagementStack/EngagementFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesEngagementStack/EngagementFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"8164ef8180e4cb100d6e1b5dc329d781b2b28af39c2f7439b778b552f41ea091.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["EngagementFnServiceRoleC4BCE19C","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"BestieEngagementRule":{"id":"BestieEngagementRule","path":"BestiesEngagementStack/BestieEngagementRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesEngagementStack/BestieEngagementRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventPattern":{"source":["stylingadventures.besties"],"detail-type":["BestieEngagement"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["EngagementFnA88B87A9","Arn"]}}]}}},"AllowEventRuleBestiesEngagementStackEngagementFn97E6C0E2":{"id":"AllowEventRuleBestiesEngagementStackEngagementFn97E6C0E2","path":"BestiesEngagementStack/BestieEngagementRule/AllowEventRuleBestiesEngagementStackEngagementFn97E6C0E2","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["EngagementFnA88B87A9","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["BestieEngagementRuleA6A1424B","Arn"]}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"BestiesEngagementStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"BestiesEngagementStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"BestiesEngagementStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BestiesEngagementStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"LivestreamStack":{"id":"LivestreamStack","path":"LivestreamStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"CreatorLiveChannel":{"id":"CreatorLiveChannel","path":"LivestreamStack/CreatorLiveChannel","constructInfo":{"fqn":"aws-cdk-lib.aws_ivs.CfnChannel","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IVS::Channel","aws:cdk:cloudformation:props":{"authorized":false,"latencyMode":"LOW","name":"sa-dev-creator-live","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"type":"STANDARD"}}},"CreatorLivestreamFn":{"id":"CreatorLivestreamFn","path":"LivestreamStack/CreatorLivestreamFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"LivestreamStack/CreatorLivestreamFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"LivestreamStack/CreatorLivestreamFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"LivestreamStack/CreatorLivestreamFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"LivestreamStack/CreatorLivestreamFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LivestreamStack/CreatorLivestreamFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreatorLivestreamFnServiceRoleDefaultPolicy3A4C2570","roles":[{"Ref":"CreatorLivestreamFnServiceRoleE583EAA4"}]}}}}}}},"Code":{"id":"Code","path":"LivestreamStack/CreatorLivestreamFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"LivestreamStack/CreatorLivestreamFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"LivestreamStack/CreatorLivestreamFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"LivestreamStack/CreatorLivestreamFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"dd8b939a03297bf47fade54f74b81953bea4f9848b6d5c74e382ba746b79a0da.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"LIVESTREAM_CHANNEL_ARN":{"Fn::GetAtt":["CreatorLiveChannel","Arn"]},"LIVESTREAM_PLAYBACK_URL":{"Fn::GetAtt":["CreatorLiveChannel","PlaybackUrl"]},"LIVESTREAM_ALLOWED_GROUPS":"creator,admin"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["CreatorLivestreamFnServiceRoleE583EAA4","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"CreatorLiveChannelArn":{"id":"CreatorLiveChannelArn","path":"LivestreamStack/CreatorLiveChannelArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CreatorLivePlaybackUrl":{"id":"CreatorLivePlaybackUrl","path":"LivestreamStack/CreatorLivePlaybackUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"LivestreamStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"LivestreamStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"LivestreamStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"CreatorLivestreamFnC329A0C0\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"CreatorLivestreamFnC329A0C0\",\"Arn\"]}","path":"LivestreamStack/Exports/Output{\"Fn::GetAtt\":[\"CreatorLivestreamFnC329A0C0\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"LivestreamStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"LivestreamStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"CreatorToolsStack":{"id":"CreatorToolsStack","path":"CreatorToolsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"StartStoryPublishSm":{"id":"StartStoryPublishSm","path":"CreatorToolsStack/StartStoryPublishSm","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.StepFunctionsStartExecution","version":"2.223.0"}},"ValidateInput":{"id":"ValidateInput","path":"CreatorToolsStack/ValidateInput","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"WaitUntilScheduled":{"id":"WaitUntilScheduled","path":"CreatorToolsStack/WaitUntilScheduled","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Wait","version":"2.223.0"}},"CreatorStoryScheduler":{"id":"CreatorStoryScheduler","path":"CreatorToolsStack/CreatorStoryScheduler","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"CreatorToolsStack/CreatorStoryScheduler/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"CreatorToolsStack/CreatorStoryScheduler/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CreatorToolsStack/CreatorStoryScheduler/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CreatorToolsStack/CreatorStoryScheduler/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CreatorToolsStack/CreatorStoryScheduler/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"BestiesStoriesStack:ExportsOutputRefStoryPublishSMAF8A41480C93DC91"}}],"Version":"2012-10-17"},"policyName":"CreatorStorySchedulerRoleDefaultPolicy57A44A8A","roles":[{"Ref":"CreatorStorySchedulerRole468B8196"}]}}}}}}},"Resource":{"id":"Resource","path":"CreatorToolsStack/CreatorStoryScheduler/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"ValidateInput\",\"States\":{\"ValidateInput\":{\"Type\":\"Pass\",\"Comment\":\"Validate creator schedule input; expand later\",\"Next\":\"WaitUntilScheduled\"},\"WaitUntilScheduled\":{\"Type\":\"Wait\",\"TimestampPath\":\"$.scheduledAt\",\"Next\":\"StartStoryPublishSm\"},\"StartStoryPublishSm\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::states:startExecution\",\"Parameters\":{\"Input\":{\"storyId.$\":\"$.storyId\",\"ownerSub.$\":\"$.ownerSub\",\"scheduledAt.$\":\"$.scheduledAt\"},\"StateMachineArn\":\"",{"Fn::ImportValue":"BestiesStoriesStack:ExportsOutputRefStoryPublishSMAF8A41480C93DC91"},"\"}}}}"]]},"roleArn":{"Fn::GetAtt":["CreatorStorySchedulerRole468B8196","Arn"]},"stateMachineName":"SA-CreatorStoryScheduler-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"CreatorAiFn":{"id":"CreatorAiFn","path":"CreatorToolsStack/CreatorAiFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CreatorToolsStack/CreatorAiFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CreatorToolsStack/CreatorAiFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CreatorToolsStack/CreatorAiFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CreatorToolsStack/CreatorAiFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CreatorToolsStack/CreatorAiFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"CreatorStoryScheduler9A597BB5"}}],"Version":"2012-10-17"},"policyName":"CreatorAiFnServiceRoleDefaultPolicy620F4FAA","roles":[{"Ref":"CreatorAiFnServiceRole7F662149"}]}}}}}}},"Code":{"id":"Code","path":"CreatorToolsStack/CreatorAiFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CreatorToolsStack/CreatorAiFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CreatorToolsStack/CreatorAiFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CreatorToolsStack/CreatorAiFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"00ac22f86a6fca7709cd2d2085d50a9bcc3b782d676f465cc0707443ec7580ee.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"STORY_SCHEDULER_ARN":{"Ref":"CreatorStoryScheduler9A597BB5"},"CREATOR_TOOLS_ALLOWED_GROUPS":"creator,admin"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["CreatorAiFnServiceRole7F662149","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"CreatorStorySchedulerArn":{"id":"CreatorStorySchedulerArn","path":"CreatorToolsStack/CreatorStorySchedulerArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"CreatorToolsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"CreatorToolsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"CreatorToolsStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"CreatorAiFnF1C41CA2\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"CreatorAiFnF1C41CA2\",\"Arn\"]}","path":"CreatorToolsStack/Exports/Output{\"Fn::GetAtt\":[\"CreatorAiFnF1C41CA2\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CreatorToolsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CreatorToolsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"CommerceStack":{"id":"CommerceStack","path":"CommerceStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"OrdersTable":{"id":"OrdersTable","path":"CommerceStack/OrdersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CommerceStack/OrdersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"},{"attributeName":"gsi1pk","attributeType":"S"},{"attributeName":"gsi1sk","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi1","keySchema":[{"attributeName":"gsi1pk","keyType":"HASH"},{"attributeName":"gsi1sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"tableName":"sa-dev-orders","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"CommerceStack/OrdersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"CommerceFn":{"id":"CommerceFn","path":"CommerceStack/CommerceFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CommerceStack/CommerceFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CommerceStack/CommerceFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CommerceStack/CommerceFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CommerceStack/CommerceFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CommerceStack/CommerceFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["OrdersTable315BB997","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["OrdersTable315BB997","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CommerceFnServiceRoleDefaultPolicyEDFF6026","roles":[{"Ref":"CommerceFnServiceRole9DC9F8A1"}]}}}}}}},"Code":{"id":"Code","path":"CommerceStack/CommerceFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CommerceStack/CommerceFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CommerceStack/CommerceFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CommerceStack/CommerceFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"98474d296eb7d87c802cf5405b7b926f9b4bf2a6479eb85c8bb822e4870228a1.zip"},"environment":{"variables":{"APP_TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"ORDERS_TABLE_NAME":{"Ref":"OrdersTable315BB997"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"STRIPE_SECRET_KEY":"","STRIPE_WEBHOOK_SECRET":""}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["CommerceFnServiceRole9DC9F8A1","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"OrdersTableName":{"id":"OrdersTableName","path":"CommerceStack/OrdersTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"CommerceStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"CommerceStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"CommerceStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"CommerceFn39448B29\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"CommerceFn39448B29\",\"Arn\"]}","path":"CommerceStack/Exports/Output{\"Fn::GetAtt\":[\"CommerceFn39448B29\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CommerceStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CommerceStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"AnalyticsStack":{"id":"AnalyticsStack","path":"AnalyticsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"AnalyticsBucket":{"id":"AnalyticsBucket","path":"AnalyticsStack/AnalyticsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":{"Fn::Join":["",["stylingadventures-analytics-dev-",{"Ref":"AWS::AccountId"}]]},"tags":[{"key":"App","value":"stylingadventures"},{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Env","value":"dev"}]}}},"Policy":{"id":"Policy","path":"AnalyticsStack/AnalyticsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"AnalyticsBucket39EAAEEA"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"AnalyticsStack/AnalyticsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"AnalyticsStack/AnalyticsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"AnalyticsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.223.0"},"children":{"Staging":{"id":"Staging","path":"AnalyticsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"Role":{"id":"Role","path":"AnalyticsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}},"Handler":{"id":"Handler","path":"AnalyticsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"AnalyticsIngestFn":{"id":"AnalyticsIngestFn","path":"AnalyticsStack/AnalyticsIngestFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AnalyticsStack/AnalyticsIngestFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AnalyticsStack/AnalyticsIngestFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsIngestFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AnalyticsStack/AnalyticsIngestFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsIngestFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},"/*"]]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["AnalyticsBus90C738ED","Arn"]}}],"Version":"2012-10-17"},"policyName":"AnalyticsIngestFnServiceRoleDefaultPolicy80304195","roles":[{"Ref":"AnalyticsIngestFnServiceRoleB24594EF"}]}}}}}}},"Code":{"id":"Code","path":"AnalyticsStack/AnalyticsIngestFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AnalyticsStack/AnalyticsIngestFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AnalyticsStack/AnalyticsIngestFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsIngestFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"591325769762c9c20260e54ea33afb9ced0901b84d4ea5990945dddabf1088de.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"BUCKET_NAME":{"Ref":"AnalyticsBucket39EAAEEA"},"NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AnalyticsIngestFnServiceRoleB24594EF","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AnalyticsBus":{"id":"AnalyticsBus","path":"AnalyticsStack/AnalyticsBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"name":"sa-dev-analytics"}}}}},"AnalyticsEventsRule":{"id":"AnalyticsEventsRule","path":"AnalyticsStack/AnalyticsEventsRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsEventsRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventBusName":{"Ref":"AnalyticsBus90C738ED"},"eventPattern":{"source":["stylingadventures.gameplay","stylingadventures.economy","stylingadventures.livestream","stylingadventures.besties","stylingadventures.collabs"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["AnalyticsIngestFn44257924","Arn"]}}]}}},"AllowEventRuleAnalyticsStackAnalyticsIngestFnBB9B4CDF":{"id":"AllowEventRuleAnalyticsStackAnalyticsIngestFnBB9B4CDF","path":"AnalyticsStack/AnalyticsEventsRule/AllowEventRuleAnalyticsStackAnalyticsIngestFnBB9B4CDF","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AnalyticsIngestFn44257924","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["AnalyticsEventsRuleD1AF45E3","Arn"]}}}}}},"AdminAnalyticsFn":{"id":"AdminAnalyticsFn","path":"AnalyticsStack/AdminAnalyticsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AnalyticsStack/AdminAnalyticsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AnalyticsStack/AdminAnalyticsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AnalyticsStack/AdminAnalyticsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AnalyticsStack/AdminAnalyticsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AdminAnalyticsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AdminAnalyticsFnServiceRoleDefaultPolicy92A756BE","roles":[{"Ref":"AdminAnalyticsFnServiceRole589BF811"}]}}}}}}},"Code":{"id":"Code","path":"AnalyticsStack/AdminAnalyticsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AnalyticsStack/AdminAnalyticsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AnalyticsStack/AdminAnalyticsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AnalyticsStack/AdminAnalyticsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"831903bf074ed756aa97e8b112aef4144d0bad1f83026b6d1d901cc13ee16692.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"BUCKET_NAME":{"Ref":"AnalyticsBucket39EAAEEA"},"NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminAnalyticsFnServiceRole589BF811","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AnalyticsBucketName":{"id":"AnalyticsBucketName","path":"AnalyticsStack/AnalyticsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"AnalyticsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"AnalyticsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"AnalyticsStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"AnalyticsBucket39EAAEEA\"}":{"id":"Output{\"Ref\":\"AnalyticsBucket39EAAEEA\"}","path":"AnalyticsStack/Exports/Output{\"Ref\":\"AnalyticsBucket39EAAEEA\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Fn::GetAtt\":[\"AnalyticsBucket39EAAEEA\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"AnalyticsBucket39EAAEEA\",\"Arn\"]}","path":"AnalyticsStack/Exports/Output{\"Fn::GetAtt\":[\"AnalyticsBucket39EAAEEA\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"AnalyticsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"AnalyticsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"LayoutEngineStack":{"id":"LayoutEngineStack","path":"LayoutEngineStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"LayoutTemplatesBucket":{"id":"LayoutTemplatesBucket","path":"LayoutEngineStack/LayoutTemplatesBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LayoutEngineStack/LayoutTemplatesBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"sa-dev-layout-templates-637423256673","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Env","value":"dev"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"LayoutEngineStack/LayoutTemplatesBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LayoutEngineStack/LayoutTemplatesBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"LayoutTemplatesBucket49D24765"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["LayoutTemplatesBucket49D24765","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["LayoutTemplatesBucket49D24765","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"LayoutEngineStack/LayoutTemplatesBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"LayoutEngineStack/LayoutTemplatesBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"LayoutEngineStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.223.0"},"children":{"Staging":{"id":"Staging","path":"LayoutEngineStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"Role":{"id":"Role","path":"LayoutEngineStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}},"Handler":{"id":"Handler","path":"LayoutEngineStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"LayoutValidatorFn":{"id":"LayoutValidatorFn","path":"LayoutEngineStack/LayoutValidatorFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"LayoutEngineStack/LayoutValidatorFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"LayoutEngineStack/LayoutValidatorFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"LayoutEngineStack/LayoutValidatorFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"LayoutEngineStack/LayoutValidatorFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LayoutEngineStack/LayoutValidatorFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["LayoutTemplatesBucket49D24765","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["LayoutTemplatesBucket49D24765","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"LayoutValidatorFnServiceRoleDefaultPolicy37DC2575","roles":[{"Ref":"LayoutValidatorFnServiceRole0B4ED411"}]}}}}}}},"Code":{"id":"Code","path":"LayoutEngineStack/LayoutValidatorFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"LayoutEngineStack/LayoutValidatorFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"LayoutEngineStack/LayoutValidatorFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"LayoutEngineStack/LayoutValidatorFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"d5dbb7678f5274bfe50614f8ec325581c8430e7dcf461cde45f9196b1289e778.zip"},"environment":{"variables":{"LAYOUT_TEMPLATES_BUCKET":{"Ref":"LayoutTemplatesBucket49D24765"},"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["LayoutValidatorFnServiceRole0B4ED411","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"LayoutTemplatesBucketName":{"id":"LayoutTemplatesBucketName","path":"LayoutEngineStack/LayoutTemplatesBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"LayoutValidatorFnArn":{"id":"LayoutValidatorFnArn","path":"LayoutEngineStack/LayoutValidatorFnArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"LayoutEngineStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"LayoutEngineStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"LayoutEngineStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"LayoutValidatorFn6B19766D\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"LayoutValidatorFn6B19766D\",\"Arn\"]}","path":"LayoutEngineStack/Exports/Output{\"Fn::GetAtt\":[\"LayoutValidatorFn6B19766D\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"LayoutEngineStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"LayoutEngineStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"PrimeStudiosStack":{"id":"PrimeStudiosStack","path":"PrimeStudiosStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"EpisodeComponentsFn":{"id":"EpisodeComponentsFn","path":"PrimeStudiosStack/EpisodeComponentsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/EpisodeComponentsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/EpisodeComponentsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeComponentsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/EpisodeComponentsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeComponentsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"EpisodeComponentsFnServiceRoleDefaultPolicy0CC39D82","roles":[{"Ref":"EpisodeComponentsFnServiceRole38E5C563"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/EpisodeComponentsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/EpisodeComponentsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/EpisodeComponentsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeComponentsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"bd4439fe74776cf5d4880361ada1ab8baed03d44f001a11b02adafdd0913dfd7.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["EpisodeComponentsFnServiceRole38E5C563","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"EpisodeAssemblerFn":{"id":"EpisodeAssemblerFn","path":"PrimeStudiosStack/EpisodeAssemblerFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/EpisodeAssemblerFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/EpisodeAssemblerFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeAssemblerFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/EpisodeAssemblerFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeAssemblerFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"EpisodeAssemblerFnServiceRoleDefaultPolicy1A0DBD15","roles":[{"Ref":"EpisodeAssemblerFnServiceRoleA4450BAD"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/EpisodeAssemblerFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/EpisodeAssemblerFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/EpisodeAssemblerFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeAssemblerFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"98867a0fee8f663e0632ec7773363bb74c77f74a2747b0d97839badf27a51732.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["EpisodeAssemblerFnServiceRoleA4450BAD","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"ScriptReviewFn":{"id":"ScriptReviewFn","path":"PrimeStudiosStack/ScriptReviewFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/ScriptReviewFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/ScriptReviewFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/ScriptReviewFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/ScriptReviewFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/ScriptReviewFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ScriptReviewFnServiceRoleDefaultPolicy2CE1C332","roles":[{"Ref":"ScriptReviewFnServiceRoleC89ADEC5"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/ScriptReviewFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/ScriptReviewFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/ScriptReviewFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/ScriptReviewFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"79aca047b8d7812cc5cae2a2292f0de8810d57bd4ed01cad0492eaeb9292bf67.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ScriptReviewFnServiceRoleC89ADEC5","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":20}}}}},"CoinsLedgerFn":{"id":"CoinsLedgerFn","path":"PrimeStudiosStack/CoinsLedgerFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/CoinsLedgerFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/CoinsLedgerFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/CoinsLedgerFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/CoinsLedgerFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/CoinsLedgerFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CoinsLedgerFnServiceRoleDefaultPolicy344DB649","roles":[{"Ref":"CoinsLedgerFnServiceRole1167D54A"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/CoinsLedgerFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/CoinsLedgerFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/CoinsLedgerFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/CoinsLedgerFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"151cb289d6ad59f4b737d41d50123a02965ff83919353a2c4b181eaaa6193f18.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["CoinsLedgerFnServiceRole1167D54A","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"CareerArchiveFn":{"id":"CareerArchiveFn","path":"PrimeStudiosStack/CareerArchiveFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/CareerArchiveFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/CareerArchiveFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/CareerArchiveFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/CareerArchiveFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/CareerArchiveFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CareerArchiveFnServiceRoleDefaultPolicy52520EB4","roles":[{"Ref":"CareerArchiveFnServiceRole2A0AA547"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/CareerArchiveFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/CareerArchiveFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/CareerArchiveFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/CareerArchiveFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"5f6db37f384f0acf4a06be25df7aaf8760f524015704e3ed8df310cd4bf54aba.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["CareerArchiveFnServiceRole2A0AA547","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":20}}}}},"PollManagerFn":{"id":"PollManagerFn","path":"PrimeStudiosStack/PollManagerFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/PollManagerFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/PollManagerFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/PollManagerFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/PollManagerFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/PollManagerFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"PollManagerFnServiceRoleDefaultPolicyAF346358","roles":[{"Ref":"PollManagerFnServiceRole95D5FFB6"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/PollManagerFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/PollManagerFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/PollManagerFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/PollManagerFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"f73301f398fa28e900a663f07912cadb2590dbc46eba3237e645e3571e7c58b4.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["PollManagerFnServiceRole95D5FFB6","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"MockSocialFeedFn":{"id":"MockSocialFeedFn","path":"PrimeStudiosStack/MockSocialFeedFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/MockSocialFeedFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/MockSocialFeedFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/MockSocialFeedFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/MockSocialFeedFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/MockSocialFeedFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"MockSocialFeedFnServiceRoleDefaultPolicyC0B19AB8","roles":[{"Ref":"MockSocialFeedFnServiceRole2F396A3D"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/MockSocialFeedFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/MockSocialFeedFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/MockSocialFeedFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/MockSocialFeedFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"41877a33cb3b78c6ca6ad84b2c8ea209275cccdb90801732231a55956b21844d.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["MockSocialFeedFnServiceRole2F396A3D","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"GenerateEpisodeComponents":{"id":"GenerateEpisodeComponents","path":"PrimeStudiosStack/GenerateEpisodeComponents","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"AssembleEpisode":{"id":"AssembleEpisode","path":"PrimeStudiosStack/AssembleEpisode","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"LayoutCheck":{"id":"LayoutCheck","path":"PrimeStudiosStack/LayoutCheck","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"EpisodeProductionStateMachine":{"id":"EpisodeProductionStateMachine","path":"PrimeStudiosStack/EpisodeProductionStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["EpisodeComponentsFn056D8E2C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpisodeComponentsFn056D8E2C","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["EpisodeAssemblerFn6D82F1DD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpisodeAssemblerFn6D82F1DD","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},{"Fn::Join":["",[{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},":*"]]}]},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"EpisodeProductionStateMachineRoleDefaultPolicyFB4AF342","roles":[{"Ref":"EpisodeProductionStateMachineRole766FA6BC"}]}}}}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"GenerateEpisodeComponents\",\"States\":{\"GenerateEpisodeComponents\":{\"Next\":\"AssembleEpisode\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["EpisodeComponentsFn056D8E2C","Arn"]},"\"},\"AssembleEpisode\":{\"Next\":\"LayoutCheck\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["EpisodeAssemblerFn6D82F1DD","Arn"]},"\"},\"LayoutCheck\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},"\"}}}"]]},"roleArn":{"Fn::GetAtt":["EpisodeProductionStateMachineRole766FA6BC","Arn"]},"stateMachineName":"SA2-PrimeStudios-Production-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"EpisodeProductionSmArn":{"id":"EpisodeProductionSmArn","path":"PrimeStudiosStack/EpisodeProductionSmArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"PrimeStudiosStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"PrimeStudiosStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PrimeStudiosStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PrimeStudiosStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"PublishingStack":{"id":"PublishingStack","path":"PublishingStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"ValidateEpisodeFn":{"id":"ValidateEpisodeFn","path":"PublishingStack/ValidateEpisodeFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PublishingStack/ValidateEpisodeFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PublishingStack/ValidateEpisodeFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PublishingStack/ValidateEpisodeFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PublishingStack/ValidateEpisodeFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PublishingStack/ValidateEpisodeFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ValidateEpisodeFnServiceRoleDefaultPolicyAF5E26F3","roles":[{"Ref":"ValidateEpisodeFnServiceRole84737477"}]}}}}}}},"Code":{"id":"Code","path":"PublishingStack/ValidateEpisodeFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PublishingStack/ValidateEpisodeFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PublishingStack/ValidateEpisodeFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PublishingStack/ValidateEpisodeFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"96c28755c24b39d5930df9e37cd644c218b49751a242c45f7216a94cd8d61de9.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ValidateEpisodeFnServiceRole84737477","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"PublishEpisodeFn":{"id":"PublishEpisodeFn","path":"PublishingStack/PublishEpisodeFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PublishingStack/PublishEpisodeFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PublishingStack/PublishEpisodeFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PublishingStack/PublishEpisodeFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PublishingStack/PublishEpisodeFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PublishingStack/PublishEpisodeFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"PublishEpisodeFnServiceRoleDefaultPolicyF0E6D0AA","roles":[{"Ref":"PublishEpisodeFnServiceRole58B94D4B"}]}}}}}}},"Code":{"id":"Code","path":"PublishingStack/PublishEpisodeFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PublishingStack/PublishEpisodeFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PublishingStack/PublishEpisodeFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PublishingStack/PublishEpisodeFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"5a17ce46c02826bde2b21b3f3ec783014f7213f1f761e7cc7018158aac95d076.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["PublishEpisodeFnServiceRole58B94D4B","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"FailEpisodeFn":{"id":"FailEpisodeFn","path":"PublishingStack/FailEpisodeFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PublishingStack/FailEpisodeFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PublishingStack/FailEpisodeFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PublishingStack/FailEpisodeFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PublishingStack/FailEpisodeFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PublishingStack/FailEpisodeFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"FailEpisodeFnServiceRoleDefaultPolicy3F676F6E","roles":[{"Ref":"FailEpisodeFnServiceRoleF843741D"}]}}}}}}},"Code":{"id":"Code","path":"PublishingStack/FailEpisodeFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PublishingStack/FailEpisodeFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PublishingStack/FailEpisodeFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PublishingStack/FailEpisodeFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"99777fc4557b1b7e0bff17298cc23841bea7754261499413850e1cbfaf396394.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["FailEpisodeFnServiceRoleF843741D","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":5}}}}},"ValidateEpisode":{"id":"ValidateEpisode","path":"PublishingStack/ValidateEpisode","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"LayoutChecklist":{"id":"LayoutChecklist","path":"PublishingStack/LayoutChecklist","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"PublishEpisode":{"id":"PublishEpisode","path":"PublishingStack/PublishEpisode","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"MarkEpisodeFailed":{"id":"MarkEpisodeFailed","path":"PublishingStack/MarkEpisodeFailed","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"LayoutOk?":{"id":"LayoutOk?","path":"PublishingStack/LayoutOk?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"EpisodePublishingStateMachine":{"id":"EpisodePublishingStateMachine","path":"PublishingStack/EpisodePublishingStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"PublishingStack/EpisodePublishingStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"PublishingStack/EpisodePublishingStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PublishingStack/EpisodePublishingStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PublishingStack/EpisodePublishingStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PublishingStack/EpisodePublishingStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ValidateEpisodeFnE8E9DE49","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ValidateEpisodeFnE8E9DE49","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["FailEpisodeFnEAD37F30","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FailEpisodeFnEAD37F30","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},{"Fn::Join":["",[{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PublishEpisodeFn42749809","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PublishEpisodeFn42749809","Arn"]},":*"]]}]},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"EpisodePublishingStateMachineRoleDefaultPolicy0227225F","roles":[{"Ref":"EpisodePublishingStateMachineRole2C63FFF7"}]}}}}}}},"Resource":{"id":"Resource","path":"PublishingStack/EpisodePublishingStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"ValidateEpisode\",\"States\":{\"ValidateEpisode\":{\"Next\":\"LayoutOk?\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["ValidateEpisodeFnE8E9DE49","Arn"]},"\"},\"LayoutOk?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.layoutValid\",\"BooleanEquals\":true,\"Next\":\"LayoutChecklist\"}],\"Default\":\"MarkEpisodeFailed\"},\"MarkEpisodeFailed\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["FailEpisodeFnEAD37F30","Arn"]},"\"},\"LayoutChecklist\":{\"Next\":\"PublishEpisode\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},"\"},\"PublishEpisode\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["PublishEpisodeFn42749809","Arn"]},"\"}}}"]]},"roleArn":{"Fn::GetAtt":["EpisodePublishingStateMachineRole2C63FFF7","Arn"]},"stateMachineName":"SA2-PrimeStudios-Publish-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"EpisodePublishingSmArn":{"id":"EpisodePublishingSmArn","path":"PublishingStack/EpisodePublishingSmArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"PublishingStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"PublishingStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PublishingStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PublishingStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"CollaboratorStack":{"id":"CollaboratorStack","path":"CollaboratorStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"CollaboratorBus":{"id":"CollaboratorBus","path":"CollaboratorStack/CollaboratorBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"name":"sa-CollaboratorStack-collab"}}}}},"CollaboratorDeadlineTopic":{"id":"CollaboratorDeadlineTopic","path":"CollaboratorStack/CollaboratorDeadlineTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"StylingAdventures Collaborator Deadlines","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"topicName":"sa-dev-collab-deadlines"}}},"Policy":{"id":"Policy","path":"CollaboratorStack/CollaboratorDeadlineTopic/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.TopicPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineTopic/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopicPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::TopicPolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"Sid":"0"}],"Version":"2012-10-17"},"topics":[{"Ref":"CollaboratorDeadlineTopic2DF72641"}]}}}}}}},"CreateCollaboratorInviteFn":{"id":"CreateCollaboratorInviteFn","path":"CollaboratorStack/CreateCollaboratorInviteFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/CreateCollaboratorInviteFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/CreateCollaboratorInviteFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/CreateCollaboratorInviteFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/CreateCollaboratorInviteFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CreateCollaboratorInviteFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreateCollaboratorInviteFnServiceRoleDefaultPolicy737904CA","roles":[{"Ref":"CreateCollaboratorInviteFnServiceRole2F228E1F"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/CreateCollaboratorInviteFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/CreateCollaboratorInviteFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/CreateCollaboratorInviteFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/CreateCollaboratorInviteFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"af32c62ef9e77fbea0f303bccec93cdcb6d54a7de81179147621b2b5605ad315.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","CREATE_INVITE_ALLOWED_GROUPS":"creator,admin","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["CreateCollaboratorInviteFnServiceRole2F228E1F","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AcceptCollaboratorInviteFn":{"id":"AcceptCollaboratorInviteFn","path":"CollaboratorStack/AcceptCollaboratorInviteFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/AcceptCollaboratorInviteFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/AcceptCollaboratorInviteFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorInviteFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/AcceptCollaboratorInviteFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorInviteFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AcceptCollaboratorInviteFnServiceRoleDefaultPolicyE2A2F1AE","roles":[{"Ref":"AcceptCollaboratorInviteFnServiceRole28BAC2DD"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/AcceptCollaboratorInviteFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/AcceptCollaboratorInviteFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/AcceptCollaboratorInviteFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorInviteFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"12b3a25e80df830f08f7054d363971c15e45dad341efaaf64152af66cd6e65dc.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AcceptCollaboratorInviteFnServiceRole28BAC2DD","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AcceptCollaboratorTermsFn":{"id":"AcceptCollaboratorTermsFn","path":"CollaboratorStack/AcceptCollaboratorTermsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/AcceptCollaboratorTermsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/AcceptCollaboratorTermsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorTermsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/AcceptCollaboratorTermsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorTermsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AcceptCollaboratorTermsFnServiceRoleDefaultPolicyB181B8F7","roles":[{"Ref":"AcceptCollaboratorTermsFnServiceRoleD987CC24"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/AcceptCollaboratorTermsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/AcceptCollaboratorTermsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/AcceptCollaboratorTermsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorTermsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"a0e40e1277b0b4cb7d05301ba06ea86a4bac519f2dcffe89d5c318cd09c5e73c.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AcceptCollaboratorTermsFnServiceRoleD987CC24","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"CollaboratorUploadFn":{"id":"CollaboratorUploadFn","path":"CollaboratorStack/CollaboratorUploadFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/CollaboratorUploadFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/CollaboratorUploadFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorUploadFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/CollaboratorUploadFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorUploadFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CollaboratorUploadFnServiceRoleDefaultPolicy86261802","roles":[{"Ref":"CollaboratorUploadFnServiceRoleB23376CF"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/CollaboratorUploadFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/CollaboratorUploadFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/CollaboratorUploadFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorUploadFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"042a01f0f4aef1fe5d219c73980561598bf070e4b9c953ca84ad4bce4f665da0.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["CollaboratorUploadFnServiceRoleB23376CF","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"CollaboratorAdminReviewFn":{"id":"CollaboratorAdminReviewFn","path":"CollaboratorStack/CollaboratorAdminReviewFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/CollaboratorAdminReviewFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/CollaboratorAdminReviewFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorAdminReviewFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/CollaboratorAdminReviewFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorAdminReviewFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["CollaboratorBus521A8115","Arn"]}}],"Version":"2012-10-17"},"policyName":"CollaboratorAdminReviewFnServiceRoleDefaultPolicyFC66485D","roles":[{"Ref":"CollaboratorAdminReviewFnServiceRole6E03FB8F"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/CollaboratorAdminReviewFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/CollaboratorAdminReviewFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/CollaboratorAdminReviewFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorAdminReviewFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"51ce2c52634ae5d1cf613ca840e663fe60cb6900bcdb00436e2ad15eeea2747d.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","COLLAB_REVIEW_ALLOWED_GROUPS":"creator,admin","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["CollaboratorAdminReviewFnServiceRole6E03FB8F","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"CollaboratorDeadlineReminderFn":{"id":"CollaboratorDeadlineReminderFn","path":"CollaboratorStack/CollaboratorDeadlineReminderFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"CollaboratorDeadlineTopic2DF72641"}}],"Version":"2012-10-17"},"policyName":"CollaboratorDeadlineReminderFnServiceRoleDefaultPolicyEB34AC60","roles":[{"Ref":"CollaboratorDeadlineReminderFnServiceRole927F8F16"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"b78143224a4872b521396c62a0a9f1d03219778a1d0238e3d2416e8f82273f9e.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["CollaboratorDeadlineReminderFnServiceRole927F8F16","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"CollaboratorDeadlineScheduleRule":{"id":"CollaboratorDeadlineScheduleRule","path":"CollaboratorStack/CollaboratorDeadlineScheduleRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineScheduleRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"scheduleExpression":"rate(15 minutes)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["CollaboratorDeadlineReminderFn08EEF9C6","Arn"]}}]}}},"AllowEventRuleCollaboratorStackCollaboratorDeadlineReminderFnF8B19ED7":{"id":"AllowEventRuleCollaboratorStackCollaboratorDeadlineReminderFnF8B19ED7","path":"CollaboratorStack/CollaboratorDeadlineScheduleRule/AllowEventRuleCollaboratorStackCollaboratorDeadlineReminderFnF8B19ED7","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CollaboratorDeadlineReminderFn08EEF9C6","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["CollaboratorDeadlineScheduleRuleEB7CE806","Arn"]}}}}}},"CollaboratorBusName":{"id":"CollaboratorBusName","path":"CollaboratorStack/CollaboratorBusName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CollaboratorDeadlineTopicArn":{"id":"CollaboratorDeadlineTopicArn","path":"CollaboratorStack/CollaboratorDeadlineTopicArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"CollaboratorStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"CollaboratorStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"CollaboratorStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"CollaboratorBus521A8115\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"CollaboratorBus521A8115\",\"Arn\"]}","path":"CollaboratorStack/Exports/Output{\"Fn::GetAtt\":[\"CollaboratorBus521A8115\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"CollaboratorBus521A8115\"}":{"id":"Output{\"Ref\":\"CollaboratorBus521A8115\"}","path":"CollaboratorStack/Exports/Output{\"Ref\":\"CollaboratorBus521A8115\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CollaboratorStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CollaboratorStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"PromoKitStack":{"id":"PromoKitStack","path":"PromoKitStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"PromoKitGeneratorFn":{"id":"PromoKitGeneratorFn","path":"PromoKitStack/PromoKitGeneratorFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PromoKitStack/PromoKitGeneratorFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PromoKitStack/PromoKitGeneratorFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PromoKitStack/PromoKitGeneratorFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PromoKitStack/PromoKitGeneratorFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PromoKitStack/PromoKitGeneratorFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"CollaboratorStack:ExportsOutputFnGetAttCollaboratorBus521A8115Arn168BD36A"}}],"Version":"2012-10-17"},"policyName":"PromoKitGeneratorFnServiceRoleDefaultPolicy6AEBFE60","roles":[{"Ref":"PromoKitGeneratorFnServiceRole21D00353"}]}}}}}}},"Code":{"id":"Code","path":"PromoKitStack/PromoKitGeneratorFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PromoKitStack/PromoKitGeneratorFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PromoKitStack/PromoKitGeneratorFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PromoKitStack/PromoKitGeneratorFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"f5b7d3fda131af96e1d81de56c2ee33e6d366374879a77fce45205689b133b22.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","PROMO_KIT_ALLOWED_GROUPS":"creator,admin","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["PromoKitGeneratorFnServiceRole21D00353","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"PromoKitOnCollabApprovedRule":{"id":"PromoKitOnCollabApprovedRule","path":"PromoKitStack/PromoKitOnCollabApprovedRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PromoKitStack/PromoKitOnCollabApprovedRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventBusName":{"Fn::ImportValue":"CollaboratorStack:ExportsOutputRefCollaboratorBus521A8115667FDE9E"},"eventPattern":{"source":["stylingadventures.collab"],"detail-type":["CollabUploadApproved"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["PromoKitGeneratorFn15AB3B69","Arn"]}}]}}},"AllowEventRulePromoKitStackPromoKitGeneratorFn117AD613":{"id":"AllowEventRulePromoKitStackPromoKitGeneratorFn117AD613","path":"PromoKitStack/PromoKitOnCollabApprovedRule/AllowEventRulePromoKitStackPromoKitGeneratorFn117AD613","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PromoKitGeneratorFn15AB3B69","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["PromoKitOnCollabApprovedRuleF104FA1A","Arn"]}}}}}},"EpisodePreviewFn":{"id":"EpisodePreviewFn","path":"PromoKitStack/EpisodePreviewFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PromoKitStack/EpisodePreviewFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PromoKitStack/EpisodePreviewFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PromoKitStack/EpisodePreviewFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PromoKitStack/EpisodePreviewFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PromoKitStack/EpisodePreviewFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"EpisodePreviewFnServiceRoleDefaultPolicy73339732","roles":[{"Ref":"EpisodePreviewFnServiceRole0F27822C"}]}}}}}}},"Code":{"id":"Code","path":"PromoKitStack/EpisodePreviewFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PromoKitStack/EpisodePreviewFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PromoKitStack/EpisodePreviewFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PromoKitStack/EpisodePreviewFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"6bdf7655f1dcf2a38df7a6c527a78e42317df2504e8d4a0f368686facbb0deee.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","PREVIEW_ALLOWED_GROUPS":"creator,admin","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["EpisodePreviewFnServiceRole0F27822C","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"HallOfSlayFn":{"id":"HallOfSlayFn","path":"PromoKitStack/HallOfSlayFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PromoKitStack/HallOfSlayFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PromoKitStack/HallOfSlayFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PromoKitStack/HallOfSlayFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PromoKitStack/HallOfSlayFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PromoKitStack/HallOfSlayFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"HallOfSlayFnServiceRoleDefaultPolicy18447A4B","roles":[{"Ref":"HallOfSlayFnServiceRoleA08ABBD7"}]}}}}}}},"Code":{"id":"Code","path":"PromoKitStack/HallOfSlayFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PromoKitStack/HallOfSlayFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PromoKitStack/HallOfSlayFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PromoKitStack/HallOfSlayFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"883ce3823390778b829b3af67ba19414bdfe1c8f83dde822833102f4fa60036d.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["HallOfSlayFnServiceRoleA08ABBD7","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"PromoKitFunctionName":{"id":"PromoKitFunctionName","path":"PromoKitStack/PromoKitFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"EpisodePreviewFunctionName":{"id":"EpisodePreviewFunctionName","path":"PromoKitStack/EpisodePreviewFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"HallOfSlayFunctionName":{"id":"HallOfSlayFunctionName","path":"PromoKitStack/HallOfSlayFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"PromoKitStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"PromoKitStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PromoKitStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PromoKitStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"AdminStack":{"id":"AdminStack","path":"AdminStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"AdminModerationFn":{"id":"AdminModerationFn","path":"AdminStack/AdminModerationFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AdminStack/AdminModerationFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AdminStack/AdminModerationFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AdminStack/AdminModerationFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AdminStack/AdminModerationFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminModerationFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AdminModerationFnServiceRoleDefaultPolicy3532FE68","roles":[{"Ref":"AdminModerationFnServiceRole53812CC4"}]}}}}}}},"Code":{"id":"Code","path":"AdminStack/AdminModerationFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AdminStack/AdminModerationFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AdminStack/AdminModerationFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AdminStack/AdminModerationFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"1bcc27d0bbac6a45b828beadbaa16f2958b39de1d88f2ff69405e97197cdf66e.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"ANALYTICS_BUCKET":{"Fn::ImportValue":"AnalyticsStack:ExportsOutputRefAnalyticsBucket39EAAEEA4B56ABBC"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"ADMIN_GROUP_NAME":"ADMIN","WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminModerationFnServiceRole53812CC4","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}}}},"AdminCommunityFn":{"id":"AdminCommunityFn","path":"AdminStack/AdminCommunityFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AdminStack/AdminCommunityFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AdminStack/AdminCommunityFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AdminStack/AdminCommunityFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AdminStack/AdminCommunityFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminCommunityFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["AdminEventsBus6482B417","Arn"]}}],"Version":"2012-10-17"},"policyName":"AdminCommunityFnServiceRoleDefaultPolicyC36F8ADD","roles":[{"Ref":"AdminCommunityFnServiceRole75F0FF62"}]}}}}}}},"Code":{"id":"Code","path":"AdminStack/AdminCommunityFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AdminStack/AdminCommunityFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AdminStack/AdminCommunityFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AdminStack/AdminCommunityFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"ae55446d23282f8060d19f35165c17bd544314683a41fdb8a2f8d8b96e2347ee.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"ANALYTICS_BUCKET":{"Fn::ImportValue":"AnalyticsStack:ExportsOutputRefAnalyticsBucket39EAAEEA4B56ABBC"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"ADMIN_GROUP_NAME":"ADMIN","WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","ADMIN_EVENT_SOURCE":"stylingadventures.admin","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminCommunityFnServiceRole75F0FF62","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}}}},"AdminEventsBus":{"id":"AdminEventsBus","path":"AdminStack/AdminEventsBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminEventsBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"name":"sa-dev-admin"}}}}},"AdminShoutoutsTopic":{"id":"AdminShoutoutsTopic","path":"AdminStack/AdminShoutoutsTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminShoutoutsTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"StylingAdventures Admin Shoutouts","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AdminShoutoutsFn":{"id":"AdminShoutoutsFn","path":"AdminStack/AdminShoutoutsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AdminStack/AdminShoutoutsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AdminStack/AdminShoutoutsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AdminStack/AdminShoutoutsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AdminStack/AdminShoutoutsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminShoutoutsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"AdminShoutoutsTopicCEB148D5"}}],"Version":"2012-10-17"},"policyName":"AdminShoutoutsFnServiceRoleDefaultPolicy1C00FFCC","roles":[{"Ref":"AdminShoutoutsFnServiceRole12429FF8"}]}}}}}}},"Code":{"id":"Code","path":"AdminStack/AdminShoutoutsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AdminStack/AdminShoutoutsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AdminStack/AdminShoutoutsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AdminStack/AdminShoutoutsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"5a594f587f750bfd7b8695100dd21d29239acacd29d9a1742fba1187d1878714.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"ANALYTICS_BUCKET":{"Fn::ImportValue":"AnalyticsStack:ExportsOutputRefAnalyticsBucket39EAAEEA4B56ABBC"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"ADMIN_GROUP_NAME":"ADMIN","WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","SHOUTOUTS_TOPIC_ARN":{"Ref":"AdminShoutoutsTopicCEB148D5"},"AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminShoutoutsFnServiceRole12429FF8","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}}}},"AdminAnalyticsFn":{"id":"AdminAnalyticsFn","path":"AdminStack/AdminAnalyticsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AdminStack/AdminAnalyticsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AdminStack/AdminAnalyticsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AdminStack/AdminAnalyticsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AdminStack/AdminAnalyticsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminAnalyticsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"AnalyticsStack:ExportsOutputFnGetAttAnalyticsBucket39EAAEEAArn99FBDA6B"},{"Fn::Join":["",[{"Fn::ImportValue":"AnalyticsStack:ExportsOutputFnGetAttAnalyticsBucket39EAAEEAArn99FBDA6B"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AdminAnalyticsFnServiceRoleDefaultPolicy92A756BE","roles":[{"Ref":"AdminAnalyticsFnServiceRole589BF811"}]}}}}}}},"Code":{"id":"Code","path":"AdminStack/AdminAnalyticsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AdminStack/AdminAnalyticsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AdminStack/AdminAnalyticsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AdminStack/AdminAnalyticsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"6abc6aba3a17aacf0d26bfd74d7a2491168c90e12753b34070571ce47b884017.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"ANALYTICS_BUCKET":{"Fn::ImportValue":"AnalyticsStack:ExportsOutputRefAnalyticsBucket39EAAEEA4B56ABBC"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"ADMIN_GROUP_NAME":"ADMIN","WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminAnalyticsFnServiceRole589BF811","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"AdminStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"AdminStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"AdminStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"AdminStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"ApiStack":{"id":"ApiStack","path":"ApiStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"StylingApi":{"id":"StylingApi","path":"ApiStack/StylingApi","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.GraphqlApi","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLApi","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLApi","aws:cdk:cloudformation:props":{"authenticationType":"AMAZON_COGNITO_USER_POOLS","name":"stylingadventures-api","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"userPoolConfig":{"userPoolId":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"awsRegion":"us-east-1","defaultAction":"ALLOW"},"xrayEnabled":true}}},"Schema":{"id":"Schema","path":"ApiStack/StylingApi/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLSchema","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLSchema","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"definition":"schema {\r\n  query: Query\r\n  mutation: Mutation\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Root query type\r\n# ─────────────────────────────────────────\r\ntype Query {\r\n  # Simple healthcheck\r\n  hello: String\r\n\r\n  # Current user basic info\r\n  me: Me!\r\n\r\n  # Closet queries (fan / bestie)\r\n  myCloset(limit: Int, nextToken: String): ClosetConnection!\r\n  myWishlist(limit: Int, nextToken: String): ClosetConnection!\r\n  bestieClosetItems(limit: Int, nextToken: String): ClosetConnection!\r\n\r\n  # Comments & likes\r\n  closetItemComments(\r\n    itemId: ID!\r\n    limit: Int\r\n    nextToken: String\r\n  ): CommentConnection!\r\n\r\n  adminClosetItemLikes(\r\n    itemId: ID!\r\n    limit: Int\r\n    nextToken: String\r\n  ): LikeConnection!\r\n\r\n  adminClosetItemComments(\r\n    itemId: ID!\r\n    limit: Int\r\n    nextToken: String\r\n  ): CommentConnection!\r\n\r\n  # Admin / feed views\r\n  adminListPending(limit: Int, nextToken: String): ClosetConnection!\r\n  adminListClosetItems(\r\n    status: ClosetStatus\r\n    limit: Int\r\n    nextToken: String\r\n  ): ClosetConnection!\r\n  closetFeed(\r\n    sort: ClosetFeedSort\r\n    limit: Int\r\n    nextToken: String\r\n  ): ClosetConnection!\r\n    @aws_cognito_user_pools\r\n\r\n  # Episodes / early access\r\n  isEpisodeEarlyAccess(episodeId: ID!): EpisodeAccess!\r\n\r\n  # Fan episode unlocks\r\n  myUnlockedEpisodes: [EpisodeUnlock!]!\r\n\r\n  # Game / leaderboard\r\n  topXP(limit: Int = 50, season: String): [LeaderboardEntry!]!\r\n  topCoins(limit: Int = 50, season: String): [LeaderboardEntry!]!\r\n\r\n  # Polls\r\n  getPoll(pollId: ID!): Poll\r\n\r\n  # Game profile\r\n  getMyProfile: GameProfile!\r\n\r\n  # Bestie status\r\n  meBestieStatus: BestieStatus!\r\n\r\n  # Creator / livestream & monetisation\r\n  getCreatorLivestreamInfo: CreatorLivestreamInfo!\r\n  creatorRevenueSummary: CreatorRevenueSummary!\r\n  creatorAiSuggest(\r\n    text: String!\r\n    kind: CreatorAiKind!\r\n  ): CreatorAiSuggestionResult!\r\n\r\n  # Game economy config / rules (admin)\r\n  getGameEconomyConfig: GameEconomyConfig!\r\n\r\n  # Episodes admin (admin-only)\r\n  adminListEpisodes(\r\n    status: EpisodeStatus\r\n    showId: String\r\n    season: Int\r\n    limit: Int = 20\r\n    nextToken: String\r\n  ): EpisodeAdminConnection!\r\n\r\n  # Admin Settings\r\n  getAdminSettings: AdminSettings!\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Root mutation type\r\n# ─────────────────────────────────────────\r\ntype Mutation {\r\n  # Roles\r\n  setUserRole(userId: ID!, role: String!): RoleResult!\r\n\r\n  # Closet (fan/bestie core)\r\n  createClosetItem(input: CreateClosetItemInput!): ClosetItem!\r\n  requestClosetApproval(itemId: ID!): ClosetItem!\r\n  updateClosetMediaKey(itemId: ID!, mediaKey: String!): ClosetItem!\r\n  updateClosetItemStory(input: UpdateClosetItemStoryInput!): ClosetItem!\r\n\r\n  likeClosetItem(itemId: ID!): ClosetItem!\r\n  commentOnClosetItem(input: CommentOnClosetItemInput!): Comment!\r\n  pinHighlight(itemId: ID!): GameProfile!\r\n  toggleWishlistItem(itemId: ID!): ClosetItem!\r\n\r\n  # Bestie closet aliases (used by BestieCloset UI)\r\n  bestieCreateClosetItem(input: BestieCreateClosetItemInput!): ClosetItem!\r\n  bestieUpdateClosetItem(id: ID!, input: BestieUpdateClosetItemInput!): ClosetItem!\r\n  bestieDeleteClosetItem(id: ID!): Boolean!\r\n\r\n  # Closet admin – argument names match React GQL\r\n  adminCreateClosetItem(input: AdminCreateClosetItemInput!): ClosetItem!\r\n  adminApproveItem(closetItemId: ID!): ClosetItem!\r\n  adminRejectItem(closetItemId: ID!, reason: String): ClosetItem!\r\n  adminPublishClosetItem(closetItemId: ID!): ClosetItem\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\"])\r\n  adminSetClosetAudience(\r\n    closetItemId: ID!\r\n    audience: ClosetAudience!\r\n  ): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\"])\r\n  adminUpdateClosetItem(\r\n    input: AdminUpdateClosetItemInput!\r\n  ): ClosetItem!\r\n\r\n  # Bestie membership / billing\r\n  startBestieCheckout: BestieCheckoutSession!\r\n  claimBestieTrial: BestieStatus!\r\n  adminSetBestie(userId: ID!): BestieStatus!\r\n  adminRevokeBestie(userId: ID!): BestieStatus!\r\n  adminSetBestieByEmail(email: String!): BestieStatus!\r\n  adminRevokeBestieByEmail(email: String!): BestieStatus!\r\n\r\n  # Game engine\r\n  logGameEvent(input: LogGameEventInput!): GameEventResult!\r\n\r\n  # Spend coins to unlock an episode early\r\n  unlockEpisode(episodeId: ID!): UnlockEpisodeResult!\r\n\r\n  # NOTE: aligned with lambda/game/gameplay.ts (expects input: { userId, coins, xp? })\r\n  awardCoins(input: AwardCoinsInput!): GameProfile!\r\n\r\n  # Polls (aligned with lambda/game/polls.ts)\r\n  createPoll(input: CreatePollInput!): Poll!\r\n  votePoll(pollId: ID!, optionIndex: Int!): Poll!\r\n\r\n  # Game profile updates\r\n  grantBadge(userId: ID!, badge: String!): GameProfile!\r\n\r\n  # NOTE: aligned with lambda/game/profile.ts (event.arguments.displayName)\r\n  setDisplayName(displayName: String!): GameProfile!\r\n\r\n  updateProfile(input: UpdateProfileInput!): GameProfile!\r\n\r\n  # Bestie workflow: background changes / stories / feed\r\n  requestClosetBackgroundChange(input: BgChangeRequestInput!): BgChangeRequestResult!\r\n  createStory(input: CreateStoryInput!): Story!\r\n  publishStory(storyId: ID!): Story!\r\n  addClosetItemToCommunityFeed(itemId: ID!): ClosetItem!\r\n  removeClosetItemFromCommunityFeed(itemId: ID!): ClosetItem!\r\n  shareClosetItemToPinterest(itemId: ID!): ShareResult!\r\n\r\n  # Creator livestream + commerce\r\n  pinLivestreamHighlight(highlightId: ID, title: String): PinResult!\r\n  recordAffiliateClick(itemId: ID!, source: String): AffiliateClickResult!\r\n\r\n  # Game economy config / rules (admin)\r\n  updateGameEconomyConfig(input: UpdateGameEconomyConfigInput!): GameEconomyConfig!\r\n\r\n  # Episodes admin (admin-only)\r\n  adminCreateEpisode(input: AdminCreateEpisodeInput!): Episode!\r\n  adminUpdateEpisode(episodeId: ID!, input: AdminUpdateEpisodeInput!): Episode!\r\n\r\n  # Admin Settings\r\n  updateAdminSettings(input: AdminSettingsInput!): AdminSettings!\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Admin Settings Types\r\n# ─────────────────────────────────────────\r\n\r\ntype AdminSettings {\r\n  animationsEnabled: Boolean!\r\n  soundsEnabled: Boolean!\r\n  autoBadgeGrant: Boolean!\r\n  badgeRules: [BadgeRule!]!\r\n}\r\n\r\ntype BadgeRule {\r\n  id: ID!\r\n  label: String!\r\n  trigger: String! # stored as string; client evals it\r\n}\r\n\r\ninput AdminSettingsInput {\r\n  animationsEnabled: Boolean\r\n  soundsEnabled: Boolean\r\n  autoBadgeGrant: Boolean\r\n  badgeRules: [BadgeRuleInput!]\r\n}\r\n\r\ninput BadgeRuleInput {\r\n  id: ID!\r\n  label: String!\r\n  trigger: String!\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Game economy configuration / rules\r\n# ─────────────────────────────────────────\r\n\r\n\"\"\"\r\nSingle game rule describing how coins are earned or spent,\r\nplus optional JSON metadata to tune behavior.\r\n\"\"\"\r\ntype GameRule {\r\n  id: ID!\r\n  category: String!       # e.g. WATCH_TIME, CHAT, TRIVIA, STREAK, SOCIAL, EVENT, REDEMPTION\r\n  label: String!          # e.g. \"Watch 10 minutes\"\r\n  description: String\r\n  coins: Int!             # positive = reward, negative = cost\r\n  per: String             # e.g. PER_10_MIN, PER_DAY, PER_EVENT\r\n  maxPerDay: Int\r\n  meta: AWSJSON\r\n}\r\n\r\n\"\"\"\r\nTop-level economy config used by admin + fan-facing rules + overview.\r\n\"\"\"\r\ntype GameEconomyConfig {\r\n  id: ID!\r\n  version: Int!\r\n  updatedAt: AWSDateTime\r\n  updatedBy: String\r\n\r\n  # Global economy knobs\r\n  coinToUsdRatio: Float\r\n  dailyCoinCap: Int\r\n  weeklyCoinCap: Int\r\n  monthlyBonusEventsLimit: Int\r\n\r\n  # Rule list\r\n  rules: [GameRule!]!\r\n\r\n  # Optional freeform notes for admins\r\n  notes: String\r\n}\r\n\r\ninput GameRuleInput {\r\n  id: ID\r\n  category: String!\r\n  label: String!\r\n  description: String\r\n  coins: Int!\r\n  per: String\r\n  maxPerDay: Int\r\n  meta: AWSJSON\r\n}\r\n\r\ninput UpdateGameEconomyConfigInput {\r\n  coinToUsdRatio: Float\r\n  dailyCoinCap: Int\r\n  weeklyCoinCap: Int\r\n  monthlyBonusEventsLimit: Int\r\n  rules: [GameRuleInput!]!\r\n  notes: String\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Core / Auth\r\n# ─────────────────────────────────────────\r\n\r\ntype Me {\r\n  id: ID!\r\n  email: String!\r\n  role: String!\r\n  tier: String!\r\n}\r\n\r\ntype RoleResult {\r\n  userId: ID!\r\n  role: String!\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Closet enums\r\n# ─────────────────────────────────────────\r\n\r\n# Which fans are allowed to see the look (admin-facing)\r\nenum ClosetAudience {\r\n  PUBLIC\r\n  BESTIES\r\n  EXCLUSIVE\r\n}\r\n\r\n# Overall visibility flags used across the app (legacy / fan-facing)\r\nenum ClosetVisibility {\r\n  PRIVATE\r\n  BESTIE\r\n  PUBLIC\r\n}\r\n\r\n# Moderation / lifecycle status for a closet item\r\nenum ClosetStatus {\r\n  PENDING\r\n  APPROVED\r\n  PUBLISHED\r\n  REJECTED\r\n}\r\n\r\n# Sorting for the fan Closet feed\r\nenum ClosetFeedSort {\r\n  NEWEST\r\n  MOST_LOVED\r\n  LALAS_PICK\r\n  MY_FAVES\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Closet core types\r\n# ─────────────────────────────────────────\r\n\r\ntype ClosetItem {\r\n  id: ID!\r\n  ownerId: ID\r\n  # admin-set owner (creator / lala / bestie)\r\n  ownerSub: ID\r\n  # legacy ID used in some queries\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  # short vibe / mood label from admin (e.g. \"Date night\", \"Cozy Sunday\")\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility!\r\n  affiliateUrl: String\r\n  # Link this closet item to one or more episodes\r\n  # (episodes where the outfit appears / is featured)\r\n  episodeIds: [ID!]\r\n  # Game / moderation metadata\r\n  status: ClosetStatus!\r\n  # now required in practice\r\n  audience: ClosetAudience\r\n  pinned: Boolean\r\n  # Lala's pick\r\n  favoriteCount: Int\r\n  # how many coins the item is worth\r\n  coinValue: Int\r\n  backgroundStatus: String\r\n  # when this item is scheduled to go live (if applicable)\r\n  scheduledAt: AWSDateTime\r\n  createdAt: AWSDateTime\r\n  updatedAt: AWSDateTime\r\n}\r\n\r\ntype ClosetConnection {\r\n  items: [ClosetItem!]!\r\n  nextToken: String\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Closet inputs – fan / bestie\r\n# ─────────────────────────────────────────\r\n\r\ninput CreateClosetItemInput {\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility\r\n  affiliateUrl: String\r\n  episodeIds: [ID!]\r\n}\r\n\r\ninput UpdateClosetItemStoryInput {\r\n  itemId: ID!\r\n  storyId: ID\r\n  storyPosition: Int\r\n}\r\n\r\ninput CommentOnClosetItemInput {\r\n  itemId: ID!\r\n  text: String!\r\n}\r\n\r\ninput BestieCreateClosetItemInput {\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility\r\n  affiliateUrl: String\r\n  episodeIds: [ID!]\r\n}\r\n\r\ninput BestieUpdateClosetItemInput {\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility\r\n  affiliateUrl: String\r\n  episodeIds: [ID!]\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Closet inputs – admin\r\n# ─────────────────────────────────────────\r\n\r\ninput AdminCreateClosetItemInput {\r\n  ownerId: ID\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  # new: matches \"Vibes\" field in admin upload form\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility\r\n  affiliateUrl: String\r\n  # Link to episodes this look appears in\r\n  episodeIds: [ID!]\r\n  # admin metadata\r\n  status: ClosetStatus\r\n  audience: ClosetAudience\r\n  pinned: Boolean\r\n  coinValue: Int\r\n  backgroundStatus: String\r\n}\r\n\r\ninput AdminUpdateClosetItemInput {\r\n  id: ID!\r\n  ownerId: ID\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility\r\n  affiliateUrl: String\r\n  # Link to episodes this look appears in\r\n  episodeIds: [ID!]\r\n  # admin metadata\r\n  status: ClosetStatus\r\n  audience: ClosetAudience\r\n  pinned: Boolean\r\n  coinValue: Int\r\n  backgroundStatus: String\r\n  scheduledAt: AWSDateTime\r\n}\r\n\r\ntype Comment {\r\n  id: ID!\r\n  itemId: ID!\r\n  userId: ID!\r\n  text: String!\r\n  createdAt: AWSDateTime!\r\n}\r\n\r\ntype CommentConnection {\r\n  items: [Comment!]!\r\n  nextToken: String\r\n}\r\n\r\ntype Like {\r\n  itemId: ID!\r\n  userId: ID!\r\n  createdAt: AWSDateTime!\r\n}\r\n\r\ntype LikeConnection {\r\n  items: [Like!]!\r\n  nextToken: String\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Episodes / Bestie access\r\n# ─────────────────────────────────────────\r\n\r\nenum EpisodeStatus {\r\n  DRAFT\r\n  SCHEDULED\r\n  PUBLISHED\r\n}\r\n\r\ntype ThumbnailImage {\r\n  key: String!\r\n  primary: Boolean!\r\n}\r\n\r\ntype Episode {\r\n  id: ID!\r\n  title: String!\r\n  season: Int\r\n  episodeNumber: Int\r\n  showId: String\r\n  shortDescription: String\r\n  fullDescription: String\r\n  status: EpisodeStatus!\r\n  publicAt: String!\r\n  durationSeconds: Int\r\n  unlockCoinCost: Int\r\n  chatEnabled: Boolean!\r\n  thumbnails: [ThumbnailImage!]!\r\n  outfitsLinkedCount: Int\r\n}\r\n\r\ntype EpisodeAdminConnection {\r\n  items: [Episode!]!\r\n  nextToken: String\r\n}\r\n\r\ntype EpisodeAccess {\r\n  episodeId: ID!\r\n  isEarly: Boolean!\r\n  reason: String\r\n}\r\n\r\ntype EpisodeUnlock {\r\n  episodeId: ID!\r\n  unlockedAt: String!\r\n  costCoins: Int!\r\n  source: String\r\n  episode: Episode\r\n}\r\n\r\ntype UnlockEpisodeResult {\r\n  success: Boolean!\r\n  unlockedAt: String!\r\n  costCoins: Int!\r\n  episode: Episode!\r\n  remainingCoins: Int!\r\n}\r\n\r\ntype BestieStatus {\r\n  userId: ID!\r\n  isBestie: Boolean!\r\n  tier: String\r\n  renewsAt: AWSDateTime\r\n  trialActive: Boolean\r\n  trialEndsAt: AWSDateTime\r\n}\r\n\r\ntype BestieCheckoutSession {\r\n  checkoutUrl: String!\r\n}\r\n\r\ninput AdminCreateEpisodeInput {\r\n  id: ID\r\n  title: String!\r\n  season: Int\r\n  episodeNumber: Int\r\n  showId: String\r\n  shortDescription: String\r\n  fullDescription: String\r\n  status: EpisodeStatus!          # DRAFT | SCHEDULED | PUBLISHED\r\n  publicAt: String!               # ISO string\r\n  durationSeconds: Int\r\n  unlockCoinCost: Int\r\n  chatEnabled: Boolean = true\r\n  thumbnails: [ThumbnailImageInput!]\r\n}\r\n\r\ninput AdminUpdateEpisodeInput {\r\n  title: String\r\n  season: Int\r\n  episodeNumber: Int\r\n  showId: String\r\n  shortDescription: String\r\n  fullDescription: String\r\n  status: EpisodeStatus\r\n  publicAt: String\r\n  durationSeconds: Int\r\n  unlockCoinCost: Int\r\n  chatEnabled: Boolean\r\n  thumbnails: [ThumbnailImageInput!]\r\n}\r\n\r\ninput ThumbnailImageInput {\r\n  key: String!\r\n  primary: Boolean!\r\n}\r\n\r\n# Background change requests\r\ninput BgChangeRequestInput {\r\n  itemId: ID!\r\n  newBackgroundKey: String!\r\n  notes: String\r\n}\r\n\r\ntype BgChangeRequestResult {\r\n  ok: Boolean!\r\n  requestId: ID\r\n}\r\n\r\n# Stories\r\ntype Story {\r\n  id: ID!\r\n  ownerId: ID!\r\n  title: String\r\n  status: String\r\n  createdAt: AWSDateTime\r\n  publishedAt: AWSDateTime\r\n}\r\n\r\ninput CreateStoryInput {\r\n  title: String!\r\n  closetItemIds: [ID!]\r\n}\r\n\r\ntype ShareResult {\r\n  ok: Boolean!\r\n  url: String\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Fans / Game types\r\n# ─────────────────────────────────────────\r\n\r\n\"\"\"Per-fan game profile / XP / coins.\"\"\"\r\ntype GameProfile {\r\n  userId: ID!\r\n  displayName: String\r\n  level: Int!\r\n  xp: Int!\r\n  coins: Int!\r\n  badges: [String!]!\r\n  avatarUrl: String\r\n  bio: String\r\n\r\n  # Timestamp of last gameplay-related event\r\n  lastEventAt: AWSDateTime\r\n\r\n  # Daily login streak\r\n  streakCount: Int\r\n  lastLoginAt: AWSDateTime\r\n\r\n  # Fan’s pinned closet items\r\n  pinnedClosetItems: [ClosetItem!]!\r\n}\r\n\r\n\"\"\"Result of logging a game event.\"\"\"\r\ntype GameEventResult {\r\n  success: Boolean!\r\n\r\n  # current XP / coins after the event\r\n  xp: Int\r\n  coins: Int\r\n\r\n  # delta from this event\r\n  newXP: Int\r\n  newCoins: Int\r\n\r\n  lastEventAt: AWSDateTime\r\n}\r\n\r\n\"\"\"Leaderboard entry for topXP / topCoins.\"\"\"\r\ntype LeaderboardEntry {\r\n  userId: ID!\r\n  displayName: String\r\n  xp: Int\r\n  coins: Int\r\n  rank: Int!\r\n}\r\n\r\ninput LogGameEventInput {\r\n  type: String!\r\n  metadata: AWSJSON\r\n}\r\n\r\ninput AwardCoinsInput {\r\n  userId: ID!\r\n  coins: Int!\r\n  xp: Int\r\n}\r\n\r\ninput UpdateProfileInput {\r\n  displayName: String\r\n  avatarUrl: String\r\n  bio: String\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Polls\r\n# ─────────────────────────────────────────\r\n\r\ntype Poll {\r\n  pollId: ID!\r\n  question: String!\r\n  options: [String!]!\r\n  totals: [Int!]!\r\n  createdBy: String\r\n  createdAt: AWSDateTime\r\n}\r\n\r\ninput CreatePollInput {\r\n  question: String!\r\n  options: [String!]!\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Creator / Livestream / Commerce / AI\r\n# ─────────────────────────────────────────\r\n\r\ntype CreatorLivestreamInfo {\r\n  channelArn: String\r\n  playbackUrl: String\r\n  isLive: Boolean!\r\n}\r\n\r\ntype CreatorRevenueSummary {\r\n  periodStart: AWSDateTime\r\n  periodEnd: AWSDateTime\r\n  currency: String!\r\n  totalRevenue: Float!\r\n  totalOrders: Int!\r\n}\r\n\r\nenum CreatorAiKind {\r\n  STYLE_POST\r\n  EPISODE_CAPTION\r\n  EMAIL_SUBJECT\r\n  GENERIC\r\n}\r\n\r\ntype CreatorAiSuggestionResult {\r\n  text: String!\r\n}\r\n\r\ntype PinResult {\r\n  ok: Boolean!\r\n}\r\n\r\ntype AffiliateClickResult {\r\n  ok: Boolean!\r\n}\r\n"}}},"LogGroup":{"id":"LogGroup","path":"ApiStack/StylingApi/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"HelloDs":{"id":"HelloDs","path":"ApiStack/StylingApi/HelloDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/HelloDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/HelloDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/HelloDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/HelloDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/HelloDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["HelloFn7942DF23","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["HelloFn7942DF23","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiHelloDsServiceRoleDefaultPolicy8C35E727","roles":[{"Ref":"StylingApiHelloDsServiceRole44626254"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/HelloDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["HelloFn7942DF23","Arn"]}},"name":"HelloDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiHelloDsServiceRole44626254","Arn"]},"type":"AWS_LAMBDA"}}}}},"Hello":{"id":"Hello","path":"ApiStack/StylingApi/Hello","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/Hello/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"HelloDs","fieldName":"hello","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"NoneDs":{"id":"NoneDs","path":"ApiStack/StylingApi/NoneDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.NoneDataSource","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/NoneDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"name":"NoneDs","type":"NONE"}}}}},"QueryMeResolver":{"id":"QueryMeResolver","path":"ApiStack/StylingApi/QueryMeResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/QueryMeResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"NoneDs","fieldName":"me","kind":"UNIT","requestMappingTemplate":"\n  {\n    \"version\": \"2017-02-28\",\n    \"payload\": {}\n  }\n  ","responseMappingTemplate":"\n    #set($sub = \"anonymous\")\n    #set($email = \"\")\n\n    #if($ctx.identity && $ctx.identity.sub)\n      #set($sub = $ctx.identity.sub)\n    #end\n\n    #if($ctx.identity && $ctx.identity.claims && $ctx.identity.claims.get(\"email\"))\n      #set($email = $ctx.identity.claims.get(\"email\"))\n    #end\n\n    $util.toJson({\n      \"id\": $sub,\n      \"email\": $email,\n      \"role\": \"FAN\",\n      \"tier\": \"FREE\"\n    })\n  ","typeName":"Query"}}}}},"ClosetDs":{"id":"ClosetDs","path":"ApiStack/StylingApi/ClosetDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/ClosetDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/ClosetDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/ClosetDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ClosetResolverFnDB09D91C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ClosetResolverFnDB09D91C","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiClosetDsServiceRoleDefaultPolicyE595E568","roles":[{"Ref":"StylingApiClosetDsServiceRole61F98ADC"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["ClosetResolverFnDB09D91C","Arn"]}},"name":"ClosetDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiClosetDsServiceRole61F98ADC","Arn"]},"type":"AWS_LAMBDA"}}}}},"MyCloset":{"id":"MyCloset","path":"ApiStack/StylingApi/MyCloset","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/MyCloset/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"myCloset","kind":"UNIT","typeName":"Query"}}}}},"MyWishlistResolver":{"id":"MyWishlistResolver","path":"ApiStack/StylingApi/MyWishlistResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/MyWishlistResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"myWishlist","kind":"UNIT","typeName":"Query"}}}}},"QueryBestieClosetItemsResolver":{"id":"QueryBestieClosetItemsResolver","path":"ApiStack/StylingApi/QueryBestieClosetItemsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/QueryBestieClosetItemsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"bestieClosetItems","kind":"UNIT","typeName":"Query"}}}}},"CreateClosetItem":{"id":"CreateClosetItem","path":"ApiStack/StylingApi/CreateClosetItem","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreateClosetItem/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"createClosetItem","kind":"UNIT","typeName":"Mutation"}}}}},"RequestClosetApproval":{"id":"RequestClosetApproval","path":"ApiStack/StylingApi/RequestClosetApproval","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/RequestClosetApproval/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"requestClosetApproval","kind":"UNIT","typeName":"Mutation"}}}}},"UpdateClosetMediaKey":{"id":"UpdateClosetMediaKey","path":"ApiStack/StylingApi/UpdateClosetMediaKey","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/UpdateClosetMediaKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"updateClosetMediaKey","kind":"UNIT","typeName":"Mutation"}}}}},"UpdateClosetItemStory":{"id":"UpdateClosetItemStory","path":"ApiStack/StylingApi/UpdateClosetItemStory","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/UpdateClosetItemStory/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"updateClosetItemStory","kind":"UNIT","typeName":"Mutation"}}}}},"LikeClosetItemResolver":{"id":"LikeClosetItemResolver","path":"ApiStack/StylingApi/LikeClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/LikeClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"likeClosetItem","kind":"UNIT","typeName":"Mutation"}}}}},"CommentOnClosetItemResolver":{"id":"CommentOnClosetItemResolver","path":"ApiStack/StylingApi/CommentOnClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CommentOnClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"commentOnClosetItem","kind":"UNIT","typeName":"Mutation"}}}}},"PinHighlightResolver":{"id":"PinHighlightResolver","path":"ApiStack/StylingApi/PinHighlightResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/PinHighlightResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"pinHighlight","kind":"UNIT","typeName":"Mutation"}}}}},"ToggleWishlistItemResolver":{"id":"ToggleWishlistItemResolver","path":"ApiStack/StylingApi/ToggleWishlistItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ToggleWishlistItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"toggleWishlistItem","kind":"UNIT","typeName":"Mutation"}}}}},"ClosetItemCommentsResolver":{"id":"ClosetItemCommentsResolver","path":"ApiStack/StylingApi/ClosetItemCommentsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetItemCommentsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"closetItemComments","kind":"UNIT","typeName":"Query"}}}}},"AdminClosetItemLikesResolver":{"id":"AdminClosetItemLikesResolver","path":"ApiStack/StylingApi/AdminClosetItemLikesResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminClosetItemLikesResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"adminClosetItemLikes","kind":"UNIT","typeName":"Query"}}}}},"AdminClosetItemCommentsResolver":{"id":"AdminClosetItemCommentsResolver","path":"ApiStack/StylingApi/AdminClosetItemCommentsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminClosetItemCommentsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"adminClosetItemComments","kind":"UNIT","typeName":"Query"}}}}},"PinnedClosetItemsResolver":{"id":"PinnedClosetItemsResolver","path":"ApiStack/StylingApi/PinnedClosetItemsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/PinnedClosetItemsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"pinnedClosetItems","kind":"UNIT","typeName":"GameProfile"}}}}},"RequestBgChangeResolver":{"id":"RequestBgChangeResolver","path":"ApiStack/StylingApi/RequestBgChangeResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/RequestBgChangeResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"requestClosetBackgroundChange","kind":"UNIT","typeName":"Mutation"}}}}},"CreateStoryResolver":{"id":"CreateStoryResolver","path":"ApiStack/StylingApi/CreateStoryResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreateStoryResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"createStory","kind":"UNIT","typeName":"Mutation"}}}}},"PublishStoryResolver":{"id":"PublishStoryResolver","path":"ApiStack/StylingApi/PublishStoryResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/PublishStoryResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"publishStory","kind":"UNIT","typeName":"Mutation"}}}}},"AddClosetItemToFeedResolver":{"id":"AddClosetItemToFeedResolver","path":"ApiStack/StylingApi/AddClosetItemToFeedResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AddClosetItemToFeedResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"addClosetItemToCommunityFeed","kind":"UNIT","typeName":"Mutation"}}}}},"RemoveClosetItemFromFeedResolver":{"id":"RemoveClosetItemFromFeedResolver","path":"ApiStack/StylingApi/RemoveClosetItemFromFeedResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/RemoveClosetItemFromFeedResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"removeClosetItemFromCommunityFeed","kind":"UNIT","typeName":"Mutation"}}}}},"ShareClosetItemToPinterestResolver":{"id":"ShareClosetItemToPinterestResolver","path":"ApiStack/StylingApi/ShareClosetItemToPinterestResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ShareClosetItemToPinterestResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"shareClosetItemToPinterest","kind":"UNIT","typeName":"Mutation"}}}}},"ClosetAdminSource":{"id":"ClosetAdminSource","path":"ApiStack/StylingApi/ClosetAdminSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/ClosetAdminSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/ClosetAdminSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetAdminSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/ClosetAdminSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetAdminSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ClosetAdminFnB4D542CC","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ClosetAdminFnB4D542CC","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiClosetAdminSourceServiceRoleDefaultPolicyDFCEEFAE","roles":[{"Ref":"StylingApiClosetAdminSourceServiceRole9EF81003"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetAdminSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["ClosetAdminFnB4D542CC","Arn"]}},"name":"ClosetAdminSource","serviceRoleArn":{"Fn::GetAtt":["StylingApiClosetAdminSourceServiceRole9EF81003","Arn"]},"type":"AWS_LAMBDA"}}}}},"AdminListPendingResolver":{"id":"AdminListPendingResolver","path":"ApiStack/StylingApi/AdminListPendingResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminListPendingResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminListPending","kind":"UNIT","typeName":"Query"}}}}},"AdminListClosetItemsResolver":{"id":"AdminListClosetItemsResolver","path":"ApiStack/StylingApi/AdminListClosetItemsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminListClosetItemsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminListClosetItems","kind":"UNIT","typeName":"Query"}}}}},"ClosetFeedResolver":{"id":"ClosetFeedResolver","path":"ApiStack/StylingApi/ClosetFeedResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetFeedResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"closetFeed","kind":"UNIT","typeName":"Query"}}}}},"AdminCreateClosetItemResolver":{"id":"AdminCreateClosetItemResolver","path":"ApiStack/StylingApi/AdminCreateClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminCreateClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminCreateClosetItem","kind":"UNIT","typeName":"Mutation"}}}}},"AdminApproveItem":{"id":"AdminApproveItem","path":"ApiStack/StylingApi/AdminApproveItem","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminApproveItem/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminApproveItem","kind":"UNIT","typeName":"Mutation"}}}}},"AdminRejectItem":{"id":"AdminRejectItem","path":"ApiStack/StylingApi/AdminRejectItem","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminRejectItem/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminRejectItem","kind":"UNIT","typeName":"Mutation"}}}}},"AdminSetClosetAudience":{"id":"AdminSetClosetAudience","path":"ApiStack/StylingApi/AdminSetClosetAudience","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminSetClosetAudience/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminSetClosetAudience","kind":"UNIT","typeName":"Mutation"}}}}},"AdminUpdateClosetItemResolver":{"id":"AdminUpdateClosetItemResolver","path":"ApiStack/StylingApi/AdminUpdateClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminUpdateClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminUpdateClosetItem","kind":"UNIT","typeName":"Mutation"}}}}},"AdminSettingsDs":{"id":"AdminSettingsDs","path":"ApiStack/StylingApi/AdminSettingsDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/AdminSettingsDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/AdminSettingsDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminSettingsDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/AdminSettingsDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminSettingsDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["AdminSettingsFnE3CD1AE7","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AdminSettingsFnE3CD1AE7","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiAdminSettingsDsServiceRoleDefaultPolicy823E1137","roles":[{"Ref":"StylingApiAdminSettingsDsServiceRoleE770C776"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminSettingsDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["AdminSettingsFnE3CD1AE7","Arn"]}},"name":"AdminSettingsDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiAdminSettingsDsServiceRoleE770C776","Arn"]},"type":"AWS_LAMBDA"}}}}},"GetAdminSettingsResolver":{"id":"GetAdminSettingsResolver","path":"ApiStack/StylingApi/GetAdminSettingsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GetAdminSettingsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"AdminSettingsDs","fieldName":"getAdminSettings","kind":"UNIT","typeName":"Query"}}}}},"UpdateAdminSettingsResolver":{"id":"UpdateAdminSettingsResolver","path":"ApiStack/StylingApi/UpdateAdminSettingsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/UpdateAdminSettingsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"AdminSettingsDs","fieldName":"updateAdminSettings","kind":"UNIT","typeName":"Mutation"}}}}},"BestieDs":{"id":"BestieDs","path":"ApiStack/StylingApi/BestieDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/BestieDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/BestieDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/BestieDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/BestieDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/BestieDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["BestieFn57102072","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["BestieFn57102072","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiBestieDsServiceRoleDefaultPolicy459937D7","roles":[{"Ref":"StylingApiBestieDsServiceRole134EBB9C"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/BestieDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["BestieFn57102072","Arn"]}},"name":"BestieDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiBestieDsServiceRole134EBB9C","Arn"]},"type":"AWS_LAMBDA"}}}}},"MeBestieStatusResolver":{"id":"MeBestieStatusResolver","path":"ApiStack/StylingApi/MeBestieStatusResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/MeBestieStatusResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"BestieDs","fieldName":"meBestieStatus","kind":"UNIT","typeName":"Query"}}}}},"StartBestieCheckoutResolver":{"id":"StartBestieCheckoutResolver","path":"ApiStack/StylingApi/StartBestieCheckoutResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/StartBestieCheckoutResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"BestieDs","fieldName":"startBestieCheckout","kind":"UNIT","typeName":"Mutation"}}}}},"ClaimBestieTrialResolver":{"id":"ClaimBestieTrialResolver","path":"ApiStack/StylingApi/ClaimBestieTrialResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClaimBestieTrialResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"BestieDs","fieldName":"claimBestieTrial","kind":"UNIT","typeName":"Mutation"}}}}},"AdminSetBestieResolver":{"id":"AdminSetBestieResolver","path":"ApiStack/StylingApi/AdminSetBestieResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminSetBestieResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"BestieDs","fieldName":"adminSetBestie","kind":"UNIT","typeName":"Mutation"}}}}},"AdminRevokeBestieResolver":{"id":"AdminRevokeBestieResolver","path":"ApiStack/StylingApi/AdminRevokeBestieResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminRevokeBestieResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"BestieDs","fieldName":"adminRevokeBestie","kind":"UNIT","typeName":"Mutation"}}}}},"AdminSetBestieByEmailResolver":{"id":"AdminSetBestieByEmailResolver","path":"ApiStack/StylingApi/AdminSetBestieByEmailResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminSetBestieByEmailResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"BestieDs","fieldName":"adminSetBestieByEmail","kind":"UNIT","typeName":"Mutation"}}}}},"AdminRevokeBestieByEmailResolver":{"id":"AdminRevokeBestieByEmailResolver","path":"ApiStack/StylingApi/AdminRevokeBestieByEmailResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminRevokeBestieByEmailResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"BestieDs","fieldName":"adminRevokeBestieByEmail","kind":"UNIT","typeName":"Mutation"}}}}},"EpisodesGateDs":{"id":"EpisodesGateDs","path":"ApiStack/StylingApi/EpisodesGateDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/EpisodesGateDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/EpisodesGateDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/EpisodesGateDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/EpisodesGateDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/EpisodesGateDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["EpisodesGateFn123EBDAC","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpisodesGateFn123EBDAC","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiEpisodesGateDsServiceRoleDefaultPolicyBE9E9754","roles":[{"Ref":"StylingApiEpisodesGateDsServiceRoleAAD7DDD3"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/EpisodesGateDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["EpisodesGateFn123EBDAC","Arn"]}},"name":"EpisodesGateDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiEpisodesGateDsServiceRoleAAD7DDD3","Arn"]},"type":"AWS_LAMBDA"}}}}},"IsEpisodeEarlyAccessResolver":{"id":"IsEpisodeEarlyAccessResolver","path":"ApiStack/StylingApi/IsEpisodeEarlyAccessResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/IsEpisodeEarlyAccessResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"EpisodesGateDs","fieldName":"isEpisodeEarlyAccess","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"UnlockEpisodeResolver":{"id":"UnlockEpisodeResolver","path":"ApiStack/StylingApi/UnlockEpisodeResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/UnlockEpisodeResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"EpisodesGateDs","fieldName":"unlockEpisode","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"MyUnlockedEpisodesResolver":{"id":"MyUnlockedEpisodesResolver","path":"ApiStack/StylingApi/MyUnlockedEpisodesResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/MyUnlockedEpisodesResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"EpisodesGateDs","fieldName":"myUnlockedEpisodes","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"EpisodesAdminDs":{"id":"EpisodesAdminDs","path":"ApiStack/StylingApi/EpisodesAdminDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/EpisodesAdminDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/EpisodesAdminDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/EpisodesAdminDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/EpisodesAdminDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/EpisodesAdminDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["EpisodesAdminFnE94A9FB5","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpisodesAdminFnE94A9FB5","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiEpisodesAdminDsServiceRoleDefaultPolicy6523A222","roles":[{"Ref":"StylingApiEpisodesAdminDsServiceRoleF920ABF5"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/EpisodesAdminDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["EpisodesAdminFnE94A9FB5","Arn"]}},"name":"EpisodesAdminDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiEpisodesAdminDsServiceRoleF920ABF5","Arn"]},"type":"AWS_LAMBDA"}}}}},"AdminCreateEpisodeResolver":{"id":"AdminCreateEpisodeResolver","path":"ApiStack/StylingApi/AdminCreateEpisodeResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminCreateEpisodeResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"EpisodesAdminDs","fieldName":"adminCreateEpisode","kind":"UNIT","typeName":"Mutation"}}}}},"AdminUpdateEpisodeResolver":{"id":"AdminUpdateEpisodeResolver","path":"ApiStack/StylingApi/AdminUpdateEpisodeResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminUpdateEpisodeResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"EpisodesAdminDs","fieldName":"adminUpdateEpisode","kind":"UNIT","typeName":"Mutation"}}}}},"AdminListEpisodesResolver":{"id":"AdminListEpisodesResolver","path":"ApiStack/StylingApi/AdminListEpisodesResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminListEpisodesResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"EpisodesAdminDs","fieldName":"adminListEpisodes","kind":"UNIT","typeName":"Query"}}}}},"GameplayDs":{"id":"GameplayDs","path":"ApiStack/StylingApi/GameplayDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/GameplayDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/GameplayDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GameplayDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/GameplayDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GameplayDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["GameplayFnCD9DA738","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["GameplayFnCD9DA738","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiGameplayDsServiceRoleDefaultPolicy7A4AC6CB","roles":[{"Ref":"StylingApiGameplayDsServiceRoleA193493E"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GameplayDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["GameplayFnCD9DA738","Arn"]}},"name":"GameplayDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiGameplayDsServiceRoleA193493E","Arn"]},"type":"AWS_LAMBDA"}}}}},"LeaderboardDs":{"id":"LeaderboardDs","path":"ApiStack/StylingApi/LeaderboardDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/LeaderboardDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/LeaderboardDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/LeaderboardDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/LeaderboardDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/LeaderboardDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["LeaderboardFnF2B1AEC2","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["LeaderboardFnF2B1AEC2","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiLeaderboardDsServiceRoleDefaultPolicyD7DA49C2","roles":[{"Ref":"StylingApiLeaderboardDsServiceRole00D64A33"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/LeaderboardDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["LeaderboardFnF2B1AEC2","Arn"]}},"name":"LeaderboardDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiLeaderboardDsServiceRole00D64A33","Arn"]},"type":"AWS_LAMBDA"}}}}},"PollsDs":{"id":"PollsDs","path":"ApiStack/StylingApi/PollsDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/PollsDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/PollsDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/PollsDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/PollsDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/PollsDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PollsFn65E6C73F","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PollsFn65E6C73F","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiPollsDsServiceRoleDefaultPolicyD1CDD935","roles":[{"Ref":"StylingApiPollsDsServiceRoleFE523342"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/PollsDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["PollsFn65E6C73F","Arn"]}},"name":"PollsDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiPollsDsServiceRoleFE523342","Arn"]},"type":"AWS_LAMBDA"}}}}},"ProfileDs":{"id":"ProfileDs","path":"ApiStack/StylingApi/ProfileDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/ProfileDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/ProfileDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ProfileDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/ProfileDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ProfileDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ProfileFn28F379CF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ProfileFn28F379CF","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiProfileDsServiceRoleDefaultPolicyD64DFCD4","roles":[{"Ref":"StylingApiProfileDsServiceRole6F0CE2C7"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ProfileDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["ProfileFn28F379CF","Arn"]}},"name":"ProfileDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiProfileDsServiceRole6F0CE2C7","Arn"]},"type":"AWS_LAMBDA"}}}}},"GameEconomyDs":{"id":"GameEconomyDs","path":"ApiStack/StylingApi/GameEconomyDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/GameEconomyDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/GameEconomyDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GameEconomyDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/GameEconomyDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GameEconomyDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["GameEconomyFn1BCE638D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["GameEconomyFn1BCE638D","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiGameEconomyDsServiceRoleDefaultPolicy2CAF6966","roles":[{"Ref":"StylingApiGameEconomyDsServiceRole795A4F63"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GameEconomyDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["GameEconomyFn1BCE638D","Arn"]}},"name":"GameEconomyDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiGameEconomyDsServiceRole795A4F63","Arn"]},"type":"AWS_LAMBDA"}}}}},"LogGameEventResolver":{"id":"LogGameEventResolver","path":"ApiStack/StylingApi/LogGameEventResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/LogGameEventResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"GameplayDs","fieldName":"logGameEvent","kind":"UNIT","typeName":"Mutation"}}}}},"AwardCoinsResolver":{"id":"AwardCoinsResolver","path":"ApiStack/StylingApi/AwardCoinsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AwardCoinsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"GameplayDs","fieldName":"awardCoins","kind":"UNIT","typeName":"Mutation"}}}}},"CreatePoll":{"id":"CreatePoll","path":"ApiStack/StylingApi/CreatePoll","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreatePoll/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"PollsDs","fieldName":"createPoll","kind":"UNIT","typeName":"Mutation"}}}}},"VotePoll":{"id":"VotePoll","path":"ApiStack/StylingApi/VotePoll","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/VotePoll/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"PollsDs","fieldName":"votePoll","kind":"UNIT","typeName":"Mutation"}}}}},"GrantBadge":{"id":"GrantBadge","path":"ApiStack/StylingApi/GrantBadge","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GrantBadge/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ProfileDs","fieldName":"grantBadge","kind":"UNIT","typeName":"Mutation"}}}}},"SetDisplayName":{"id":"SetDisplayName","path":"ApiStack/StylingApi/SetDisplayName","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/SetDisplayName/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ProfileDs","fieldName":"setDisplayName","kind":"UNIT","typeName":"Mutation"}}}}},"UpdateProfile":{"id":"UpdateProfile","path":"ApiStack/StylingApi/UpdateProfile","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/UpdateProfile/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ProfileDs","fieldName":"updateProfile","kind":"UNIT","typeName":"Mutation"}}}}},"TopXP":{"id":"TopXP","path":"ApiStack/StylingApi/TopXP","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/TopXP/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"LeaderboardDs","fieldName":"topXP","kind":"UNIT","typeName":"Query"}}}}},"TopCoins":{"id":"TopCoins","path":"ApiStack/StylingApi/TopCoins","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/TopCoins/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"LeaderboardDs","fieldName":"topCoins","kind":"UNIT","typeName":"Query"}}}}},"GetPoll":{"id":"GetPoll","path":"ApiStack/StylingApi/GetPoll","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GetPoll/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"PollsDs","fieldName":"getPoll","kind":"UNIT","typeName":"Query"}}}}},"GetMyProfile":{"id":"GetMyProfile","path":"ApiStack/StylingApi/GetMyProfile","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GetMyProfile/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ProfileDs","fieldName":"getMyProfile","kind":"UNIT","typeName":"Query"}}}}},"GetGameEconomyConfigResolver":{"id":"GetGameEconomyConfigResolver","path":"ApiStack/StylingApi/GetGameEconomyConfigResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GetGameEconomyConfigResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"GameEconomyDs","fieldName":"getGameEconomyConfig","kind":"UNIT","typeName":"Query"}}}}},"UpdateGameEconomyConfigResolver":{"id":"UpdateGameEconomyConfigResolver","path":"ApiStack/StylingApi/UpdateGameEconomyConfigResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/UpdateGameEconomyConfigResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"GameEconomyDs","fieldName":"updateGameEconomyConfig","kind":"UNIT","typeName":"Mutation"}}}}},"CreatorLivestreamDs":{"id":"CreatorLivestreamDs","path":"ApiStack/StylingApi/CreatorLivestreamDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/CreatorLivestreamDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/CreatorLivestreamDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreatorLivestreamDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/CreatorLivestreamDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreatorLivestreamDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"LivestreamStack:ExportsOutputFnGetAttCreatorLivestreamFnC329A0C0Arn7213942D"},{"Fn::Join":["",[{"Fn::ImportValue":"LivestreamStack:ExportsOutputFnGetAttCreatorLivestreamFnC329A0C0Arn7213942D"},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiCreatorLivestreamDsServiceRoleDefaultPolicyBEFB4995","roles":[{"Ref":"StylingApiCreatorLivestreamDsServiceRoleBA132ACD"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreatorLivestreamDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::ImportValue":"LivestreamStack:ExportsOutputFnGetAttCreatorLivestreamFnC329A0C0Arn7213942D"}},"name":"CreatorLivestreamDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiCreatorLivestreamDsServiceRoleBA132ACD","Arn"]},"type":"AWS_LAMBDA"}}}}},"GetCreatorLivestreamInfoResolver":{"id":"GetCreatorLivestreamInfoResolver","path":"ApiStack/StylingApi/GetCreatorLivestreamInfoResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/GetCreatorLivestreamInfoResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"CreatorLivestreamDs","fieldName":"getCreatorLivestreamInfo","kind":"UNIT","typeName":"Query"}}}}},"PinLivestreamHighlightResolver":{"id":"PinLivestreamHighlightResolver","path":"ApiStack/StylingApi/PinLivestreamHighlightResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/PinLivestreamHighlightResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"CreatorLivestreamDs","fieldName":"pinLivestreamHighlight","kind":"UNIT","typeName":"Mutation"}}}}},"CreatorAiDs":{"id":"CreatorAiDs","path":"ApiStack/StylingApi/CreatorAiDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/CreatorAiDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/CreatorAiDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreatorAiDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/CreatorAiDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreatorAiDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"CreatorToolsStack:ExportsOutputFnGetAttCreatorAiFnF1C41CA2Arn187EFA80"},{"Fn::Join":["",[{"Fn::ImportValue":"CreatorToolsStack:ExportsOutputFnGetAttCreatorAiFnF1C41CA2Arn187EFA80"},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiCreatorAiDsServiceRoleDefaultPolicy636643F6","roles":[{"Ref":"StylingApiCreatorAiDsServiceRole5E6F914B"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreatorAiDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::ImportValue":"CreatorToolsStack:ExportsOutputFnGetAttCreatorAiFnF1C41CA2Arn187EFA80"}},"name":"CreatorAiDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiCreatorAiDsServiceRole5E6F914B","Arn"]},"type":"AWS_LAMBDA"}}}}},"CreatorAiSuggestResolver":{"id":"CreatorAiSuggestResolver","path":"ApiStack/StylingApi/CreatorAiSuggestResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreatorAiSuggestResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"CreatorAiDs","fieldName":"creatorAiSuggest","kind":"UNIT","typeName":"Query"}}}}},"CommerceDs":{"id":"CommerceDs","path":"ApiStack/StylingApi/CommerceDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/CommerceDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/CommerceDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CommerceDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/CommerceDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CommerceDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"CommerceStack:ExportsOutputFnGetAttCommerceFn39448B29Arn7BF3E9C7"},{"Fn::Join":["",[{"Fn::ImportValue":"CommerceStack:ExportsOutputFnGetAttCommerceFn39448B29Arn7BF3E9C7"},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiCommerceDsServiceRoleDefaultPolicy94082CC9","roles":[{"Ref":"StylingApiCommerceDsServiceRole3C8295DD"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CommerceDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::ImportValue":"CommerceStack:ExportsOutputFnGetAttCommerceFn39448B29Arn7BF3E9C7"}},"name":"CommerceDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiCommerceDsServiceRole3C8295DD","Arn"]},"type":"AWS_LAMBDA"}}}}},"CreatorRevenueSummaryResolver":{"id":"CreatorRevenueSummaryResolver","path":"ApiStack/StylingApi/CreatorRevenueSummaryResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreatorRevenueSummaryResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"CommerceDs","fieldName":"creatorRevenueSummary","kind":"UNIT","typeName":"Query"}}}}},"RecordAffiliateClickResolver":{"id":"RecordAffiliateClickResolver","path":"ApiStack/StylingApi/RecordAffiliateClickResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/RecordAffiliateClickResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"CommerceDs","fieldName":"recordAffiliateClick","kind":"UNIT","typeName":"Mutation"}}}}}}},"HelloFn":{"id":"HelloFn","path":"ApiStack/HelloFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/HelloFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/HelloFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/HelloFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Code":{"id":"Code","path":"ApiStack/HelloFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/HelloFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/HelloFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/HelloFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"dba505f53767a9e6657cdeba0a1fe85822984a28978face5a785b36aa3fb4af7.zip"},"environment":{"variables":{"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","role":{"Fn::GetAtt":["HelloFnServiceRoleDA97FE56","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ClosetResolverFn":{"id":"ClosetResolverFn","path":"ApiStack/ClosetResolverFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/ClosetResolverFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/ClosetResolverFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/ClosetResolverFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"WorkflowsV2Stack:ExportsOutputRefApprovalStateMachine767589AACD522D74"}},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefBackgroundChangeApprovalSMA6DF140DCA66162D"}},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"BestiesStoriesStack:ExportsOutputRefStoryPublishSMAF8A41480C93DC91"}},{"Action":"events:PutEvents","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ClosetResolverFnServiceRoleDefaultPolicy2117A20A","roles":[{"Ref":"ClosetResolverFnServiceRole21435BA2"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/ClosetResolverFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/ClosetResolverFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/ClosetResolverFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"9afc6195a2a17689ebb8251d5019402d3cb73be2402b64df10c472baa7deaeab.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","APPROVAL_SM_ARN":{"Fn::ImportValue":"WorkflowsV2Stack:ExportsOutputRefApprovalStateMachine767589AACD522D74"},"BG_CHANGE_SM_ARN":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefBackgroundChangeApprovalSMA6DF140DCA66162D"},"STORY_PUBLISH_SM_ARN":{"Fn::ImportValue":"BestiesStoriesStack:ExportsOutputRefStoryPublishSMAF8A41480C93DC91"},"ADMIN_GROUP_NAME":"ADMIN","CREATOR_GROUP_NAME":"creator","PUBLIC_UPLOADS_CDN":"","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","role":{"Fn::GetAtt":["ClosetResolverFnServiceRole21435BA2","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ClosetAdminFn":{"id":"ClosetAdminFn","path":"ApiStack/ClosetAdminFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/ClosetAdminFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/ClosetAdminFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/ClosetAdminFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"WorkflowsV2Stack:ExportsOutputRefApprovalStateMachine767589AACD522D74"}},{"Action":["dynamodb:Query","dynamodb:Scan","dynamodb:GetItem","dynamodb:UpdateItem","dynamodb:PutItem","dynamodb:DeleteItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["states:SendTaskSuccess","states:SendTaskFailure"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ClosetAdminFnServiceRoleDefaultPolicy08DF50EF","roles":[{"Ref":"ClosetAdminFnServiceRole87F02459"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/ClosetAdminFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/ClosetAdminFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/ClosetAdminFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"8dd00c89a280c6944c02cac8c643bee930f498c718e1e0aa70fbf9218677084d.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","APPROVAL_SM_ARN":{"Fn::ImportValue":"WorkflowsV2Stack:ExportsOutputRefApprovalStateMachine767589AACD522D74"},"ADMIN_GROUP_NAME":"ADMIN","PUBLIC_UPLOADS_CDN":"","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ClosetAdminFnServiceRole87F02459","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"AdminSettingsFn":{"id":"AdminSettingsFn","path":"ApiStack/AdminSettingsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/AdminSettingsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/AdminSettingsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/AdminSettingsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/AdminSettingsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/AdminSettingsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AdminSettingsFnServiceRoleDefaultPolicyD4F7DF2F","roles":[{"Ref":"AdminSettingsFnServiceRole5CD7AB31"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/AdminSettingsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/AdminSettingsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/AdminSettingsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/AdminSettingsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"01bd14018cc2be7d317d0b85d160a20ddbd22404bbfbc5a83dc0200358e301cd.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"ADMIN","SUPERADMIN_EMAILS":"evonifoster@yahoo.com","SKIP_ADMIN_CHECK":"false","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["AdminSettingsFnServiceRole5CD7AB31","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"BestieFn":{"id":"BestieFn","path":"ApiStack/BestieFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/BestieFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/BestieFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/BestieFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/BestieFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/BestieFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"cognito-idp:ListUsers","Effect":"Allow","Resource":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputFnGetAttUserPool6BA7E5F2Arn686ACC00"}}],"Version":"2012-10-17"},"policyName":"BestieFnServiceRoleDefaultPolicy85C0CE1B","roles":[{"Ref":"BestieFnServiceRoleF23C6CA8"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/BestieFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/BestieFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/BestieFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/BestieFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"b211d32f723d4d7af080211fb2ae6ad48756144f7dc536d1a3818a0318dd7f55.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"STRIPE_SECRET_KEY":"","STRIPE_PRICE_ID":"","BASE_SUCCESS_URL":"http://localhost:5173","ADMIN_GROUP_NAME":"ADMIN","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["BestieFnServiceRoleF23C6CA8","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"EpisodesGateFn":{"id":"EpisodesGateFn","path":"ApiStack/EpisodesGateFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/EpisodesGateFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/EpisodesGateFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/EpisodesGateFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/EpisodesGateFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/EpisodesGateFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"EpisodesGateFnServiceRoleDefaultPolicy19662CB1","roles":[{"Ref":"EpisodesGateFnServiceRoleB3AD1C04"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/EpisodesGateFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/EpisodesGateFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/EpisodesGateFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/EpisodesGateFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"48128dbb79eb55a283895ff3048eaf0669b2ea4ef3d10a13178687673f0956ff.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","role":{"Fn::GetAtt":["EpisodesGateFnServiceRoleB3AD1C04","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"EpisodesAdminFn":{"id":"EpisodesAdminFn","path":"ApiStack/EpisodesAdminFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/EpisodesAdminFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/EpisodesAdminFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/EpisodesAdminFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/EpisodesAdminFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/EpisodesAdminFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"EpisodesAdminFnServiceRoleDefaultPolicy1F11AD33","roles":[{"Ref":"EpisodesAdminFnServiceRole49DE0358"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/EpisodesAdminFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/EpisodesAdminFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/EpisodesAdminFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/EpisodesAdminFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"88db5b30b4f243822c1697a1fd7cf7f7a29d24b1c8f88643b01b351ee3b50e00.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"ADMIN","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","role":{"Fn::GetAtt":["EpisodesAdminFnServiceRole49DE0358","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"GameplayFn":{"id":"GameplayFn","path":"ApiStack/GameplayFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/GameplayFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/GameplayFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/GameplayFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/GameplayFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/GameplayFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"GameplayFnServiceRoleDefaultPolicy448D7565","roles":[{"Ref":"GameplayFnServiceRole9C9BF690"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/GameplayFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/GameplayFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/GameplayFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/GameplayFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"3b59a5ac47ddda189d9b4638ff61b29b826a944a2029cb74ed610c56d90eb940.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps","ADMIN_GROUP_NAME":"ADMIN"}},"handler":"index.handler","role":{"Fn::GetAtt":["GameplayFnServiceRole9C9BF690","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"LeaderboardFn":{"id":"LeaderboardFn","path":"ApiStack/LeaderboardFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/LeaderboardFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/LeaderboardFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/LeaderboardFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/LeaderboardFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/LeaderboardFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LeaderboardFnServiceRoleDefaultPolicyA2682BE0","roles":[{"Ref":"LeaderboardFnServiceRoleB1EE89C6"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/LeaderboardFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/LeaderboardFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/LeaderboardFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/LeaderboardFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"2574b286b87caff4a9192c79cc9035f37f253b110a14daaf28c11fd42a547594.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","role":{"Fn::GetAtt":["LeaderboardFnServiceRoleB1EE89C6","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"PollsFn":{"id":"PollsFn","path":"ApiStack/PollsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/PollsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/PollsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/PollsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/PollsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/PollsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"PollsFnServiceRoleDefaultPolicyA9884FB0","roles":[{"Ref":"PollsFnServiceRole872F6029"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/PollsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/PollsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/PollsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/PollsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"386a833341c27d595993116d36b29eaec9a23292d68b8ee4316bcaad6fa1c9b8.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps","ADMIN_GROUP_NAME":"ADMIN"}},"handler":"index.handler","role":{"Fn::GetAtt":["PollsFnServiceRole872F6029","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ProfileFn":{"id":"ProfileFn","path":"ApiStack/ProfileFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/ProfileFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/ProfileFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/ProfileFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/ProfileFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ProfileFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ProfileFnServiceRoleDefaultPolicy3F833555","roles":[{"Ref":"ProfileFnServiceRole4C7CA582"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/ProfileFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/ProfileFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/ProfileFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/ProfileFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"9fd7423cb90e85818e31576edac007feab6576e4d9eed1261896c46fcf7d4518.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps","ADMIN_GROUP_NAME":"ADMIN"}},"handler":"index.handler","role":{"Fn::GetAtt":["ProfileFnServiceRole4C7CA582","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"GameEconomyFn":{"id":"GameEconomyFn","path":"ApiStack/GameEconomyFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/GameEconomyFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/GameEconomyFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/GameEconomyFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/GameEconomyFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/GameEconomyFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"GameEconomyFnServiceRoleDefaultPolicy20EA2DC0","roles":[{"Ref":"GameEconomyFnServiceRoleE0BCA8EF"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/GameEconomyFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/GameEconomyFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/GameEconomyFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/GameEconomyFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"a53943e4970f27df04f835d49a6a66027d78e9977c2af582baee9a8983015bfb.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps","ADMIN_GROUP_NAME":"ADMIN"}},"handler":"index.handler","role":{"Fn::GetAtt":["GameEconomyFnServiceRoleE0BCA8EF","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"GraphQlApiUrl":{"id":"GraphQlApiUrl","path":"ApiStack/GraphQlApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"GraphQlApiId":{"id":"GraphQlApiId","path":"ApiStack/GraphQlApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ApiStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"ApiStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}