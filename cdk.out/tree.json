{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.219.0"},"children":{"IdentityStack":{"id":"IdentityStack","path":"IdentityStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"UserPool":{"id":"UserPool","path":"IdentityStack/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityStack/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":12,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"email","mutable":false,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}}}},"WebClient":{"id":"WebClient","path":"IdentityStack/WebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityStack/WebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["openid","email","profile"],"callbackUrLs":["https://d1682i07dc1r3k.cloudfront.net/callback/index.html"],"explicitAuthFlows":["ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"logoutUrLs":["https://d1682i07dc1r3k.cloudfront.net/logout/index.html","https://d1682i07dc1r3k.cloudfront.net/logout/","https://d1682i07dc1r3k.cloudfront.net/"],"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"HostedUiDomain":{"id":"HostedUiDomain","path":"IdentityStack/HostedUiDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"stylingadventures-256673","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"IdentityPool":{"id":"IdentityPool","path":"IdentityStack/IdentityPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnIdentityPool","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::IdentityPool","aws:cdk:cloudformation:props":{"allowUnauthenticatedIdentities":false,"cognitoIdentityProviders":[{"clientId":{"Ref":"WebClient697086FD"},"providerName":{"Fn::GetAtt":["UserPool6BA7E5F2","ProviderName"]}}]}}},"CognitoUserPoolId":{"id":"CognitoUserPoolId","path":"IdentityStack/CognitoUserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CognitoWebClientId":{"id":"CognitoWebClientId","path":"IdentityStack/CognitoWebClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"IdentityPoolId":{"id":"IdentityPoolId","path":"IdentityStack/IdentityPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"HostedUiDomainName":{"id":"HostedUiDomainName","path":"IdentityStack/HostedUiDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"HostedUiLoginUrl":{"id":"HostedUiLoginUrl","path":"IdentityStack/HostedUiLoginUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"IdentityStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"IdentityStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"Exports":{"id":"Exports","path":"IdentityStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"UserPool6BA7E5F2\"}":{"id":"Output{\"Ref\":\"UserPool6BA7E5F2\"}","path":"IdentityStack/Exports/Output{\"Ref\":\"UserPool6BA7E5F2\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}","path":"IdentityStack/Exports/Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"IdentityStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"IdentityStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"WebStack":{"id":"WebStack","path":"WebStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"SiteBucket":{"id":"SiteBucket","path":"WebStack/SiteBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/SiteBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:cr-owned:ac28870b","value":"true"}]}}},"Policy":{"id":"Policy","path":"WebStack/SiteBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/SiteBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"SiteBucket397A1860"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["Oai29B41E8C","S3CanonicalUserId"]}},"Resource":[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["Oai29B41E8C","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"Oai":{"id":"Oai","path":"WebStack/Oai","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/Oai/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Allows CloudFront to reach the bucket"}}}}}},"DirIndexRewriteFn":{"id":"DirIndexRewriteFn","path":"WebStack/DirIndexRewriteFn","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Function","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/DirIndexRewriteFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Function","aws:cdk:cloudformation:props":{"autoPublish":true,"functionCode":"\nfunction handler(event) {\n  var req = event.request;\n  var uri = req.uri || '/';\n  if (uri.endsWith('/')) {\n    req.uri = uri + 'index.html';\n    return req;\n  }\n  if (uri.indexOf('.') === -1) {\n    req.uri = uri + '/index.html';\n    return req;\n  }\n  return req;\n}\n      ","functionConfig":{"comment":"us-east-1WebStackDirIndexRewriteFnB90BEA1B","runtime":"cloudfront-js-1.0"},"name":"us-east-1WebStackDirIndexRewriteFnB90BEA1B"}}}}},"Distribution":{"id":"Distribution","path":"WebStack/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.219.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"WebStack/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"WebStack/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["SiteBucket397A1860","RegionalDomainName"]},"id":"WebStackDistributionOrigin128332BA7","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"Oai29B41E8C"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"WebStackDistributionOrigin128332BA7","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"responseHeadersPolicyId":"67f7725c-6f97-4210-82d7-5512b31e9d03","viewerProtocolPolicy":"redirect-to-https","functionAssociations":[{"functionArn":{"Fn::GetAtt":["DirIndexRewriteFn951FA463","FunctionARN"]},"eventType":"viewer-request"}]},"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100"}}}}}},"DeploySite":{"id":"DeploySite","path":"WebStack/DeploySite","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.219.0"},"children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"WebStack/DeploySite/AwsCliLayer","constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.219.0","metadata":[]},"children":{"Code":{"id":"Code","path":"WebStack/DeploySite/AwsCliLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"WebStack/DeploySite/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"WebStack/DeploySite/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WebStack/DeploySite/AwsCliLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"c49d356cac773d491c5f7ac148995a1181498a8e289429f8612a7f7e3814f535.zip"},"description":"/opt/awscli/aws"}}}}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"WebStack/DeploySite/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.219.0","metadata":[]}},"Asset1":{"id":"Asset1","path":"WebStack/DeploySite/Asset1","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"WebStack/DeploySite/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"WebStack/DeploySite/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"CustomResource":{"id":"CustomResource","path":"WebStack/DeploySite/CustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"WebStack/DeploySite/CustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}}}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-637423256673-us-east-1"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::cdk-hnb659fds-assets-637423256673-us-east-1/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}]},{"Action":["cloudfront:GetInvalidation","cloudfront:CreateInvalidation"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265"}]}}}}}}},"Code":{"id":"Code","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WebStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"3423a042b818e31c1e34a19d6689ab2e5f9b70fcbe9e71df66f241b20a200bd9.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"handler":"index.handler","layers":[{"Ref":"DeploySiteAwsCliLayer88B0EBE2"}],"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265","Arn"]},"runtime":"python3.13","timeout":900}}}}},"CloudFrontDistributionDomainName":{"id":"CloudFrontDistributionDomainName","path":"WebStack/CloudFrontDistributionDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"StaticSiteBucketName":{"id":"StaticSiteBucketName","path":"WebStack/StaticSiteBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"WebStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"WebStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"Exports":{"id":"Exports","path":"WebStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Fn::GetAtt\":[\"Distribution830FAC52\",\"DomainName\"]}":{"id":"Output{\"Fn::GetAtt\":[\"Distribution830FAC52\",\"DomainName\"]}","path":"WebStack/Exports/Output{\"Fn::GetAtt\":[\"Distribution830FAC52\",\"DomainName\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WebStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WebStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"ApiStack":{"id":"ApiStack","path":"ApiStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"GraphqlApi":{"id":"GraphqlApi","path":"ApiStack/GraphqlApi","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.GraphqlApi","version":"2.219.0","metadata":[]},"children":{"ApiLogsRole":{"id":"ApiLogsRole","path":"ApiStack/GraphqlApi/ApiLogsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportApiLogsRole":{"id":"ImportApiLogsRole","path":"ApiStack/GraphqlApi/ApiLogsRole/ImportApiLogsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/GraphqlApi/ApiLogsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs"]]}]}}}}},"Resource":{"id":"Resource","path":"ApiStack/GraphqlApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLApi","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLApi","aws:cdk:cloudformation:props":{"authenticationType":"AMAZON_COGNITO_USER_POOLS","logConfig":{"cloudWatchLogsRoleArn":{"Fn::GetAtt":["GraphqlApiApiLogsRoleBB9E6BAD","Arn"]},"fieldLogLevel":"ERROR"},"name":"stylingadventures-api","userPoolConfig":{"userPoolId":{"Fn::ImportValue":"IdentityStack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"awsRegion":"us-east-1","defaultAction":"ALLOW"},"xrayEnabled":true}}},"Schema":{"id":"Schema","path":"ApiStack/GraphqlApi/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLSchema","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLSchema","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["GraphqlApi1B6CF24C","ApiId"]},"definition":"type Query {\r\n  hello: String!\r\n}\r\n\r\nschema {\r\n  query: Query\r\n}\r\n"}}},"LogRetention":{"id":"LogRetention","path":"ApiStack/GraphqlApi/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/GraphqlApi/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"LogGroup":{"id":"LogGroup","path":"ApiStack/GraphqlApi/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"None":{"id":"None","path":"ApiStack/GraphqlApi/None","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.NoneDataSource","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/GraphqlApi/None/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["GraphqlApi1B6CF24C","ApiId"]},"name":"None","type":"NONE"}}}}},"HelloResolver":{"id":"HelloResolver","path":"ApiStack/GraphqlApi/HelloResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/GraphqlApi/HelloResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["GraphqlApi1B6CF24C","ApiId"]},"dataSourceName":"None","fieldName":"hello","kind":"UNIT","requestMappingTemplate":"{ \"version\":\"2018-05-29\" }","responseMappingTemplate":"\"world\"","typeName":"Query"}}}}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"ApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Code":{"id":"Code","path":"ApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"ApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:PutRetentionPolicy","logs:DeleteRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"AppSyncApiId":{"id":"AppSyncApiId","path":"ApiStack/AppSyncApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"AppSyncUrl":{"id":"AppSyncUrl","path":"ApiStack/AppSyncUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ApiStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ApiStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"UploadsStack":{"id":"UploadsStack","path":"UploadsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"UploadsBucket":{"id":"UploadsBucket","path":"UploadsStack/UploadsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":90,"prefix":"users/","status":"Enabled"},{"expirationInDays":30,"prefix":"thumbnails/","status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}}},"Policy":{"id":"Policy","path":"UploadsStack/UploadsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"UploadsBucket5E5E9B64"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}}}},"ThumbDlq":{"id":"ThumbDlq","path":"UploadsStack/ThumbDlq","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbDlq/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600}}}}},"ThumbQueue":{"id":"ThumbQueue","path":"UploadsStack/ThumbQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["ThumbDlqB425C70E","Arn"]},"maxReceiveCount":5},"visibilityTimeout":60}}}}},"ThumbnailerFn":{"id":"ThumbnailerFn","path":"UploadsStack/ThumbnailerFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/ThumbnailerFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/ThumbnailerFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/ThumbnailerFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/ThumbnailerFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbnailerFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/users/*"]]}]},{"Action":["s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/thumbnails/*"]]}},{"Action":["sqs:ReceiveMessage","sqs:ChangeMessageVisibility","sqs:GetQueueUrl","sqs:DeleteMessage","sqs:GetQueueAttributes"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ThumbQueueB1CB3F96","Arn"]}}],"Version":"2012-10-17"},"policyName":"ThumbnailerFnServiceRoleDefaultPolicy3EC6C0A9","roles":[{"Ref":"ThumbnailerFnServiceRole368D8473"}]}}}}}}},"Code":{"id":"Code","path":"UploadsStack/ThumbnailerFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/ThumbnailerFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/ThumbnailerFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"UploadsStack/ThumbnailerFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"05495265241bde9f7a1391c64caff1b3ed6eaf94fb3d53e2626cdab4f65a2609.zip"},"environment":{"variables":{"BUCKET":{"Ref":"UploadsBucket5E5E9B64"}}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ThumbnailerFnServiceRole368D8473","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"UploadsStack/ThumbnailerFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbnailerFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"LogGroup":{"id":"LogGroup","path":"UploadsStack/ThumbnailerFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"SqsEventSource":{"id":"SqsEventSource","path":"UploadsStack/ThumbnailerFn/SqsEventSource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ThumbnailerFn/SqsEventSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":5,"enabled":true,"eventSourceArn":{"Fn::GetAtt":["ThumbQueueB1CB3F96","Arn"]},"functionName":{"Ref":"ThumbnailerFnEDCB14F0"}}}}}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Code":{"id":"Code","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:PutRetentionPolicy","logs:DeleteRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"UploadsStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"PresignFn":{"id":"PresignFn","path":"UploadsStack/PresignFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.219.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/PresignFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/PresignFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/PresignFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/PresignFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/PresignFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/users/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/thumbnails/*"]]}]},{"Action":"s3:ListBucket","Condition":{"StringLike":{"s3:prefix":["users/*"]}},"Effect":"Allow","Resource":{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]}},{"Action":["sqs:SendMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ThumbQueueB1CB3F96","Arn"]}}],"Version":"2012-10-17"},"policyName":"PresignFnServiceRoleDefaultPolicyA1C82940","roles":[{"Ref":"PresignFnServiceRole01C8BCF6"}]}}}}}}},"Code":{"id":"Code","path":"UploadsStack/PresignFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.219.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/PresignFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/PresignFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.219.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"UploadsStack/PresignFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"c11295a39c44123c77c092790ec1917913b3f1e2c4267a91aa28e2124bf60ef4.zip"},"environment":{"variables":{"BUCKET":{"Ref":"UploadsBucket5E5E9B64"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttDistribution830FAC52DomainNameBEB09E30"}]]},"THUMB_QUEUE_URL":{"Ref":"ThumbQueueB1CB3F96"}}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["PresignFnServiceRole01C8BCF6","Arn"]},"runtime":"nodejs18.x","timeout":15}}},"LogRetention":{"id":"LogRetention","path":"UploadsStack/PresignFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"UploadsStack/PresignFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"LogGroup":{"id":"LogGroup","path":"UploadsStack/PresignFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"UploadsApi":{"id":"UploadsApi","path":"UploadsStack/UploadsApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"Uploads API"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"UploadsStack/UploadsApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"UploadsStack/UploadsApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"UploadsStack/UploadsApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["UploadsApiCloudWatchRole6FE18421","Arn"]}}}},"Deployment":{"id":"Deployment","path":"UploadsStack/UploadsApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"UploadsStack/UploadsApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"UploadsApiDeployment4A67E04Cffa4e575e09aba28ee4cb256267c57a5"},"restApiId":{"Ref":"UploadsApiF6E592E7"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"UploadsStack/UploadsApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"Default":{"id":"Default","path":"UploadsStack/UploadsApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.219.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"prod":{"id":"prod","path":"UploadsStack/UploadsApi/Default/prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"pathPart":"prod","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/prod/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"UploadsApiprod12BA7432"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"list":{"id":"list","path":"UploadsStack/UploadsApi/Default/prod/list","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/list/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"UploadsApiprod12BA7432"},"pathPart":"list","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/prod/list/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/list/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"UploadsApiprodlist1C6588AA"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"GET":{"id":"GET","path":"UploadsStack/UploadsApi/Default/prod/list/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.GET..prod.list":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.GET..prod.list","path":"UploadsStack/UploadsApi/Default/prod/list/GET/ApiPermission.UploadsStackUploadsApiC6DB0904.GET..prod.list","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/GET/prod/list"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.GET..prod.list":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.GET..prod.list","path":"UploadsStack/UploadsApi/Default/prod/list/GET/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.GET..prod.list","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/GET/prod/list"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/list/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"ApiAuthAB1782FE"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApiprodlist1C6588AA"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}},"presign":{"id":"presign","path":"UploadsStack/UploadsApi/Default/prod/presign","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/presign/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"UploadsApiprod12BA7432"},"pathPart":"presign","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/prod/presign/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/presign/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"UploadsApiprodpresign47A764B0"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"POST":{"id":"POST","path":"UploadsStack/UploadsApi/Default/prod/presign/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..prod.presign":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..prod.presign","path":"UploadsStack/UploadsApi/Default/prod/presign/POST/ApiPermission.UploadsStackUploadsApiC6DB0904.POST..prod.presign","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/POST/prod/presign"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..prod.presign":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..prod.presign","path":"UploadsStack/UploadsApi/Default/prod/presign/POST/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..prod.presign","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/POST/prod/presign"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/presign/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"ApiAuthAB1782FE"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApiprodpresign47A764B0"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}},"delete":{"id":"delete","path":"UploadsStack/UploadsApi/Default/prod/delete","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/delete/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"UploadsApiprod12BA7432"},"pathPart":"delete","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/prod/delete/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/delete/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"UploadsApiproddeleteB47ED429"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"DELETE":{"id":"DELETE","path":"UploadsStack/UploadsApi/Default/prod/delete/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.DELETE..prod.delete":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.DELETE..prod.delete","path":"UploadsStack/UploadsApi/Default/prod/delete/DELETE/ApiPermission.UploadsStackUploadsApiC6DB0904.DELETE..prod.delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/DELETE/prod/delete"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.DELETE..prod.delete":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.DELETE..prod.delete","path":"UploadsStack/UploadsApi/Default/prod/delete/DELETE/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.DELETE..prod.delete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/DELETE/prod/delete"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/delete/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"ApiAuthAB1782FE"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApiproddeleteB47ED429"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}},"thumb":{"id":"thumb","path":"UploadsStack/UploadsApi/Default/prod/thumb","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/thumb/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"UploadsApiprod12BA7432"},"pathPart":"thumb","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/prod/thumb/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/thumb/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Authorization,Content-Type,X-Amz-Date,X-Amz-Security-Token,X-Api-Key'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"UploadsApiprodthumbEF58DBF1"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"POST":{"id":"POST","path":"UploadsStack/UploadsApi/Default/prod/thumb/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.219.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..prod.thumb":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..prod.thumb","path":"UploadsStack/UploadsApi/Default/prod/thumb/POST/ApiPermission.UploadsStackUploadsApiC6DB0904.POST..prod.thumb","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/POST/prod/thumb"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..prod.thumb":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..prod.thumb","path":"UploadsStack/UploadsApi/Default/prod/thumb/POST/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..prod.thumb","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/POST/prod/thumb"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/prod/thumb/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"ApiAuthAB1782FE"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["PresignFnA38D425B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApiprodthumbEF58DBF1"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}}}}}},"Default4XX":{"id":"Default4XX","path":"UploadsStack/UploadsApi/Default4XX","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default4XX/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.Access-Control-Allow-Headers":"'*'","gatewayresponse.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'"},"responseType":"DEFAULT_4XX","restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"Default5XX":{"id":"Default5XX","path":"UploadsStack/UploadsApi/Default5XX","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.GatewayResponse","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default5XX/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnGatewayResponse","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::GatewayResponse","aws:cdk:cloudformation:props":{"responseParameters":{"gatewayresponse.header.Access-Control-Allow-Origin":"'*'","gatewayresponse.header.Access-Control-Allow-Headers":"'*'","gatewayresponse.header.Access-Control-Allow-Methods":"'GET,POST,DELETE,OPTIONS'"},"responseType":"DEFAULT_5XX","restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}},"ApiAuth":{"id":"ApiAuth","path":"UploadsStack/ApiAuth","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CognitoUserPoolsAuthorizer","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ApiAuth/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"identitySource":"method.request.header.Authorization","name":"UploadsStackApiAuth9D004E89","providerArns":[{"Fn::ImportValue":"IdentityStack:ExportsOutputFnGetAttUserPool6BA7E5F2Arn686ACC00"}],"restApiId":{"Ref":"UploadsApiF6E592E7"},"type":"COGNITO_USER_POOLS"}}}}},"UploadsApiUrl":{"id":"UploadsApiUrl","path":"UploadsStack/UploadsApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"UploadsBucketName":{"id":"UploadsBucketName","path":"UploadsStack/UploadsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ThumbQueueUrl":{"id":"ThumbQueueUrl","path":"UploadsStack/ThumbQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"UploadsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"UploadsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"UploadsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"UploadsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}