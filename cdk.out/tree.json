{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.223.0"},"children":{"WebStack":{"id":"WebStack","path":"WebStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"WebBucket":{"id":"WebBucket","path":"WebStack/WebBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/WebBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Env","value":"dev"}]}}},"Policy":{"id":"Policy","path":"WebStack/WebBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/WebBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WebBucket12880F5B"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}]},{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["WebDistributionOrigin1S3Origin242B188A","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"WebStack/WebBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"WebStack/WebBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"WebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.223.0"},"children":{"Staging":{"id":"Staging","path":"WebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"Role":{"id":"Role","path":"WebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}},"Handler":{"id":"Handler","path":"WebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"WebDistribution":{"id":"WebDistribution","path":"WebStack/WebDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.223.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"WebStack/WebDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"S3Origin":{"id":"S3Origin","path":"WebStack/WebDistribution/Origin1/S3Origin","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WebStack/WebDistribution/Origin1/S3Origin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for WebStackWebDistributionOrigin1AAF54134"}}}}}}}},"Resource":{"id":"Resource","path":"WebStack/WebDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["WebBucket12880F5B","RegionalDomainName"]},"id":"WebStackWebDistributionOrigin1AAF54134","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"WebDistributionOrigin1S3Origin242B188A"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"WebStackWebDistributionOrigin1AAF54134","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"WebBucketName":{"id":"WebBucketName","path":"WebStack/WebBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CloudFrontDistributionId":{"id":"CloudFrontDistributionId","path":"WebStack/CloudFrontDistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CloudFrontDomainName":{"id":"CloudFrontDomainName","path":"WebStack/CloudFrontDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"WebStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"WebStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"WebStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"WebDistribution59C46482\",\"DomainName\"]}":{"id":"Output{\"Fn::GetAtt\":[\"WebDistribution59C46482\",\"DomainName\"]}","path":"WebStack/Exports/Output{\"Fn::GetAtt\":[\"WebDistribution59C46482\",\"DomainName\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WebStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WebStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"DataStack":{"id":"DataStack","path":"DataStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"AppTable":{"id":"AppTable","path":"DataStack/AppTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DataStack/AppTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"},{"attributeName":"gsi1pk","attributeType":"S"},{"attributeName":"gsi1sk","attributeType":"S"},{"attributeName":"gsi2pk","attributeType":"S"},{"attributeName":"gsi2sk","attributeType":"S"},{"attributeName":"rawMediaKey","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi1","keySchema":[{"attributeName":"gsi1pk","keyType":"HASH"},{"attributeName":"gsi1sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"gsi2","keySchema":[{"attributeName":"gsi2pk","keyType":"HASH"},{"attributeName":"gsi2sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"rawMediaKeyIndex","keySchema":[{"attributeName":"rawMediaKey","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"sa-dev-app","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"DataStack/AppTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"CDKMetadata":{"id":"CDKMetadata","path":"DataStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"DataStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"DataStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"AppTable815C50BC\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"AppTable815C50BC\",\"Arn\"]}","path":"DataStack/Exports/Output{\"Fn::GetAtt\":[\"AppTable815C50BC\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"AppTable815C50BC\"}":{"id":"Output{\"Ref\":\"AppTable815C50BC\"}","path":"DataStack/Exports/Output{\"Ref\":\"AppTable815C50BC\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"DataStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"DataStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"IdentityV2Stack":{"id":"IdentityV2Stack","path":"IdentityV2Stack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"UserPool":{"id":"UserPool","path":"IdentityV2Stack/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityV2Stack/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","lambdaConfig":{"preTokenGeneration":{"Fn::GetAtt":["PreTokenGenerationFnAE0DA59F","Arn"]}},"policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"schema":[{"name":"email","mutable":false,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"App":"stylingadventures","Env":"dev"},"usernameAttributes":["email"],"userPoolName":"sa2-dev-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"UserPoolDomain":{"id":"UserPoolDomain","path":"IdentityV2Stack/UserPool/UserPoolDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityV2Stack/UserPool/UserPoolDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"sa2-dev-637423256673","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"PreTokenGenerationCognito":{"id":"PreTokenGenerationCognito","path":"IdentityV2Stack/UserPool/PreTokenGenerationCognito","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PreTokenGenerationFnAE0DA59F","Arn"]},"principal":"cognito-idp.amazonaws.com","sourceArn":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}}}}}},"LegacyUserPoolArnExport":{"id":"LegacyUserPoolArnExport","path":"IdentityV2Stack/LegacyUserPoolArnExport","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"FanGroup":{"id":"FanGroup","path":"IdentityV2Stack/FanGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Default free fan tier","groupName":"FAN","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"BestieGroup":{"id":"BestieGroup","path":"IdentityV2Stack/BestieGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Paid bestie tier with perks","groupName":"BESTIE","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"CollabGroup":{"id":"CollabGroup","path":"IdentityV2Stack/CollabGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Collaborators / brand partners","groupName":"COLLAB","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"AdminGroup":{"id":"AdminGroup","path":"IdentityV2Stack/AdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Platform admins","groupName":"ADMIN","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"CreatorGroup":{"id":"CreatorGroup","path":"IdentityV2Stack/CreatorGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Pro creators with access to creator tools","groupName":"CREATOR","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"PrimeGroup":{"id":"PrimeGroup","path":"IdentityV2Stack/PrimeGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Prime Studios / internal prod","groupName":"PRIME","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"PreTokenGenerationFn":{"id":"PreTokenGenerationFn","path":"IdentityV2Stack/PreTokenGenerationFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"IdentityV2Stack/PreTokenGenerationFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"IdentityV2Stack/PreTokenGenerationFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"IdentityV2Stack/PreTokenGenerationFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"IdentityV2Stack/PreTokenGenerationFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityV2Stack/PreTokenGenerationFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"PreTokenGenerationFnServiceRoleDefaultPolicy2600C3F9","roles":[{"Ref":"PreTokenGenerationFnServiceRole5BC76271"}]}}}}}}},"Code":{"id":"Code","path":"IdentityV2Stack/PreTokenGenerationFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"IdentityV2Stack/PreTokenGenerationFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"IdentityV2Stack/PreTokenGenerationFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"IdentityV2Stack/PreTokenGenerationFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"a2b81f5f8da32a2db0eeea9a303b29112fca2221d812a337cd75268a2859e70f.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk"}},"handler":"index.handler","role":{"Fn::GetAtt":["PreTokenGenerationFnServiceRole5BC76271","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"UserPoolClient":{"id":"UserPoolClient","path":"IdentityV2Stack/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityV2Stack/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":[{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]}],"clientName":"sa2-dev-web-client","generateSecret":false,"logoutUrLs":[{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]}],"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"SeedAdminFn":{"id":"SeedAdminFn","path":"IdentityV2Stack/SeedAdminFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"IdentityV2Stack/SeedAdminFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"IdentityV2Stack/SeedAdminFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"IdentityV2Stack/SeedAdminFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"IdentityV2Stack/SeedAdminFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityV2Stack/SeedAdminFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:ListUsers","cognito-idp:AdminGetUser","cognito-idp:AdminCreateUser","cognito-idp:AdminUpdateUserAttributes","cognito-idp:AdminAddUserToGroup"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}}],"Version":"2012-10-17"},"policyName":"SeedAdminFnServiceRoleDefaultPolicyA869BB2F","roles":[{"Ref":"SeedAdminFnServiceRole609DDA24"}]}}}}}}},"Code":{"id":"Code","path":"IdentityV2Stack/SeedAdminFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"IdentityV2Stack/SeedAdminFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"IdentityV2Stack/SeedAdminFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"IdentityV2Stack/SeedAdminFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"6dc7c82161fc57f9239b49ffdfa90d60b98baa103f19d9a1d097bde06ef279ef.zip"},"environment":{"variables":{"USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"ADMIN_SEED_EMAILS":"evonifoster@yahoo.com","ADMIN_SEED_GROUPS":"ADMIN"}},"handler":"index.handler","role":{"Fn::GetAtt":["SeedAdminFnServiceRole609DDA24","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"SeedAdminCustomResource":{"id":"SeedAdminCustomResource","path":"IdentityV2Stack/SeedAdminCustomResource","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.223.0"},"children":{"Provider":{"id":"Provider","path":"IdentityV2Stack/SeedAdminCustomResource/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"IdentityV2Stack/SeedAdminCustomResource/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"IdentityV2Stack/SeedAdminCustomResource/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"IdentityV2Stack/SeedAdminCustomResource/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"IdentityV2Stack/SeedAdminCustomResource/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":{"Fn::GetAtt":["SeedAdminFn71928945","Arn"]}}],"Version":"2012-10-17"},"policyName":"SeedAdminCustomResourceCustomResourcePolicyCE7D2B1B","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}},"AWS679f53fac002430cb0da5b7982bd2287":{"id":"AWS679f53fac002430cb0da5b7982bd2287","path":"IdentityV2Stack/AWS679f53fac002430cb0da5b7982bd2287","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"IdentityV2Stack/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"IdentityV2Stack/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"IdentityV2Stack/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Code":{"id":"Code","path":"IdentityV2Stack/AWS679f53fac002430cb0da5b7982bd2287/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"IdentityV2Stack/AWS679f53fac002430cb0da5b7982bd2287/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"IdentityV2Stack/AWS679f53fac002430cb0da5b7982bd2287/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"IdentityV2Stack/AWS679f53fac002430cb0da5b7982bd2287/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"8d5e97812d0036272ba1fd5bb8772ff51f4712e58c75507e4a0db242bf680f1d.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":120}}}}},"UserPoolId":{"id":"UserPoolId","path":"IdentityV2Stack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"IdentityV2Stack/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"WebOrigin":{"id":"WebOrigin","path":"IdentityV2Stack/WebOrigin","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"IdentityV2Stack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"IdentityV2Stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"IdentityV2Stack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"UserPool6BA7E5F2\"}":{"id":"Output{\"Ref\":\"UserPool6BA7E5F2\"}","path":"IdentityV2Stack/Exports/Output{\"Ref\":\"UserPool6BA7E5F2\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"IdentityV2Stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"IdentityV2Stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"WorkflowsV2Stack":{"id":"WorkflowsV2Stack","path":"WorkflowsV2Stack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"ApprovalNoop":{"id":"ApprovalNoop","path":"WorkflowsV2Stack/ApprovalNoop","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"ApprovalStateMachine":{"id":"ApprovalStateMachine","path":"WorkflowsV2Stack/ApprovalStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"WorkflowsV2Stack/ApprovalStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"WorkflowsV2Stack/ApprovalStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/ApprovalStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/ApprovalStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":"{\"StartAt\":\"ApprovalNoop\",\"States\":{\"ApprovalNoop\":{\"Type\":\"Pass\",\"Comment\":\"Closet approval workflow placeholder – expand to multi-step moderation later\",\"End\":true}}}","roleArn":{"Fn::GetAtt":["ApprovalStateMachineRoleE1EEC7A5","Arn"]},"stateMachineName":"SA2-ClosetApproval-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"BgChangeNoop":{"id":"BgChangeNoop","path":"WorkflowsV2Stack/BgChangeNoop","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"BackgroundChangeStateMachine":{"id":"BackgroundChangeStateMachine","path":"WorkflowsV2Stack/BackgroundChangeStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"WorkflowsV2Stack/BackgroundChangeStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"WorkflowsV2Stack/BackgroundChangeStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/BackgroundChangeStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/BackgroundChangeStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":"{\"StartAt\":\"BgChangeNoop\",\"States\":{\"BgChangeNoop\":{\"Type\":\"Pass\",\"Comment\":\"Background change workflow placeholder – expand to moderation + processing later\",\"End\":true}}}","roleArn":{"Fn::GetAtt":["BackgroundChangeStateMachineRole7FBE53CC","Arn"]},"stateMachineName":"SA2-BackgroundChange-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"StoryPublishNoop":{"id":"StoryPublishNoop","path":"WorkflowsV2Stack/StoryPublishNoop","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"StoryPublishStateMachine":{"id":"StoryPublishStateMachine","path":"WorkflowsV2Stack/StoryPublishStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"WorkflowsV2Stack/StoryPublishStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"WorkflowsV2Stack/StoryPublishStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/StoryPublishStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/StoryPublishStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":"{\"StartAt\":\"StoryPublishNoop\",\"States\":{\"StoryPublishNoop\":{\"Type\":\"Pass\",\"Comment\":\"Story publish workflow placeholder – expand to scheduling / publishing / syndication later\",\"End\":true}}}","roleArn":{"Fn::GetAtt":["StoryPublishStateMachineRole46B5253B","Arn"]},"stateMachineName":"SA2-StoryPublish-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"SocialPulseLoadGoalCompassFn":{"id":"SocialPulseLoadGoalCompassFn","path":"WorkflowsV2Stack/SocialPulseLoadGoalCompassFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WorkflowsV2Stack/SocialPulseLoadGoalCompassFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WorkflowsV2Stack/SocialPulseLoadGoalCompassFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulseLoadGoalCompassFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WorkflowsV2Stack/SocialPulseLoadGoalCompassFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulseLoadGoalCompassFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SocialPulseLoadGoalCompassFnServiceRoleDefaultPolicyABE6B740","roles":[{"Ref":"SocialPulseLoadGoalCompassFnServiceRoleE4878467"}]}}}}}}},"Code":{"id":"Code","path":"WorkflowsV2Stack/SocialPulseLoadGoalCompassFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WorkflowsV2Stack/SocialPulseLoadGoalCompassFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WorkflowsV2Stack/SocialPulseLoadGoalCompassFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulseLoadGoalCompassFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"c55bde3aa5d08cbba5f1fc254d1c36a2b5d815cf617637fb9fb3a932df93abc0.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk"}},"handler":"index.handler","role":{"Fn::GetAtt":["SocialPulseLoadGoalCompassFnServiceRoleE4878467","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"SocialPulseFetchTrendsFn":{"id":"SocialPulseFetchTrendsFn","path":"WorkflowsV2Stack/SocialPulseFetchTrendsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WorkflowsV2Stack/SocialPulseFetchTrendsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WorkflowsV2Stack/SocialPulseFetchTrendsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulseFetchTrendsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Code":{"id":"Code","path":"WorkflowsV2Stack/SocialPulseFetchTrendsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WorkflowsV2Stack/SocialPulseFetchTrendsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WorkflowsV2Stack/SocialPulseFetchTrendsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulseFetchTrendsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"b2a765865ed9bf5082f05eec3febb231c8967b63ffccf9a9bf46373cacab4a64.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"}}},"handler":"index.handler","role":{"Fn::GetAtt":["SocialPulseFetchTrendsFnServiceRoleF6A18CC6","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"SocialPulseGenerateIdeasFn":{"id":"SocialPulseGenerateIdeasFn","path":"WorkflowsV2Stack/SocialPulseGenerateIdeasFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WorkflowsV2Stack/SocialPulseGenerateIdeasFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WorkflowsV2Stack/SocialPulseGenerateIdeasFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulseGenerateIdeasFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WorkflowsV2Stack/SocialPulseGenerateIdeasFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulseGenerateIdeasFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SocialPulseGenerateIdeasFnServiceRoleDefaultPolicy72895EBA","roles":[{"Ref":"SocialPulseGenerateIdeasFnServiceRoleE206E9D7"}]}}}}}}},"Code":{"id":"Code","path":"WorkflowsV2Stack/SocialPulseGenerateIdeasFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WorkflowsV2Stack/SocialPulseGenerateIdeasFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WorkflowsV2Stack/SocialPulseGenerateIdeasFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulseGenerateIdeasFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"1b9fc782548734629751e3990e41e85b7bf7f76b3b52e8331a74fd6391d477b4.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"}}},"handler":"index.handler","role":{"Fn::GetAtt":["SocialPulseGenerateIdeasFnServiceRoleE206E9D7","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"SocialPulsePersistFn":{"id":"SocialPulsePersistFn","path":"WorkflowsV2Stack/SocialPulsePersistFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WorkflowsV2Stack/SocialPulsePersistFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WorkflowsV2Stack/SocialPulsePersistFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulsePersistFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WorkflowsV2Stack/SocialPulsePersistFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulsePersistFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SocialPulsePersistFnServiceRoleDefaultPolicy1CDAB9C3","roles":[{"Ref":"SocialPulsePersistFnServiceRole389FD43D"}]}}}}}}},"Code":{"id":"Code","path":"WorkflowsV2Stack/SocialPulsePersistFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WorkflowsV2Stack/SocialPulsePersistFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WorkflowsV2Stack/SocialPulsePersistFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulsePersistFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"f9f0b090b0587b51299a6ae4b02f61a5116189d7fc8a3a8e15abdc154e67bce0.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk"}},"handler":"index.handler","role":{"Fn::GetAtt":["SocialPulsePersistFnServiceRole389FD43D","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"SP_LoadGoalCompass":{"id":"SP_LoadGoalCompass","path":"WorkflowsV2Stack/SP_LoadGoalCompass","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"SP_FetchExternalTrends":{"id":"SP_FetchExternalTrends","path":"WorkflowsV2Stack/SP_FetchExternalTrends","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"SP_GenerateContentIdeas":{"id":"SP_GenerateContentIdeas","path":"WorkflowsV2Stack/SP_GenerateContentIdeas","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"SP_PersistPulse":{"id":"SP_PersistPulse","path":"WorkflowsV2Stack/SP_PersistPulse","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"SocialPulseExpressStateMachine":{"id":"SocialPulseExpressStateMachine","path":"WorkflowsV2Stack/SocialPulseExpressStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"WorkflowsV2Stack/SocialPulseExpressStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"WorkflowsV2Stack/SocialPulseExpressStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulseExpressStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WorkflowsV2Stack/SocialPulseExpressStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulseExpressStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["SocialPulseLoadGoalCompassFn2AC9F9FF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SocialPulseLoadGoalCompassFn2AC9F9FF","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["SocialPulseFetchTrendsFnBA4D9FDB","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SocialPulseFetchTrendsFnBA4D9FDB","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["SocialPulseGenerateIdeasFnC5C411E0","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SocialPulseGenerateIdeasFnC5C411E0","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["SocialPulsePersistFnB5620F49","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SocialPulsePersistFnB5620F49","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"SocialPulseExpressStateMachineRoleDefaultPolicy778E99B2","roles":[{"Ref":"SocialPulseExpressStateMachineRole0E82D593"}]}}}}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/SocialPulseExpressStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"SP_LoadGoalCompass\",\"States\":{\"SP_LoadGoalCompass\":{\"Next\":\"SP_FetchExternalTrends\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["SocialPulseLoadGoalCompassFn2AC9F9FF","Arn"]},"\"},\"SP_FetchExternalTrends\":{\"Next\":\"SP_GenerateContentIdeas\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["SocialPulseFetchTrendsFnBA4D9FDB","Arn"]},"\"},\"SP_GenerateContentIdeas\":{\"Next\":\"SP_PersistPulse\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["SocialPulseGenerateIdeasFnC5C411E0","Arn"]},"\"},\"SP_PersistPulse\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["SocialPulsePersistFnB5620F49","Arn"]},"\"}}}"]]},"roleArn":{"Fn::GetAtt":["SocialPulseExpressStateMachineRole0E82D593","Arn"]},"stateMachineName":"SA2-SocialPulse-dev","stateMachineType":"EXPRESS","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"GoalCompassAnalyticsFn":{"id":"GoalCompassAnalyticsFn","path":"WorkflowsV2Stack/GoalCompassAnalyticsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WorkflowsV2Stack/GoalCompassAnalyticsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WorkflowsV2Stack/GoalCompassAnalyticsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/GoalCompassAnalyticsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WorkflowsV2Stack/GoalCompassAnalyticsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsV2Stack/GoalCompassAnalyticsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"GoalCompassAnalyticsFnServiceRoleDefaultPolicy46111CC9","roles":[{"Ref":"GoalCompassAnalyticsFnServiceRole83FBBC63"}]}}}}}}},"Code":{"id":"Code","path":"WorkflowsV2Stack/GoalCompassAnalyticsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WorkflowsV2Stack/GoalCompassAnalyticsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WorkflowsV2Stack/GoalCompassAnalyticsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/GoalCompassAnalyticsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"e2da3e1204ad7815c069c10730a5e803e5f67a8c4f93e8b82095145d7d99d768.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk"}},"handler":"index.handler","role":{"Fn::GetAtt":["GoalCompassAnalyticsFnServiceRole83FBBC63","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":20}}}}},"EPR_UpdateGoalCompassMix":{"id":"EPR_UpdateGoalCompassMix","path":"WorkflowsV2Stack/EPR_UpdateGoalCompassMix","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"EPR_ForEachCreator":{"id":"EPR_ForEachCreator","path":"WorkflowsV2Stack/EPR_ForEachCreator","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Map","version":"2.223.0"}},"EmotionalPrEngineStateMachine":{"id":"EmotionalPrEngineStateMachine","path":"WorkflowsV2Stack/EmotionalPrEngineStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"WorkflowsV2Stack/EmotionalPrEngineStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"WorkflowsV2Stack/EmotionalPrEngineStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/EmotionalPrEngineStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WorkflowsV2Stack/EmotionalPrEngineStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsV2Stack/EmotionalPrEngineStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["GoalCompassAnalyticsFn1F2F8E7F","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["GoalCompassAnalyticsFn1F2F8E7F","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"EmotionalPrEngineStateMachineRoleDefaultPolicyB98A98A9","roles":[{"Ref":"EmotionalPrEngineStateMachineRole46BAA50F"}]}}}}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/EmotionalPrEngineStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"EPR_ForEachCreator\",\"States\":{\"EPR_ForEachCreator\":{\"Type\":\"Map\",\"End\":true,\"Parameters\":{\"creatorId.$\":\"$$.Map.Item.Value\"},\"ItemsPath\":\"$.creatorIds\",\"Iterator\":{\"StartAt\":\"EPR_UpdateGoalCompassMix\",\"States\":{\"EPR_UpdateGoalCompassMix\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["GoalCompassAnalyticsFn1F2F8E7F","Arn"]},"\"}}}}}}"]]},"roleArn":{"Fn::GetAtt":["EmotionalPrEngineStateMachineRole46BAA50F","Arn"]},"stateMachineName":"SA2-EmotionalPrEngine-dev","stateMachineType":"STANDARD","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ApprovalStateMachineArn":{"id":"ApprovalStateMachineArn","path":"WorkflowsV2Stack/ApprovalStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"BgChangeStateMachineArn":{"id":"BgChangeStateMachineArn","path":"WorkflowsV2Stack/BgChangeStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"StoryPublishStateMachineArn":{"id":"StoryPublishStateMachineArn","path":"WorkflowsV2Stack/StoryPublishStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"SocialPulseStateMachineArn":{"id":"SocialPulseStateMachineArn","path":"WorkflowsV2Stack/SocialPulseStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"EmotionalPrEngineStateMachineArn":{"id":"EmotionalPrEngineStateMachineArn","path":"WorkflowsV2Stack/EmotionalPrEngineStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CompleteApprovalFn":{"id":"CompleteApprovalFn","path":"WorkflowsV2Stack/CompleteApprovalFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WorkflowsV2Stack/CompleteApprovalFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WorkflowsV2Stack/CompleteApprovalFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/CompleteApprovalFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WorkflowsV2Stack/CompleteApprovalFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsV2Stack/CompleteApprovalFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["states:SendTaskSuccess","states:SendTaskFailure"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CompleteApprovalFnServiceRoleDefaultPolicy55DBC62F","roles":[{"Ref":"CompleteApprovalFnServiceRole699167D1"}]}}}}}}},"Code":{"id":"Code","path":"WorkflowsV2Stack/CompleteApprovalFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WorkflowsV2Stack/CompleteApprovalFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WorkflowsV2Stack/CompleteApprovalFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/CompleteApprovalFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"12b7efeff4371d3095b15d077954d6f157e4df161512a2890896890b2bba693b.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk"}},"handler":"index.handler","role":{"Fn::GetAtt":["CompleteApprovalFnServiceRole699167D1","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AdminApprovalApi":{"id":"AdminApprovalApi","path":"WorkflowsV2Stack/AdminApprovalApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsV2Stack/AdminApprovalApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"stylingadventures-admin-approval","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"WorkflowsV2Stack/AdminApprovalApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"WorkflowsV2Stack/AdminApprovalApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/AdminApprovalApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Account":{"id":"Account","path":"WorkflowsV2Stack/AdminApprovalApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["AdminApprovalApiCloudWatchRole4D3B8FEA","Arn"]}}}},"Deployment":{"id":"Deployment","path":"WorkflowsV2Stack/AdminApprovalApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsV2Stack/AdminApprovalApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"AdminApprovalApi02AA5079"}}}}}},"DeploymentStage.v1":{"id":"DeploymentStage.v1","path":"WorkflowsV2Stack/AdminApprovalApi/DeploymentStage.v1","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsV2Stack/AdminApprovalApi/DeploymentStage.v1/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"AdminApprovalApiDeployment50ABF1120f201bbc6374851b7bda7f082d2df10a"},"restApiId":{"Ref":"AdminApprovalApi02AA5079"},"stageName":"v1","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Endpoint":{"id":"Endpoint","path":"WorkflowsV2Stack/AdminApprovalApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Default":{"id":"Default","path":"WorkflowsV2Stack/AdminApprovalApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.223.0","metadata":[]},"children":{"approvals":{"id":"approvals","path":"WorkflowsV2Stack/AdminApprovalApi/Default/approvals","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WorkflowsV2Stack/AdminApprovalApi/Default/approvals/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["AdminApprovalApi02AA5079","RootResourceId"]},"pathPart":"approvals","restApiId":{"Ref":"AdminApprovalApi02AA5079"}}}},"POST":{"id":"POST","path":"WorkflowsV2Stack/AdminApprovalApi/Default/approvals/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"ApiPermission.WorkflowsV2StackAdminApprovalApi5211F9FE.POST..approvals":{"id":"ApiPermission.WorkflowsV2StackAdminApprovalApi5211F9FE.POST..approvals","path":"WorkflowsV2Stack/AdminApprovalApi/Default/approvals/POST/ApiPermission.WorkflowsV2StackAdminApprovalApi5211F9FE.POST..approvals","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CompleteApprovalFn8C071B55","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"AdminApprovalApi02AA5079"},"/",{"Ref":"AdminApprovalApiDeploymentStagev15E0A9F93"},"/POST/approvals"]]}}}},"ApiPermission.Test.WorkflowsV2StackAdminApprovalApi5211F9FE.POST..approvals":{"id":"ApiPermission.Test.WorkflowsV2StackAdminApprovalApi5211F9FE.POST..approvals","path":"WorkflowsV2Stack/AdminApprovalApi/Default/approvals/POST/ApiPermission.Test.WorkflowsV2StackAdminApprovalApi5211F9FE.POST..approvals","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CompleteApprovalFn8C071B55","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"AdminApprovalApi02AA5079"},"/test-invoke-stage/POST/approvals"]]}}}},"Resource":{"id":"Resource","path":"WorkflowsV2Stack/AdminApprovalApi/Default/approvals/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["CompleteApprovalFn8C071B55","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"AdminApprovalApiapprovals187E4E7E"},"restApiId":{"Ref":"AdminApprovalApi02AA5079"}}}}}}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"WorkflowsV2Stack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"WorkflowsV2Stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"WorkflowsV2Stack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"SocialPulseExpressStateMachine66F63342\"}":{"id":"Output{\"Ref\":\"SocialPulseExpressStateMachine66F63342\"}","path":"WorkflowsV2Stack/Exports/Output{\"Ref\":\"SocialPulseExpressStateMachine66F63342\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WorkflowsV2Stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WorkflowsV2Stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"UploadsStack":{"id":"UploadsStack","path":"UploadsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"UploadsBucket":{"id":"UploadsBucket","path":"UploadsStack/UploadsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"corsConfiguration":{"corsRules":[{"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST","DELETE"],"allowedOrigins":[{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"http://localhost:5173"],"exposedHeaders":["ETag"]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Env","value":"dev"}]}}},"Policy":{"id":"Policy","path":"UploadsStack/UploadsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"UploadsBucket5E5E9B64"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"UploadsStack/UploadsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"UploadsStack/UploadsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Notifications":{"id":"Notifications","path":"UploadsStack/UploadsBucket/Notifications","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"AllowBucketNotificationsToUploadsStackClosetBgWorkerFn0F23D923":{"id":"AllowBucketNotificationsToUploadsStackClosetBgWorkerFn0F23D923","path":"UploadsStack/UploadsBucket/AllowBucketNotificationsToUploadsStackClosetBgWorkerFn0F23D923","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ClosetBgWorkerFn832AECE4","Arn"]},"principal":"s3.amazonaws.com","sourceAccount":"637423256673","sourceArn":{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"UploadsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.223.0"},"children":{"Staging":{"id":"Staging","path":"UploadsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"Role":{"id":"Role","path":"UploadsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}},"Handler":{"id":"Handler","path":"UploadsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"UploadsBucketName":{"id":"UploadsBucketName","path":"UploadsStack/UploadsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"UploadApiFn":{"id":"UploadApiFn","path":"UploadsStack/UploadApiFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/UploadApiFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/UploadApiFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/UploadApiFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/UploadApiFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadApiFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"UploadApiFnServiceRoleDefaultPolicy12879165","roles":[{"Ref":"UploadApiFnServiceRoleF47EDB66"}]}}}}}}},"Code":{"id":"Code","path":"UploadsStack/UploadApiFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/UploadApiFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/UploadApiFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadApiFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"5f995b7b53292763f5dcba8e9b6ca0e27790093e091814353f2e4326936d2237.zip"},"environment":{"variables":{"UPLOADS_BUCKET_NAME":{"Ref":"UploadsBucket5E5E9B64"}}},"handler":"index.handler","role":{"Fn::GetAtt":["UploadApiFnServiceRoleF47EDB66","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"UploadsApi":{"id":"UploadsApi","path":"UploadsStack/UploadsApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"SA-UploadsApi-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"UploadsStack/UploadsApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"UploadsStack/UploadsApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Account":{"id":"Account","path":"UploadsStack/UploadsApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["UploadsApiCloudWatchRole6FE18421","Arn"]}}}},"Deployment":{"id":"Deployment","path":"UploadsStack/UploadsApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"UploadsStack/UploadsApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"UploadsApiDeployment4A67E04Cd75a0206d7f9f939ebfbac2326b899ea"},"restApiId":{"Ref":"UploadsApiF6E592E7"},"stageName":"prod","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Endpoint":{"id":"Endpoint","path":"UploadsStack/UploadsApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Default":{"id":"Default","path":"UploadsStack/UploadsApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.223.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":{"Fn::Join":["",["'https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"},"'"]]},"method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"presign":{"id":"presign","path":"UploadsStack/UploadsApi/Default/presign","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/presign/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"pathPart":"presign","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/presign/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/presign/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":{"Fn::Join":["",["'https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"},"'"]]},"method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"UploadsApipresignE1161A2C"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"POST":{"id":"POST","path":"UploadsStack/UploadsApi/Default/presign/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..presign":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..presign","path":"UploadsStack/UploadsApi/Default/presign/POST/ApiPermission.UploadsStackUploadsApiC6DB0904.POST..presign","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/POST/presign"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..presign":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..presign","path":"UploadsStack/UploadsApi/Default/presign/POST/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..presign","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/POST/presign"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/presign/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApipresignE1161A2C"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}},"get":{"id":"get","path":"UploadsStack/UploadsApi/Default/get","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/get/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["UploadsApiF6E592E7","RootResourceId"]},"pathPart":"get","restApiId":{"Ref":"UploadsApiF6E592E7"}}}},"OPTIONS":{"id":"OPTIONS","path":"UploadsStack/UploadsApi/Default/get/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/get/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":{"Fn::Join":["",["'https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"},"'"]]},"method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"},"responseTemplates":{"application/json":"#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"UploadsApiget25FE2824"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}},"POST":{"id":"POST","path":"UploadsStack/UploadsApi/Default/get/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..get":{"id":"ApiPermission.UploadsStackUploadsApiC6DB0904.POST..get","path":"UploadsStack/UploadsApi/Default/get/POST/ApiPermission.UploadsStackUploadsApiC6DB0904.POST..get","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/",{"Ref":"UploadsApiDeploymentStageprod1839106B"},"/POST/get"]]}}}},"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..get":{"id":"ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..get","path":"UploadsStack/UploadsApi/Default/get/POST/ApiPermission.Test.UploadsStackUploadsApiC6DB0904.POST..get","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"UploadsApiF6E592E7"},"/test-invoke-stage/POST/get"]]}}}},"Resource":{"id":"Resource","path":"UploadsStack/UploadsApi/Default/get/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UploadApiFn7FE3717E","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"UploadsApiget25FE2824"},"restApiId":{"Ref":"UploadsApiF6E592E7"}}}}}}}}}}}},"UploadsApiUrl":{"id":"UploadsApiUrl","path":"UploadsStack/UploadsApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ClosetBgWorkerFn":{"id":"ClosetBgWorkerFn","path":"UploadsStack/ClosetBgWorkerFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"UploadsStack/ClosetBgWorkerFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"UploadsStack/ClosetBgWorkerFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/ClosetBgWorkerFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/ClosetBgWorkerFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/ClosetBgWorkerFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ClosetBgWorkerFnServiceRoleDefaultPolicy28A47F60","roles":[{"Ref":"ClosetBgWorkerFnServiceRole4798FE70"}]}}}}}}},"Code":{"id":"Code","path":"UploadsStack/ClosetBgWorkerFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"UploadsStack/ClosetBgWorkerFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"UploadsStack/ClosetBgWorkerFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"UploadsStack/ClosetBgWorkerFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"d7c829a309feef4b67b7376df7f4d187061d7c336128eeaa9fb9cca1d4a4885e.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"RAW_MEDIA_GSI_NAME":"rawMediaKeyIndex","OUTPUT_BUCKET":{"Ref":"UploadsBucket5E5E9B64"}}},"handler":"index.handler","role":{"Fn::GetAtt":["ClosetBgWorkerFnServiceRole4798FE70","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Role":{"id":"Role","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]}}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}}}}}}},"Resource":{"id":"Resource","path":"UploadsStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"CDKMetadata":{"id":"CDKMetadata","path":"UploadsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"UploadsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"UploadsStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"UploadsBucket5E5E9B64\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"UploadsBucket5E5E9B64\",\"Arn\"]}","path":"UploadsStack/Exports/Output{\"Fn::GetAtt\":[\"UploadsBucket5E5E9B64\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"UploadsBucket5E5E9B64\"}":{"id":"Output{\"Ref\":\"UploadsBucket5E5E9B64\"}","path":"UploadsStack/Exports/Output{\"Ref\":\"UploadsBucket5E5E9B64\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"UploadsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"UploadsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"BestiesClosetStack":{"id":"BestiesClosetStack","path":"BestiesClosetStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"AdminAuditTable":{"id":"AdminAuditTable","path":"BestiesClosetStack/AdminAuditTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/AdminAuditTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"BestiesClosetStack/AdminAuditTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"ClosetOpsTopic":{"id":"ClosetOpsTopic","path":"BestiesClosetStack/ClosetOpsTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetOpsTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"Closet Ops Notifications","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ClosetOpsTopicArn":{"id":"ClosetOpsTopicArn","path":"BestiesClosetStack/ClosetOpsTopicArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ClosetApprovalDLQ":{"id":"ClosetApprovalDLQ","path":"BestiesClosetStack/ClosetApprovalDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetApprovalDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"visibilityTimeout":60}}},"Policy":{"id":"Policy","path":"BestiesClosetStack/ClosetApprovalDLQ/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetApprovalDLQ/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:SendMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl"],"Condition":{"ArnEquals":{"aws:SourceArn":{"Fn::GetAtt":["ClosetApprovalExecutionFailedToDLQ09FF699B","Arn"]}}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["ClosetApprovalDLQ736F075F","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"ClosetApprovalDLQ736F075F"}]}}}}}}},"ImageSegmentationFn":{"id":"ImageSegmentationFn","path":"BestiesClosetStack/ImageSegmentationFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ImageSegmentationFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ImageSegmentationFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ImageSegmentationFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ImageSegmentationFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ImageSegmentationFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/closet/*"]]}},{"Action":"s3:PutObject","Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/closet/processed/*"]]}}],"Version":"2012-10-17"},"policyName":"ImageSegmentationFnServiceRoleDefaultPolicyB8F731BA","roles":[{"Ref":"ImageSegmentationFnServiceRoleCA334768"}]}}}}}}},"AssetImage":{"id":"AssetImage","path":"BestiesClosetStack/ImageSegmentationFn/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.223.0"},"children":{"Staging":{"id":"Staging","path":"BestiesClosetStack/ImageSegmentationFn/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"Repository":{"id":"Repository","path":"BestiesClosetStack/ImageSegmentationFn/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ImageSegmentationFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"imageUri":{"Fn::Sub":"637423256673.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-637423256673-us-east-1:5104fd45846950ea1b60da26d397af0986cb525269165dd6c774d01c2ba49d99"}},"environment":{"variables":{"UPLOADS_BUCKET_NAME":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"PROCESSED_PREFIX":"closet/processed"}},"ephemeralStorage":{"size":4096},"memorySize":3008,"packageType":"Image","role":{"Fn::GetAtt":["ImageSegmentationFnServiceRoleCA334768","Arn"]},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":120}}}}},"ModerationFn":{"id":"ModerationFn","path":"BestiesClosetStack/ModerationFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ModerationFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ModerationFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerationFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ModerationFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerationFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ModerationFnServiceRoleDefaultPolicy9C9AC1C0","roles":[{"Ref":"ModerationFnServiceRoleBF6ED484"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ModerationFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ModerationFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ModerationFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerationFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"c2920f16056fa2c537644143b6b83ed743129b90534bfd802dc05235ab2ccaed.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps","BUCKET_NAME":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"}}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ModerationFnServiceRoleBF6ED484","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"PiiCheckFn":{"id":"PiiCheckFn","path":"BestiesClosetStack/PiiCheckFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/PiiCheckFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/PiiCheckFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/PiiCheckFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/PiiCheckFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/PiiCheckFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"PiiCheckFnServiceRoleDefaultPolicy5209AB8F","roles":[{"Ref":"PiiCheckFnServiceRole84F31904"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/PiiCheckFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/PiiCheckFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/PiiCheckFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/PiiCheckFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"3bde3e9d95b60e7b775f5d71ce73b9b0b1971b69e5bbabca8e918ff4b7333ff8.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["PiiCheckFnServiceRole84F31904","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"PublishClosetItemFn":{"id":"PublishClosetItemFn","path":"BestiesClosetStack/PublishClosetItemFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/PublishClosetItemFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/PublishClosetItemFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/PublishClosetItemFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/PublishClosetItemFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/PublishClosetItemFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"PublishClosetItemFnServiceRoleDefaultPolicy4282ADC3","roles":[{"Ref":"PublishClosetItemFnServiceRole9997268D"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/PublishClosetItemFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/PublishClosetItemFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/PublishClosetItemFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/PublishClosetItemFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"26ed460570bfcd68736f55c567cad7cb907631781e2ce15482a754a1450cd195.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps","BUCKET_NAME":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"PUBLISHED_PREFIX":"published"}},"handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["PublishClosetItemFnServiceRole9997268D","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":60}}}}},"NotifyAdminFn":{"id":"NotifyAdminFn","path":"BestiesClosetStack/NotifyAdminFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/NotifyAdminFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/NotifyAdminFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/NotifyAdminFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/NotifyAdminFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/NotifyAdminFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"NotifyAdminFnServiceRoleDefaultPolicyBA423BD5","roles":[{"Ref":"NotifyAdminFnServiceRole14F33905"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/NotifyAdminFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/NotifyAdminFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/NotifyAdminFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/NotifyAdminFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"780294498bc411ee7a87bb77836ab9932f8019db05dd3eb8060061e9d708d6af.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["NotifyAdminFnServiceRole14F33905","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"ExpireApprovalFn":{"id":"ExpireApprovalFn","path":"BestiesClosetStack/ExpireApprovalFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ExpireApprovalFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ExpireApprovalFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ExpireApprovalFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ExpireApprovalFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ExpireApprovalFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ExpireApprovalFnServiceRoleDefaultPolicy65417781","roles":[{"Ref":"ExpireApprovalFnServiceRole40D6B513"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ExpireApprovalFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ExpireApprovalFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ExpireApprovalFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ExpireApprovalFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"07816386b5ec99ab2b9a97ac6e544056415e344e219a9ac126df2fa01ebb5059.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["ExpireApprovalFnServiceRole40D6B513","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"ExpireClosetApprovalsFn":{"id":"ExpireClosetApprovalsFn","path":"BestiesClosetStack/ExpireClosetApprovalsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ExpireClosetApprovalsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ExpireClosetApprovalsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ExpireClosetApprovalsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ExpireClosetApprovalsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ExpireClosetApprovalsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AdminAuditTable2543903C","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"ClosetOpsTopicE34D076D"}},{"Action":["states:SendTaskSuccess","events:PutEvents"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ExpireClosetApprovalsFnServiceRoleDefaultPolicy821887CD","roles":[{"Ref":"ExpireClosetApprovalsFnServiceRoleDA11CC78"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ExpireClosetApprovalsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ExpireClosetApprovalsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ExpireClosetApprovalsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ExpireClosetApprovalsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"127434ea93ff268f997cc3a14c604d83c34f3f177b8ea03440b587b950314192.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps","AUDIT_TABLE_NAME":{"Ref":"AdminAuditTable2543903C"},"NOTIFY_TOPIC_ARN":{"Ref":"ClosetOpsTopicE34D076D"},"MAX_PER_RUN":"25"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ExpireClosetApprovalsFnServiceRoleDA11CC78","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"ExpireClosetApprovalsSchedule":{"id":"ExpireClosetApprovalsSchedule","path":"BestiesClosetStack/ExpireClosetApprovalsSchedule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ExpireClosetApprovalsSchedule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"scheduleExpression":"rate(5 minutes)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["ExpireClosetApprovalsFn6CE6ADC2","Arn"]}}]}}},"AllowEventRuleBestiesClosetStackExpireClosetApprovalsFn46C0A13F":{"id":"AllowEventRuleBestiesClosetStackExpireClosetApprovalsFn46C0A13F","path":"BestiesClosetStack/ExpireClosetApprovalsSchedule/AllowEventRuleBestiesClosetStackExpireClosetApprovalsFn46C0A13F","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ExpireClosetApprovalsFn6CE6ADC2","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["ExpireClosetApprovalsSchedule554150AC","Arn"]}}}}}},"ClosetDlqProcessorFn":{"id":"ClosetDlqProcessorFn","path":"BestiesClosetStack/ClosetDlqProcessorFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ClosetDlqProcessorFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ClosetDlqProcessorFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetDlqProcessorFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ClosetDlqProcessorFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetDlqProcessorFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AdminAuditTable2543903C","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"ClosetOpsTopicE34D076D"}},{"Action":["sqs:ReceiveMessage","sqs:ChangeMessageVisibility","sqs:GetQueueUrl","sqs:DeleteMessage","sqs:GetQueueAttributes"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ClosetApprovalDLQ736F075F","Arn"]}},{"Action":"events:PutEvents","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ClosetDlqProcessorFnServiceRoleDefaultPolicy2BD3A172","roles":[{"Ref":"ClosetDlqProcessorFnServiceRoleE2E435C2"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ClosetDlqProcessorFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ClosetDlqProcessorFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ClosetDlqProcessorFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetDlqProcessorFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"2d10a5fead39d9e06a03b7ba286f8b1add4d7ece7b2d60cca3291caa41977806.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps","AUDIT_TABLE_NAME":{"Ref":"AdminAuditTable2543903C"},"NOTIFY_TOPIC_ARN":{"Ref":"ClosetOpsTopicE34D076D"}}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ClosetDlqProcessorFnServiceRoleE2E435C2","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}},"DlqEventSource":{"id":"DlqEventSource","path":"BestiesClosetStack/ClosetDlqProcessorFn/DlqEventSource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetDlqProcessorFn/DlqEventSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":10,"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventSourceArn":{"Fn::GetAtt":["ClosetApprovalDLQ736F075F","Arn"]},"functionName":{"Ref":"ClosetDlqProcessorFn5FC330B3"}}}}}}}},"ClosetApprovalExecutionFailedToDLQ":{"id":"ClosetApprovalExecutionFailedToDLQ","path":"BestiesClosetStack/ClosetApprovalExecutionFailedToDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetApprovalExecutionFailedToDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventPattern":{"source":["aws.states"],"detail-type":["Step Functions Execution Status Change"],"detail":{"status":["FAILED","TIMED_OUT","ABORTED"]}},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["ClosetApprovalDLQ736F075F","Arn"]}}]}}}}},"ClosetHappyPathDashboard":{"id":"ClosetHappyPathDashboard","path":"BestiesClosetStack/ClosetHappyPathDashboard","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetHappyPathDashboard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":"{\"widgets\":[]}","dashboardName":"sa-BestiesClosetStack-closet-happy-path"}}}}},"ApprovalDlqAlarm":{"id":"ApprovalDlqAlarm","path":"BestiesClosetStack/ApprovalDlqAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ApprovalDlqAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"ClosetOpsTopicE34D076D"}],"alarmDescription":"Closet approval DLQ has messages","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"QueueName","value":{"Fn::GetAtt":["ClosetApprovalDLQ736F075F","QueueName"]}}],"evaluationPeriods":1,"metricName":"ApproximateNumberOfMessagesVisible","namespace":"AWS/SQS","period":300,"statistic":"Maximum","threshold":1}}}}},"ExpireApprovalsErrors":{"id":"ExpireApprovalsErrors","path":"BestiesClosetStack/ExpireApprovalsErrors","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ExpireApprovalsErrors/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"ClosetOpsTopicE34D076D"}],"alarmDescription":"ExpireClosetApprovalsFn is erroring","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"ExpireClosetApprovalsFn6CE6ADC2"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":1}}}}},"DlqProcessorErrors":{"id":"DlqProcessorErrors","path":"BestiesClosetStack/DlqProcessorErrors","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/DlqProcessorErrors/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"ClosetOpsTopicE34D076D"}],"alarmDescription":"ClosetDlqProcessorFn is erroring","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"ClosetDlqProcessorFn5FC330B3"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":1}}}}},"FanNormalizeFromItem":{"id":"FanNormalizeFromItem","path":"BestiesClosetStack/FanNormalizeFromItem","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"FanNormalizeFromRoot":{"id":"FanNormalizeFromRoot","path":"BestiesClosetStack/FanNormalizeFromRoot","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"FanHasItemObject?":{"id":"FanHasItemObject?","path":"BestiesClosetStack/FanHasItemObject?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"FanIdsOk_NoRaw":{"id":"FanIdsOk_NoRaw","path":"BestiesClosetStack/FanIdsOk_NoRaw","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"FanIdsOk_WithRaw":{"id":"FanIdsOk_WithRaw","path":"BestiesClosetStack/FanIdsOk_WithRaw","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"FanUseUserIdAsOwnerSub_NoRaw":{"id":"FanUseUserIdAsOwnerSub_NoRaw","path":"BestiesClosetStack/FanUseUserIdAsOwnerSub_NoRaw","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"FanUseUserIdAsOwnerSub_WithRaw":{"id":"FanUseUserIdAsOwnerSub_WithRaw","path":"BestiesClosetStack/FanUseUserIdAsOwnerSub_WithRaw","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"FanUseOwnerSubAsUserId_NoRaw":{"id":"FanUseOwnerSubAsUserId_NoRaw","path":"BestiesClosetStack/FanUseOwnerSubAsUserId_NoRaw","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"FanUseOwnerSubAsUserId_WithRaw":{"id":"FanUseOwnerSubAsUserId_WithRaw","path":"BestiesClosetStack/FanUseOwnerSubAsUserId_WithRaw","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"FanHasRawMediaKey_ForIdsOk?":{"id":"FanHasRawMediaKey_ForIdsOk?","path":"BestiesClosetStack/FanHasRawMediaKey_ForIdsOk?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"FanHasRawMediaKey_ForUserIdAsOwnerSub?":{"id":"FanHasRawMediaKey_ForUserIdAsOwnerSub?","path":"BestiesClosetStack/FanHasRawMediaKey_ForUserIdAsOwnerSub?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"FanHasRawMediaKey_ForOwnerSubAsUserId?":{"id":"FanHasRawMediaKey_ForOwnerSubAsUserId?","path":"BestiesClosetStack/FanHasRawMediaKey_ForOwnerSubAsUserId?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"FanEnsureIds?":{"id":"FanEnsureIds?","path":"BestiesClosetStack/FanEnsureIds?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"FanMissingIdentity":{"id":"FanMissingIdentity","path":"BestiesClosetStack/FanMissingIdentity","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Fail","version":"2.223.0"}},"FanUseItemS3Key":{"id":"FanUseItemS3Key","path":"BestiesClosetStack/FanUseItemS3Key","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"FanUseItemRawMediaKey":{"id":"FanUseItemRawMediaKey","path":"BestiesClosetStack/FanUseItemRawMediaKey","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"FanPickUploadKey?":{"id":"FanPickUploadKey?","path":"BestiesClosetStack/FanPickUploadKey?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"FanMissingUploadKey":{"id":"FanMissingUploadKey","path":"BestiesClosetStack/FanMissingUploadKey","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Fail","version":"2.223.0"}},"FanSegmentOutfit":{"id":"FanSegmentOutfit","path":"BestiesClosetStack/FanSegmentOutfit","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"FanModerateImage":{"id":"FanModerateImage","path":"BestiesClosetStack/FanModerateImage","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"FanCheckPII":{"id":"FanCheckPII","path":"BestiesClosetStack/FanCheckPII","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"FanExpireApproval":{"id":"FanExpireApproval","path":"BestiesClosetStack/FanExpireApproval","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"FanNotifyAdminForApproval":{"id":"FanNotifyAdminForApproval","path":"BestiesClosetStack/FanNotifyAdminForApproval","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"FanPublishClosetItem":{"id":"FanPublishClosetItem","path":"BestiesClosetStack/FanPublishClosetItem","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"FanRejected":{"id":"FanRejected","path":"BestiesClosetStack/FanRejected","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Fail","version":"2.223.0"}},"FanPublished":{"id":"FanPublished","path":"BestiesClosetStack/FanPublished","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Succeed","version":"2.223.0"}},"FanAdminApproved?":{"id":"FanAdminApproved?","path":"BestiesClosetStack/FanAdminApproved?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"FanWasExpired?":{"id":"FanWasExpired?","path":"BestiesClosetStack/FanWasExpired?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"FanExpired":{"id":"FanExpired","path":"BestiesClosetStack/FanExpired","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Fail","version":"2.223.0"}},"ClosetUploadApprovalSM":{"id":"ClosetUploadApprovalSM","path":"BestiesClosetStack/ClosetUploadApprovalSM","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"BestiesClosetStack/ClosetUploadApprovalSM/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"BestiesClosetStack/ClosetUploadApprovalSM/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetUploadApprovalSM/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ClosetUploadApprovalSM/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetUploadApprovalSM/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ImageSegmentationFn0414CF98","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ImageSegmentationFn0414CF98","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["NotifyAdminFnFDB24FD6","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["NotifyAdminFnFDB24FD6","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PublishClosetItemFn8BF46E04","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PublishClosetItemFn8BF46E04","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ExpireApprovalFnFC082AFD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ExpireApprovalFnFC082AFD","Arn"]},":*"]]}]},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ClosetUploadApprovalSMRoleDefaultPolicyFFBBCD8F","roles":[{"Ref":"ClosetUploadApprovalSMRole38D45F6B"}]}}}}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetUploadApprovalSM/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"FanHasItemObject?\",\"States\":{\"FanHasItemObject?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.item\",\"IsPresent\":true,\"Next\":\"FanNormalizeFromItem\"}],\"Default\":\"FanNormalizeFromRoot\"},\"FanNormalizeFromRoot\":{\"Type\":\"Pass\",\"Parameters\":{\"item\":{\"s3Key.$\":\"$.s3Key\",\"rawMediaKey.$\":\"$.rawMediaKey\",\"id.$\":\"$.id\",\"ownerSub.$\":\"$.ownerSub\",\"userId.$\":\"$.userId\"}},\"Next\":\"FanEnsureIds?\"},\"FanEnsureIds?\":{\"Type\":\"Choice\",\"Choices\":[{\"And\":[{\"Variable\":\"$.item.userId\",\"IsPresent\":true},{\"Variable\":\"$.item.ownerSub\",\"IsPresent\":true}],\"Next\":\"FanHasRawMediaKey_ForIdsOk?\"},{\"And\":[{\"Variable\":\"$.item.userId\",\"IsPresent\":true},{\"Not\":{\"Variable\":\"$.item.ownerSub\",\"IsPresent\":true}}],\"Next\":\"FanHasRawMediaKey_ForUserIdAsOwnerSub?\"},{\"And\":[{\"Not\":{\"Variable\":\"$.item.userId\",\"IsPresent\":true}},{\"Variable\":\"$.item.ownerSub\",\"IsPresent\":true}],\"Next\":\"FanHasRawMediaKey_ForOwnerSubAsUserId?\"}],\"Default\":\"FanMissingIdentity\"},\"FanNormalizeFromItem\":{\"Type\":\"Pass\",\"Parameters\":{\"item.$\":\"$.item\"},\"Next\":\"FanEnsureIds?\"},\"FanMissingIdentity\":{\"Type\":\"Fail\",\"Cause\":\"Missing userId/ownerSub\"},\"FanHasRawMediaKey_ForIdsOk?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.item.rawMediaKey\",\"IsPresent\":true,\"Next\":\"FanIdsOk_WithRaw\"}],\"Default\":\"FanIdsOk_NoRaw\"},\"FanIdsOk_NoRaw\":{\"Type\":\"Pass\",\"Parameters\":{\"item\":{\"id.$\":\"$.item.id\",\"s3Key.$\":\"$.item.s3Key\",\"ownerSub.$\":\"$.item.ownerSub\",\"userId.$\":\"$.item.userId\"}},\"Next\":\"FanPickUploadKey?\"},\"FanPickUploadKey?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.item.s3Key\",\"IsPresent\":true,\"Next\":\"FanUseItemS3Key\"},{\"Variable\":\"$.item.rawMediaKey\",\"IsPresent\":true,\"Next\":\"FanUseItemRawMediaKey\"}],\"Default\":\"FanMissingUploadKey\"},\"FanIdsOk_WithRaw\":{\"Type\":\"Pass\",\"Parameters\":{\"item\":{\"id.$\":\"$.item.id\",\"s3Key.$\":\"$.item.s3Key\",\"rawMediaKey.$\":\"$.item.rawMediaKey\",\"ownerSub.$\":\"$.item.ownerSub\",\"userId.$\":\"$.item.userId\"}},\"Next\":\"FanPickUploadKey?\"},\"FanUseUserIdAsOwnerSub_NoRaw\":{\"Type\":\"Pass\",\"Parameters\":{\"item\":{\"id.$\":\"$.item.id\",\"s3Key.$\":\"$.item.s3Key\",\"userId.$\":\"$.item.userId\",\"ownerSub.$\":\"$.item.userId\"}},\"Next\":\"FanPickUploadKey?\"},\"FanUseUserIdAsOwnerSub_WithRaw\":{\"Type\":\"Pass\",\"Parameters\":{\"item\":{\"id.$\":\"$.item.id\",\"s3Key.$\":\"$.item.s3Key\",\"rawMediaKey.$\":\"$.item.rawMediaKey\",\"userId.$\":\"$.item.userId\",\"ownerSub.$\":\"$.item.userId\"}},\"Next\":\"FanPickUploadKey?\"},\"FanHasRawMediaKey_ForUserIdAsOwnerSub?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.item.rawMediaKey\",\"IsPresent\":true,\"Next\":\"FanUseUserIdAsOwnerSub_WithRaw\"}],\"Default\":\"FanUseUserIdAsOwnerSub_NoRaw\"},\"FanUseOwnerSubAsUserId_NoRaw\":{\"Type\":\"Pass\",\"Parameters\":{\"item\":{\"id.$\":\"$.item.id\",\"s3Key.$\":\"$.item.s3Key\",\"ownerSub.$\":\"$.item.ownerSub\",\"userId.$\":\"$.item.ownerSub\"}},\"Next\":\"FanPickUploadKey?\"},\"FanUseOwnerSubAsUserId_WithRaw\":{\"Type\":\"Pass\",\"Parameters\":{\"item\":{\"id.$\":\"$.item.id\",\"s3Key.$\":\"$.item.s3Key\",\"rawMediaKey.$\":\"$.item.rawMediaKey\",\"ownerSub.$\":\"$.item.ownerSub\",\"userId.$\":\"$.item.ownerSub\"}},\"Next\":\"FanPickUploadKey?\"},\"FanHasRawMediaKey_ForOwnerSubAsUserId?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.item.rawMediaKey\",\"IsPresent\":true,\"Next\":\"FanUseOwnerSubAsUserId_WithRaw\"}],\"Default\":\"FanUseOwnerSubAsUserId_NoRaw\"},\"FanMissingUploadKey\":{\"Type\":\"Fail\",\"Cause\":\"Missing s3Key/rawMediaKey\"},\"FanUseItemS3Key\":{\"Type\":\"Pass\",\"Parameters\":{\"item\":{\"id.$\":\"$.item.id\",\"ownerSub.$\":\"$.item.ownerSub\",\"userId.$\":\"$.item.userId\",\"s3Key.$\":\"$.item.s3Key\"}},\"Next\":\"FanSegmentOutfit\"},\"FanSegmentOutfit\":{\"Next\":\"FanModerateImage\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.segmentation\",\"Resource\":\"",{"Fn::GetAtt":["ImageSegmentationFn0414CF98","Arn"]},"\",\"Parameters\":{\"item\":{\"s3Key.$\":\"$.item.s3Key\",\"bucket\":\"",{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"\"}}},\"FanUseItemRawMediaKey\":{\"Type\":\"Pass\",\"Parameters\":{\"item\":{\"id.$\":\"$.item.id\",\"ownerSub.$\":\"$.item.ownerSub\",\"userId.$\":\"$.item.userId\",\"s3Key.$\":\"$.item.rawMediaKey\"}},\"Next\":\"FanSegmentOutfit\"},\"FanModerateImage\":{\"Next\":\"FanCheckPII\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.moderation\",\"Resource\":\"",{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},"\",\"Parameters\":\"$\"},\"FanCheckPII\":{\"Next\":\"FanNotifyAdminForApproval\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.pii\",\"Resource\":\"",{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},"\",\"Parameters\":\"$\"},\"FanNotifyAdminForApproval\":{\"Next\":\"FanWasExpired?\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Catch\":[{\"ErrorEquals\":[\"States.Timeout\"],\"ResultPath\":\"$.notifyError\",\"Next\":\"FanExpireApproval\"}],\"Type\":\"Task\",\"TimeoutSeconds\":86400,\"ResultPath\":\"$.admin\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke.waitForTaskToken\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["NotifyAdminFnFDB24FD6","Arn"]},"\",\"Payload\":{\"token.$\":\"$$.Task.Token\",\"item.$\":\"$.item\",\"processedImageKey.$\":\"$.segmentation.outputKey\",\"moderation.$\":\"$.moderation\",\"pii.$\":\"$.pii\"}}},\"FanWasExpired?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.expired\",\"IsPresent\":true,\"Next\":\"FanExpired\"}],\"Default\":\"FanAdminApproved?\"},\"FanAdminApproved?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.admin.decision\",\"StringEquals\":\"APPROVE\",\"Next\":\"FanPublishClosetItem\"},{\"Variable\":\"$.admin.decision\",\"StringEquals\":\"REJECT\",\"Next\":\"FanRejected\"}],\"Default\":\"FanRejected\"},\"FanRejected\":{\"Type\":\"Fail\",\"Cause\":\"RejectedByAdmin\"},\"FanPublishClosetItem\":{\"Next\":\"FanPublished\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.published\",\"Resource\":\"",{"Fn::GetAtt":["PublishClosetItemFn8BF46E04","Arn"]},"\",\"Parameters\":{\"approvalId.$\":\"$.item.id\",\"item.$\":\"$.item\",\"segmentation.$\":\"$.segmentation\",\"moderation.$\":\"$.moderation\",\"pii.$\":\"$.pii\",\"admin.$\":\"$.admin\"}},\"FanPublished\":{\"Type\":\"Succeed\"},\"FanExpired\":{\"Type\":\"Fail\",\"Cause\":\"ApprovalExpired\"},\"FanExpireApproval\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.expired\",\"Resource\":\"",{"Fn::GetAtt":["ExpireApprovalFnFC082AFD","Arn"]},"\",\"Parameters\":{\"approvalId.$\":\"$.item.id\",\"reason\":\"Timed out waiting for admin approval\"}}}}"]]},"roleArn":{"Fn::GetAtt":["ClosetUploadApprovalSMRole38D45F6B","Arn"]},"stateMachineType":"STANDARD","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"ClosetUploadApprovalSMFailedAlarm":{"id":"ClosetUploadApprovalSMFailedAlarm","path":"BestiesClosetStack/ClosetUploadApprovalSMFailedAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetUploadApprovalSMFailedAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"ClosetOpsTopicE34D076D"}],"alarmDescription":"ClosetUploadApprovalSM failed executions > 0","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"StateMachineArn","value":{"Ref":"ClosetUploadApprovalSM46D354C9"}}],"evaluationPeriods":1,"metricName":"ExecutionsFailed","namespace":"AWS/States","period":300,"statistic":"Sum","threshold":1}}}}},"BestieSegmentOutfit":{"id":"BestieSegmentOutfit","path":"BestiesClosetStack/BestieSegmentOutfit","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"BestieModerateImage":{"id":"BestieModerateImage","path":"BestiesClosetStack/BestieModerateImage","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"BestieCheckPII":{"id":"BestieCheckPII","path":"BestiesClosetStack/BestieCheckPII","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"BestiePublishClosetItem":{"id":"BestiePublishClosetItem","path":"BestiesClosetStack/BestiePublishClosetItem","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"BestieChecksPassed?":{"id":"BestieChecksPassed?","path":"BestiesClosetStack/BestieChecksPassed?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"BestiePublished":{"id":"BestiePublished","path":"BestiesClosetStack/BestiePublished","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Succeed","version":"2.223.0"}},"BestieRejected":{"id":"BestieRejected","path":"BestiesClosetStack/BestieRejected","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Fail","version":"2.223.0"}},"BestieClosetUploadAutoPublishSM":{"id":"BestieClosetUploadAutoPublishSM","path":"BestiesClosetStack/BestieClosetUploadAutoPublishSM","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"BestiesClosetStack/BestieClosetUploadAutoPublishSM/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"BestiesClosetStack/BestieClosetUploadAutoPublishSM/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/BestieClosetUploadAutoPublishSM/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/BestieClosetUploadAutoPublishSM/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BestieClosetUploadAutoPublishSM/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ImageSegmentationFn0414CF98","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ImageSegmentationFn0414CF98","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PublishClosetItemFn8BF46E04","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PublishClosetItemFn8BF46E04","Arn"]},":*"]]}]},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BestieClosetUploadAutoPublishSMRoleDefaultPolicy928FB5B7","roles":[{"Ref":"BestieClosetUploadAutoPublishSMRole45F297D7"}]}}}}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/BestieClosetUploadAutoPublishSM/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"BestieSegmentOutfit\",\"States\":{\"BestieSegmentOutfit\":{\"Next\":\"BestieModerateImage\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.segmentation\",\"Resource\":\"",{"Fn::GetAtt":["ImageSegmentationFn0414CF98","Arn"]},"\",\"Parameters\":{\"item\":{\"s3Key.$\":\"$.item.s3Key\",\"bucket\":\"",{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"\"}}},\"BestieModerateImage\":{\"Next\":\"BestieCheckPII\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.moderation\",\"Resource\":\"",{"Fn::GetAtt":["ModerationFn7E78A67D","Arn"]},"\",\"Parameters\":\"$\"},\"BestieCheckPII\":{\"Next\":\"BestieChecksPassed?\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.pii\",\"Resource\":\"",{"Fn::GetAtt":["PiiCheckFnF52DF218","Arn"]},"\",\"Parameters\":\"$\"},\"BestieChecksPassed?\":{\"Type\":\"Choice\",\"Choices\":[{\"And\":[{\"Or\":[{\"Not\":{\"Variable\":\"$.moderation\",\"IsPresent\":true}},{\"Variable\":\"$.moderation.ok\",\"BooleanEquals\":true}]},{\"Or\":[{\"Not\":{\"Variable\":\"$.pii\",\"IsPresent\":true}},{\"And\":[{\"Variable\":\"$.pii.ok\",\"BooleanEquals\":true},{\"Or\":[{\"Not\":{\"Variable\":\"$.pii.hasPii\",\"IsPresent\":true}},{\"Variable\":\"$.pii.hasPii\",\"BooleanEquals\":false}]}]}]}],\"Next\":\"BestiePublishClosetItem\"}],\"Default\":\"BestieRejected\"},\"BestieRejected\":{\"Type\":\"Fail\",\"Cause\":\"ChecksFailed\"},\"BestiePublishClosetItem\":{\"Next\":\"BestiePublished\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.published\",\"Resource\":\"",{"Fn::GetAtt":["PublishClosetItemFn8BF46E04","Arn"]},"\",\"Parameters\":{\"approvalId.$\":\"$.item.id\",\"item.$\":\"$.item\",\"segmentation.$\":\"$.segmentation\",\"moderation.$\":\"$.moderation\",\"pii.$\":\"$.pii\"}},\"BestiePublished\":{\"Type\":\"Succeed\"}}}"]]},"roleArn":{"Fn::GetAtt":["BestieClosetUploadAutoPublishSMRole45F297D7","Arn"]},"stateMachineType":"STANDARD","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"ValidateBgChangeFn":{"id":"ValidateBgChangeFn","path":"BestiesClosetStack/ValidateBgChangeFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ValidateBgChangeFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ValidateBgChangeFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ValidateBgChangeFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ValidateBgChangeFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ValidateBgChangeFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ValidateBgChangeFnServiceRoleDefaultPolicyF44C3E36","roles":[{"Ref":"ValidateBgChangeFnServiceRoleA475219F"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ValidateBgChangeFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ValidateBgChangeFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ValidateBgChangeFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ValidateBgChangeFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"747c8b56a542c8c793d144d82a5d2e732230958c7beb96fe84efe4d8b105e204.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ValidateBgChangeFnServiceRoleA475219F","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"ModerateBgFn":{"id":"ModerateBgFn","path":"BestiesClosetStack/ModerateBgFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ModerateBgFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ModerateBgFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerateBgFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ModerateBgFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerateBgFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"ModerateBgFnServiceRoleDefaultPolicy75CA2E9C","roles":[{"Ref":"ModerateBgFnServiceRoleA8662475"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ModerateBgFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ModerateBgFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ModerateBgFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ModerateBgFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"5ca245031610985bf8d9820d169d4b2a39d406e6f44ec6685cf1ab11f7f2d014.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ModerateBgFnServiceRoleA8662475","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"ApplyBgChangeFn":{"id":"ApplyBgChangeFn","path":"BestiesClosetStack/ApplyBgChangeFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ApplyBgChangeFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ApplyBgChangeFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ApplyBgChangeFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ApplyBgChangeFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ApplyBgChangeFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ApplyBgChangeFnServiceRoleDefaultPolicyF1F3687F","roles":[{"Ref":"ApplyBgChangeFnServiceRole9AC3176A"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ApplyBgChangeFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ApplyBgChangeFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ApplyBgChangeFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ApplyBgChangeFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"862c0fa7572dc63eac883051febde85b44650e42bd7b9ef4538264aeef176b22.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["ApplyBgChangeFnServiceRole9AC3176A","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":60}}}}},"BestieBackgroundApprovalTopic":{"id":"BestieBackgroundApprovalTopic","path":"BestiesClosetStack/BestieBackgroundApprovalTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BestieBackgroundApprovalTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"Bestie Background Change Approvals","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"Policy":{"id":"Policy","path":"BestiesClosetStack/BestieBackgroundApprovalTopic/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.TopicPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BestieBackgroundApprovalTopic/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopicPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::TopicPolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Ref":"BestieBackgroundApprovalTopic895968C0"},"Sid":"0"}],"Version":"2012-10-17"},"topics":[{"Ref":"BestieBackgroundApprovalTopic895968C0"}]}}}}}}},"BestiesBus":{"id":"BestiesBus","path":"BestiesClosetStack/BestiesBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BestiesBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"name":"sa-BestiesClosetStack-besties"}}}}},"BgChangePendingReviewRule":{"id":"BgChangePendingReviewRule","path":"BestiesClosetStack/BgChangePendingReviewRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BgChangePendingReviewRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventBusName":{"Ref":"BestiesBus2096AB60"},"eventPattern":{"source":["stylingadventures.besties"],"detail-type":["BestieBackgroundChangePendingReview"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Ref":"BestieBackgroundApprovalTopic895968C0"}}]}}}}},"ClosetItemPendingReviewRule":{"id":"ClosetItemPendingReviewRule","path":"BestiesClosetStack/ClosetItemPendingReviewRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ClosetItemPendingReviewRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventBusName":{"Ref":"BestiesBus2096AB60"},"eventPattern":{"source":["stylingadventures.besties"],"detail-type":["BestieClosetItemPendingReview"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Ref":"BestieBackgroundApprovalTopic895968C0"}}]}}}}},"ValidateBackgroundChange":{"id":"ValidateBackgroundChange","path":"BestiesClosetStack/ValidateBackgroundChange","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"SegmentOutfitForBgChange":{"id":"SegmentOutfitForBgChange","path":"BestiesClosetStack/SegmentOutfitForBgChange","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"ModerateBackground":{"id":"ModerateBackground","path":"BestiesClosetStack/ModerateBackground","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"NotifyAdminBgChange":{"id":"NotifyAdminBgChange","path":"BestiesClosetStack/NotifyAdminBgChange","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.SnsPublish","version":"2.223.0"}},"ApplyBackgroundChange":{"id":"ApplyBackgroundChange","path":"BestiesClosetStack/ApplyBackgroundChange","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"AdminApprovedBgChange?":{"id":"AdminApprovedBgChange?","path":"BestiesClosetStack/AdminApprovedBgChange?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"BackgroundChangeRejected":{"id":"BackgroundChangeRejected","path":"BestiesClosetStack/BackgroundChangeRejected","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Pass","version":"2.223.0"}},"BackgroundChangeApprovalSM":{"id":"BackgroundChangeApprovalSM","path":"BestiesClosetStack/BackgroundChangeApprovalSM","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ValidateBgChangeFn419727A4","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ValidateBgChangeFn419727A4","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ImageSegmentationFn0414CF98","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ImageSegmentationFn0414CF98","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ModerateBgFn9078832F","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ModerateBgFn9078832F","Arn"]},":*"]]}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"BestieBackgroundApprovalTopic895968C0"}},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ApplyBgChangeFn6D1C78C3","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ApplyBgChangeFn6D1C78C3","Arn"]},":*"]]}]},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BackgroundChangeApprovalSMRoleDefaultPolicy631B6BC3","roles":[{"Ref":"BackgroundChangeApprovalSMRole8975368A"}]}}}}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/BackgroundChangeApprovalSM/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"ValidateBackgroundChange\",\"States\":{\"ValidateBackgroundChange\":{\"Next\":\"SegmentOutfitForBgChange\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.validation\",\"Resource\":\"",{"Fn::GetAtt":["ValidateBgChangeFn419727A4","Arn"]},"\"},\"SegmentOutfitForBgChange\":{\"Next\":\"ModerateBackground\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"TimeoutSeconds\":180,\"ResultPath\":\"$.segmentationBg\",\"Resource\":\"",{"Fn::GetAtt":["ImageSegmentationFn0414CF98","Arn"]},"\",\"Parameters\":{\"item\":{\"s3Key.$\":\"$.item.s3Key\",\"bucket\":\"",{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"\"}}},\"ModerateBackground\":{\"Next\":\"NotifyAdminBgChange\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.moderationBg\",\"Resource\":\"",{"Fn::GetAtt":["ModerateBgFn9078832F","Arn"]},"\"},\"NotifyAdminBgChange\":{\"Next\":\"AdminApprovedBgChange?\",\"Type\":\"Task\",\"ResultPath\":\"$.approval\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::sns:publish.waitForTaskToken\",\"Parameters\":{\"TopicArn\":\"",{"Ref":"BestieBackgroundApprovalTopic895968C0"},"\",\"Message\":{\"type\":\"BESTIE_BACKGROUND_CHANGE\",\"detail.$\":\"$\",\"taskToken.$\":\"$$.Task.Token\",\"processedImageKey.$\":\"$.segmentationBg.outputKey\"}}},\"AdminApprovedBgChange?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.approval.approved\",\"BooleanEquals\":true,\"Next\":\"ApplyBackgroundChange\"}],\"Default\":\"BackgroundChangeRejected\"},\"BackgroundChangeRejected\":{\"Type\":\"Pass\",\"Result\":{\"status\":\"REJECTED\"},\"End\":true},\"ApplyBackgroundChange\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"ResultPath\":\"$.applied\",\"Resource\":\"",{"Fn::GetAtt":["ApplyBgChangeFn6D1C78C3","Arn"]},"\"}}}"]]},"roleArn":{"Fn::GetAtt":["BackgroundChangeApprovalSMRole8975368A","Arn"]},"stateMachineType":"STANDARD","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"SaveApprovalTokenFn":{"id":"SaveApprovalTokenFn","path":"BestiesClosetStack/SaveApprovalTokenFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/SaveApprovalTokenFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/SaveApprovalTokenFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/SaveApprovalTokenFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/SaveApprovalTokenFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/SaveApprovalTokenFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SaveApprovalTokenFnServiceRoleDefaultPolicy8271F5BF","roles":[{"Ref":"SaveApprovalTokenFnServiceRoleD525F86C"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/SaveApprovalTokenFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/SaveApprovalTokenFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/SaveApprovalTokenFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/SaveApprovalTokenFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"193a25b2fc06146354e9e5db8f227d96865ec02a3549934f5b17aec73c82fa5a.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","role":{"Fn::GetAtt":["SaveApprovalTokenFnServiceRoleD525F86C","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"AllowInvoke:BestiesClosetStackBestieBackgroundApprovalTopic94BA1983":{"id":"AllowInvoke:BestiesClosetStackBestieBackgroundApprovalTopic94BA1983","path":"BestiesClosetStack/SaveApprovalTokenFn/AllowInvoke:BestiesClosetStackBestieBackgroundApprovalTopic94BA1983","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SaveApprovalTokenFnBF4550C6","Arn"]},"principal":"sns.amazonaws.com","sourceArn":{"Ref":"BestieBackgroundApprovalTopic895968C0"}}}},"BestieBackgroundApprovalTopic":{"id":"BestieBackgroundApprovalTopic","path":"BestiesClosetStack/SaveApprovalTokenFn/BestieBackgroundApprovalTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/SaveApprovalTokenFn/BestieBackgroundApprovalTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":{"Fn::GetAtt":["SaveApprovalTokenFnBF4550C6","Arn"]},"protocol":"lambda","topicArn":{"Ref":"BestieBackgroundApprovalTopic895968C0"}}}}}}}},"ApproveClosetUploadFn":{"id":"ApproveClosetUploadFn","path":"BestiesClosetStack/ApproveClosetUploadFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/ApproveClosetUploadFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/ApproveClosetUploadFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ApproveClosetUploadFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/ApproveClosetUploadFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/ApproveClosetUploadFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AdminAuditTable2543903C","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"ClosetOpsTopicE34D076D"}},{"Action":["states:SendTaskSuccess","states:SendTaskFailure","events:PutEvents"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ApproveClosetUploadFnServiceRoleDefaultPolicy1412967A","roles":[{"Ref":"ApproveClosetUploadFnServiceRole6FCD1BF1"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/ApproveClosetUploadFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/ApproveClosetUploadFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/ApproveClosetUploadFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/ApproveClosetUploadFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"474f54f5aa1ad6f7c13578363b98bac935c929caf5a520deaf94dc9d9a36ef3a.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","NODE_OPTIONS":"--enable-source-maps","AUDIT_TABLE_NAME":{"Ref":"AdminAuditTable2543903C"},"NOTIFY_TOPIC_ARN":{"Ref":"ClosetOpsTopicE34D076D"}}},"handler":"index.handler","role":{"Fn::GetAtt":["ApproveClosetUploadFnServiceRole6FCD1BF1","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AdminFanClosetUploadFn":{"id":"AdminFanClosetUploadFn","path":"BestiesClosetStack/AdminFanClosetUploadFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesClosetStack/AdminFanClosetUploadFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesClosetStack/AdminFanClosetUploadFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesClosetStack/AdminFanClosetUploadFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesClosetStack/AdminFanClosetUploadFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/AdminFanClosetUploadFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"ClosetUploadApprovalSM46D354C9"}}],"Version":"2012-10-17"},"policyName":"AdminFanClosetUploadFnServiceRoleDefaultPolicyAFE747B6","roles":[{"Ref":"AdminFanClosetUploadFnServiceRole98571B14"}]}}}}}}},"Code":{"id":"Code","path":"BestiesClosetStack/AdminFanClosetUploadFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesClosetStack/AdminFanClosetUploadFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesClosetStack/AdminFanClosetUploadFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/AdminFanClosetUploadFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"d373b1b9ca5d755c3b10ef94812553a0430e080c31baf21267f41fac0f892a1a.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","FAN_APPROVAL_SM_ARN":{"Ref":"ClosetUploadApprovalSM46D354C9"},"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["AdminFanClosetUploadFnServiceRole98571B14","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"BestiesAdminApi":{"id":"BestiesAdminApi","path":"BestiesClosetStack/BestiesAdminApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BestiesAdminApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"name":"sa-BestiesClosetStack-admin-api","protocolType":"HTTP","tags":{"App":"stylingadventures","Env":"dev"}}}},"DefaultStage":{"id":"DefaultStage","path":"BestiesClosetStack/BestiesAdminApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BestiesAdminApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"BestiesAdminApiD443FA75"},"autoDeploy":true,"stageName":"$default","tags":{"App":"stylingadventures","Env":"dev"}}}}}},"POST--admin--closet--approve":{"id":"POST--admin--closet--approve","path":"BestiesClosetStack/BestiesAdminApi/POST--admin--closet--approve","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"ApproveClosetUploadIntegration":{"id":"ApproveClosetUploadIntegration","path":"BestiesClosetStack/BestiesAdminApi/POST--admin--closet--approve/ApproveClosetUploadIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BestiesAdminApi/POST--admin--closet--approve/ApproveClosetUploadIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"BestiesAdminApiD443FA75"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["ApproveClosetUploadFnC4D99774","Arn"]},"payloadFormatVersion":"2.0"}}}}},"ApproveClosetUploadIntegration-Permission":{"id":"ApproveClosetUploadIntegration-Permission","path":"BestiesClosetStack/BestiesAdminApi/POST--admin--closet--approve/ApproveClosetUploadIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApproveClosetUploadFnC4D99774","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"BestiesAdminApiD443FA75"},"/*/*/admin/closet/approve"]]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/BestiesAdminApi/POST--admin--closet--approve/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"BestiesAdminApiD443FA75"},"authorizationType":"NONE","routeKey":"POST /admin/closet/approve","target":{"Fn::Join":["",["integrations/",{"Ref":"BestiesAdminApiPOSTadminclosetapproveApproveClosetUploadIntegration8A051F48"}]]}}}}}},"OPTIONS--admin--closet--approve":{"id":"OPTIONS--admin--closet--approve","path":"BestiesClosetStack/BestiesAdminApi/OPTIONS--admin--closet--approve","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"ApproveClosetUploadIntegration-Permission":{"id":"ApproveClosetUploadIntegration-Permission","path":"BestiesClosetStack/BestiesAdminApi/OPTIONS--admin--closet--approve/ApproveClosetUploadIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApproveClosetUploadFnC4D99774","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"BestiesAdminApiD443FA75"},"/*/*/admin/closet/approve"]]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/BestiesAdminApi/OPTIONS--admin--closet--approve/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"BestiesAdminApiD443FA75"},"authorizationType":"NONE","routeKey":"OPTIONS /admin/closet/approve","target":{"Fn::Join":["",["integrations/",{"Ref":"BestiesAdminApiPOSTadminclosetapproveApproveClosetUploadIntegration8A051F48"}]]}}}}}},"POST--admin--fan--closet--upload":{"id":"POST--admin--fan--closet--upload","path":"BestiesClosetStack/BestiesAdminApi/POST--admin--fan--closet--upload","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"AdminFanClosetUploadIntegration":{"id":"AdminFanClosetUploadIntegration","path":"BestiesClosetStack/BestiesAdminApi/POST--admin--fan--closet--upload/AdminFanClosetUploadIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesClosetStack/BestiesAdminApi/POST--admin--fan--closet--upload/AdminFanClosetUploadIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"BestiesAdminApiD443FA75"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["AdminFanClosetUploadFnD3DC0D9E","Arn"]},"payloadFormatVersion":"2.0"}}}}},"AdminFanClosetUploadIntegration-Permission":{"id":"AdminFanClosetUploadIntegration-Permission","path":"BestiesClosetStack/BestiesAdminApi/POST--admin--fan--closet--upload/AdminFanClosetUploadIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminFanClosetUploadFnD3DC0D9E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"BestiesAdminApiD443FA75"},"/*/*/admin/fan/closet/upload"]]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/BestiesAdminApi/POST--admin--fan--closet--upload/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"BestiesAdminApiD443FA75"},"authorizationType":"NONE","routeKey":"POST /admin/fan/closet/upload","target":{"Fn::Join":["",["integrations/",{"Ref":"BestiesAdminApiPOSTadminfanclosetuploadAdminFanClosetUploadIntegration1F32C0EF"}]]}}}}}},"OPTIONS--admin--fan--closet--upload":{"id":"OPTIONS--admin--fan--closet--upload","path":"BestiesClosetStack/BestiesAdminApi/OPTIONS--admin--fan--closet--upload","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"AdminFanClosetUploadIntegration-Permission":{"id":"AdminFanClosetUploadIntegration-Permission","path":"BestiesClosetStack/BestiesAdminApi/OPTIONS--admin--fan--closet--upload/AdminFanClosetUploadIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AdminFanClosetUploadFnD3DC0D9E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:637423256673:",{"Ref":"BestiesAdminApiD443FA75"},"/*/*/admin/fan/closet/upload"]]}}}},"Resource":{"id":"Resource","path":"BestiesClosetStack/BestiesAdminApi/OPTIONS--admin--fan--closet--upload/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"BestiesAdminApiD443FA75"},"authorizationType":"NONE","routeKey":"OPTIONS /admin/fan/closet/upload","target":{"Fn::Join":["",["integrations/",{"Ref":"BestiesAdminApiPOSTadminfanclosetuploadAdminFanClosetUploadIntegration1F32C0EF"}]]}}}}}}}},"AdminApiUrl":{"id":"AdminApiUrl","path":"BestiesClosetStack/AdminApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ClosetUploadApprovalStateMachineArn":{"id":"ClosetUploadApprovalStateMachineArn","path":"BestiesClosetStack/ClosetUploadApprovalStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"BestieClosetUploadAutoPublishStateMachineArn":{"id":"BestieClosetUploadAutoPublishStateMachineArn","path":"BestiesClosetStack/BestieClosetUploadAutoPublishStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"BackgroundChangeApprovalStateMachineArn":{"id":"BackgroundChangeApprovalStateMachineArn","path":"BestiesClosetStack/BackgroundChangeApprovalStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AppTableName":{"id":"AppTableName","path":"BestiesClosetStack/AppTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"UploadsBucketName":{"id":"UploadsBucketName","path":"BestiesClosetStack/UploadsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ClosetDashboardName":{"id":"ClosetDashboardName","path":"BestiesClosetStack/ClosetDashboardName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"BestiesClosetStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"BestiesClosetStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"BestiesClosetStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"ClosetUploadApprovalSM46D354C9\"}":{"id":"Output{\"Ref\":\"ClosetUploadApprovalSM46D354C9\"}","path":"BestiesClosetStack/Exports/Output{\"Ref\":\"ClosetUploadApprovalSM46D354C9\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"BestieClosetUploadAutoPublishSMD39D3713\"}":{"id":"Output{\"Ref\":\"BestieClosetUploadAutoPublishSMD39D3713\"}","path":"BestiesClosetStack/Exports/Output{\"Ref\":\"BestieClosetUploadAutoPublishSMD39D3713\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"BackgroundChangeApprovalSMA6DF140D\"}":{"id":"Output{\"Ref\":\"BackgroundChangeApprovalSMA6DF140D\"}","path":"BestiesClosetStack/Exports/Output{\"Ref\":\"BackgroundChangeApprovalSMA6DF140D\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"BestiesClosetStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BestiesClosetStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"BestiesStoriesStack":{"id":"BestiesStoriesStack","path":"BestiesStoriesStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"ComposeStoryFn":{"id":"ComposeStoryFn","path":"BestiesStoriesStack/ComposeStoryFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesStoriesStack/ComposeStoryFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesStoriesStack/ComposeStoryFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/ComposeStoryFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesStoriesStack/ComposeStoryFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesStoriesStack/ComposeStoryFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ComposeStoryFnServiceRoleDefaultPolicy4DBFE2C1","roles":[{"Ref":"ComposeStoryFnServiceRoleFE40AFBE"}]}}}}}}},"Code":{"id":"Code","path":"BestiesStoriesStack/ComposeStoryFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesStoriesStack/ComposeStoryFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesStoriesStack/ComposeStoryFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/ComposeStoryFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"2c54ecacb107722d13ab5773cc93ae0b8a25d81b90e6dd8ebab7296d8b6d350f.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["ComposeStoryFnServiceRoleFE40AFBE","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"PublishStoryFn":{"id":"PublishStoryFn","path":"BestiesStoriesStack/PublishStoryFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesStoriesStack/PublishStoryFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesStoriesStack/PublishStoryFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/PublishStoryFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesStoriesStack/PublishStoryFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesStoriesStack/PublishStoryFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"PublishStoryFnServiceRoleDefaultPolicyF363D55A","roles":[{"Ref":"PublishStoryFnServiceRoleB5B265C6"}]}}}}}}},"Code":{"id":"Code","path":"BestiesStoriesStack/PublishStoryFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesStoriesStack/PublishStoryFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesStoriesStack/PublishStoryFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/PublishStoryFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"b7cb29f71a7f1d2be8bd1fc2fac2443fbc2c17c1bf561ffeae8ff7ba36d74ba4.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["PublishStoryFnServiceRoleB5B265C6","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"StoriesBus":{"id":"StoriesBus","path":"BestiesStoriesStack/StoriesBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesStoriesStack/StoriesBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"name":"sa-BestiesStoriesStack-stories"}}}}},"ComposeStory":{"id":"ComposeStory","path":"BestiesStoriesStack/ComposeStory","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"ScheduleStoryPublish":{"id":"ScheduleStoryPublish","path":"BestiesStoriesStack/ScheduleStoryPublish","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.EventBridgePutEvents","version":"2.223.0"}},"ImmediatePublishStory":{"id":"ImmediatePublishStory","path":"BestiesStoriesStack/ImmediatePublishStory","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"HasScheduledAt?":{"id":"HasScheduledAt?","path":"BestiesStoriesStack/HasScheduledAt?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"StoryPublishSM":{"id":"StoryPublishSM","path":"BestiesStoriesStack/StoryPublishSM","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"BestiesStoriesStack/StoryPublishSM/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"BestiesStoriesStack/StoryPublishSM/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/StoryPublishSM/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesStoriesStack/StoryPublishSM/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesStoriesStack/StoryPublishSM/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ComposeStoryFnF8C158BE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ComposeStoryFnF8C158BE","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PublishStoryFn8B780F0D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PublishStoryFn8B780F0D","Arn"]},":*"]]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["StoriesBusEF1D1BF7","Arn"]}},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"StoryPublishSMRoleDefaultPolicy91D3877C","roles":[{"Ref":"StoryPublishSMRole044986ED"}]}}}}}}},"Resource":{"id":"Resource","path":"BestiesStoriesStack/StoryPublishSM/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"ComposeStory\",\"States\":{\"ComposeStory\":{\"Next\":\"HasScheduledAt?\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["ComposeStoryFnF8C158BE","Arn"]},"\"},\"HasScheduledAt?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.scheduledAt\",\"IsNull\":false,\"Next\":\"ScheduleStoryPublish\"}],\"Default\":\"ImmediatePublishStory\"},\"ImmediatePublishStory\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["PublishStoryFn8B780F0D","Arn"]},"\"},\"ScheduleStoryPublish\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::events:putEvents\",\"Parameters\":{\"Entries\":[{\"Detail\":{\"storyId.$\":\"$.storyId\",\"scheduledAt.$\":\"$.scheduledAt\"},\"DetailType\":\"BestieStoryScheduled\",\"EventBusName\":\"",{"Fn::GetAtt":["StoriesBusEF1D1BF7","Arn"]},"\",\"Source\":\"stylingadventures.besties\"}]}}}}"]]},"roleArn":{"Fn::GetAtt":["StoryPublishSMRole044986ED","Arn"]},"stateMachineType":"STANDARD","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"StoryPublishRule":{"id":"StoryPublishRule","path":"BestiesStoriesStack/StoryPublishRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesStoriesStack/StoryPublishRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventBusName":{"Ref":"StoriesBusEF1D1BF7"},"eventPattern":{"source":["stylingadventures.besties"],"detail-type":["BestieStoryScheduled"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["PublishStoryFn8B780F0D","Arn"]},"inputPath":"$.detail"}]}}},"AllowEventRuleBestiesStoriesStackPublishStoryFn0121DBB3":{"id":"AllowEventRuleBestiesStoriesStackPublishStoryFn0121DBB3","path":"BestiesStoriesStack/StoryPublishRule/AllowEventRuleBestiesStoriesStackPublishStoryFn0121DBB3","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PublishStoryFn8B780F0D","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["StoryPublishRuleDD5AC73C","Arn"]}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"BestiesStoriesStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"BestiesStoriesStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"BestiesStoriesStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"StoryPublishSMAF8A4148\"}":{"id":"Output{\"Ref\":\"StoryPublishSMAF8A4148\"}","path":"BestiesStoriesStack/Exports/Output{\"Ref\":\"StoryPublishSMAF8A4148\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"BestiesStoriesStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BestiesStoriesStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"BestiesEngagementStack":{"id":"BestiesEngagementStack","path":"BestiesEngagementStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"EngagementFn":{"id":"EngagementFn","path":"BestiesEngagementStack/EngagementFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"BestiesEngagementStack/EngagementFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BestiesEngagementStack/EngagementFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"BestiesEngagementStack/EngagementFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BestiesEngagementStack/EngagementFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesEngagementStack/EngagementFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"EngagementFnServiceRoleDefaultPolicyD13F4823","roles":[{"Ref":"EngagementFnServiceRoleC4BCE19C"}]}}}}}}},"Code":{"id":"Code","path":"BestiesEngagementStack/EngagementFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"BestiesEngagementStack/EngagementFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"BestiesEngagementStack/EngagementFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"BestiesEngagementStack/EngagementFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"766a61fd10012c320af0730d8de24ea63e5010994cf9b0475f8b60e4450f3c78.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["EngagementFnServiceRoleC4BCE19C","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"BestieEngagementRule":{"id":"BestieEngagementRule","path":"BestiesEngagementStack/BestieEngagementRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"BestiesEngagementStack/BestieEngagementRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventPattern":{"source":["stylingadventures.besties"],"detail-type":["BestieEngagement"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["EngagementFnA88B87A9","Arn"]}}]}}},"AllowEventRuleBestiesEngagementStackEngagementFn97E6C0E2":{"id":"AllowEventRuleBestiesEngagementStackEngagementFn97E6C0E2","path":"BestiesEngagementStack/BestieEngagementRule/AllowEventRuleBestiesEngagementStackEngagementFn97E6C0E2","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["EngagementFnA88B87A9","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["BestieEngagementRuleA6A1424B","Arn"]}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"BestiesEngagementStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"BestiesEngagementStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"BestiesEngagementStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BestiesEngagementStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"LivestreamStack":{"id":"LivestreamStack","path":"LivestreamStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"CreatorLiveChannel":{"id":"CreatorLiveChannel","path":"LivestreamStack/CreatorLiveChannel","constructInfo":{"fqn":"aws-cdk-lib.aws_ivs.CfnChannel","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IVS::Channel","aws:cdk:cloudformation:props":{"authorized":false,"latencyMode":"LOW","name":"sa-dev-creator-live","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"type":"STANDARD"}}},"CreatorLivestreamFn":{"id":"CreatorLivestreamFn","path":"LivestreamStack/CreatorLivestreamFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"LivestreamStack/CreatorLivestreamFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"LivestreamStack/CreatorLivestreamFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"LivestreamStack/CreatorLivestreamFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"LivestreamStack/CreatorLivestreamFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LivestreamStack/CreatorLivestreamFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreatorLivestreamFnServiceRoleDefaultPolicy3A4C2570","roles":[{"Ref":"CreatorLivestreamFnServiceRoleE583EAA4"}]}}}}}}},"Code":{"id":"Code","path":"LivestreamStack/CreatorLivestreamFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"LivestreamStack/CreatorLivestreamFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"LivestreamStack/CreatorLivestreamFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"LivestreamStack/CreatorLivestreamFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"dd8b939a03297bf47fade54f74b81953bea4f9848b6d5c74e382ba746b79a0da.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"LIVESTREAM_CHANNEL_ARN":{"Fn::GetAtt":["CreatorLiveChannel","Arn"]},"LIVESTREAM_PLAYBACK_URL":{"Fn::GetAtt":["CreatorLiveChannel","PlaybackUrl"]},"LIVESTREAM_ALLOWED_GROUPS":"creator,admin"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["CreatorLivestreamFnServiceRoleE583EAA4","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"CreatorLiveChannelArn":{"id":"CreatorLiveChannelArn","path":"LivestreamStack/CreatorLiveChannelArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CreatorLivePlaybackUrl":{"id":"CreatorLivePlaybackUrl","path":"LivestreamStack/CreatorLivePlaybackUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"LivestreamStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"LivestreamStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"LivestreamStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"LivestreamStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"CreatorToolsStack":{"id":"CreatorToolsStack","path":"CreatorToolsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"CreatorMediaBucket":{"id":"CreatorMediaBucket","path":"CreatorToolsStack/CreatorMediaBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CreatorToolsStack/CreatorMediaBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"sa-dev-creator-media","corsConfiguration":{"corsRules":[{"maxAge":300,"allowedHeaders":["*"],"allowedMethods":["GET","PUT","HEAD"],"allowedOrigins":["*"],"exposedHeaders":["ETag"]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"CreatorToolsFn":{"id":"CreatorToolsFn","path":"CreatorToolsStack/CreatorToolsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CreatorToolsStack/CreatorToolsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CreatorToolsStack/CreatorToolsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CreatorToolsStack/CreatorToolsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CreatorToolsStack/CreatorToolsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CreatorToolsStack/CreatorToolsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["CreatorMediaBucket07B47A03","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CreatorMediaBucket07B47A03","Arn"]},"/*"]]}]},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"BestiesStoriesStack:ExportsOutputRefStoryPublishSMAF8A41480C93DC91"}},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"WorkflowsV2Stack:ExportsOutputRefSocialPulseExpressStateMachine66F63342FAC49083"}},{"Action":"states:StartSyncExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"WorkflowsV2Stack:ExportsOutputRefSocialPulseExpressStateMachine66F63342FAC49083"}}],"Version":"2012-10-17"},"policyName":"CreatorToolsFnServiceRoleDefaultPolicyF5B62932","roles":[{"Ref":"CreatorToolsFnServiceRole02AF0704"}]}}}}}}},"Code":{"id":"Code","path":"CreatorToolsStack/CreatorToolsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CreatorToolsStack/CreatorToolsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CreatorToolsStack/CreatorToolsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CreatorToolsStack/CreatorToolsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"c1ecf3eef7a7f836181aaf7e1c8b85fc00fda14a92d90e8538ee862c0aa50892.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","CREATOR_MEDIA_BUCKET":{"Ref":"CreatorMediaBucket07B47A03"},"STORY_PUBLISH_SM_ARN":{"Fn::ImportValue":"BestiesStoriesStack:ExportsOutputRefStoryPublishSMAF8A41480C93DC91"},"SOCIAL_PULSE_SFN_ARN":{"Fn::ImportValue":"WorkflowsV2Stack:ExportsOutputRefSocialPulseExpressStateMachine66F63342FAC49083"},"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["CreatorToolsFnServiceRole02AF0704","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"CreatorToolsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"CreatorToolsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CreatorToolsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CreatorToolsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"ShoppingStack":{"id":"ShoppingStack","path":"ShoppingStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"ProductTable":{"id":"ProductTable","path":"ShoppingStack/ProductTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ShoppingStack/ProductTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"productId","attributeType":"S"},{"attributeName":"category","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"category-index","keySchema":[{"attributeName":"category","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"productId","keyType":"HASH"}],"tableName":"sa-product","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"ShoppingStack/ProductTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"AffiliateLinkTable":{"id":"AffiliateLinkTable","path":"ShoppingStack/AffiliateLinkTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ShoppingStack/AffiliateLinkTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"affiliateLinkId","attributeType":"S"},{"attributeName":"productId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"productId-index","keySchema":[{"attributeName":"productId","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"affiliateLinkId","keyType":"HASH"}],"tableName":"sa-affiliate-link","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"ShoppingStack/AffiliateLinkTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"ClosetItemProductMapTable":{"id":"ClosetItemProductMapTable","path":"ShoppingStack/ClosetItemProductMapTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ShoppingStack/ClosetItemProductMapTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"closetItemId","attributeType":"S"},{"attributeName":"productId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"closetItemId","keyType":"HASH"},{"attributeName":"productId","keyType":"RANGE"}],"tableName":"sa-closet-item-product-map","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"ShoppingStack/ClosetItemProductMapTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"SceneProductMapTable":{"id":"SceneProductMapTable","path":"ShoppingStack/SceneProductMapTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ShoppingStack/SceneProductMapTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"sceneId","attributeType":"S"},{"attributeName":"productId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"sceneId","keyType":"HASH"},{"attributeName":"productId","keyType":"RANGE"}],"tableName":"sa-scene-product-map","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"ShoppingStack/SceneProductMapTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"GetShopLalasLookFn":{"id":"GetShopLalasLookFn","path":"ShoppingStack/GetShopLalasLookFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ShoppingStack/GetShopLalasLookFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ShoppingStack/GetShopLalasLookFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ShoppingStack/GetShopLalasLookFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ShoppingStack/GetShopLalasLookFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ShoppingStack/GetShopLalasLookFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ProductTableB8D4E9ED","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ProductTableB8D4E9ED","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AffiliateLinkTableB945AB49","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AffiliateLinkTableB945AB49","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ClosetItemProductMapTableC136F238","Arn"]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"GetShopLalasLookFnServiceRoleDefaultPolicy1AEFEDB0","roles":[{"Ref":"GetShopLalasLookFnServiceRole4797B05E"}]}}}}}}},"Code":{"id":"Code","path":"ShoppingStack/GetShopLalasLookFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ShoppingStack/GetShopLalasLookFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ShoppingStack/GetShopLalasLookFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ShoppingStack/GetShopLalasLookFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"45c5c28b548e8648b9256af63fe1359eb9c383ef67dcfe8267fa080947761611.zip"},"environment":{"variables":{"PRODUCT_TABLE_NAME":{"Ref":"ProductTableB8D4E9ED"},"AFFILIATE_LINK_TABLE_NAME":{"Ref":"AffiliateLinkTableB945AB49"},"CLOSET_ITEM_PRODUCT_MAP_TABLE_NAME":{"Ref":"ClosetItemProductMapTableC136F238"}}},"handler":"index.handler","role":{"Fn::GetAtt":["GetShopLalasLookFnServiceRole4797B05E","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"GetShopThisSceneFn":{"id":"GetShopThisSceneFn","path":"ShoppingStack/GetShopThisSceneFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ShoppingStack/GetShopThisSceneFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ShoppingStack/GetShopThisSceneFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ShoppingStack/GetShopThisSceneFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ShoppingStack/GetShopThisSceneFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ShoppingStack/GetShopThisSceneFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ProductTableB8D4E9ED","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ProductTableB8D4E9ED","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AffiliateLinkTableB945AB49","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AffiliateLinkTableB945AB49","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["SceneProductMapTableC93D0F2E","Arn"]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"GetShopThisSceneFnServiceRoleDefaultPolicy8099EAA8","roles":[{"Ref":"GetShopThisSceneFnServiceRole79189C36"}]}}}}}}},"Code":{"id":"Code","path":"ShoppingStack/GetShopThisSceneFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ShoppingStack/GetShopThisSceneFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ShoppingStack/GetShopThisSceneFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ShoppingStack/GetShopThisSceneFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"aee3558bc6b056733f05d516ea33ad4542fce2077064d850431b3d51e44960e4.zip"},"environment":{"variables":{"PRODUCT_TABLE_NAME":{"Ref":"ProductTableB8D4E9ED"},"AFFILIATE_LINK_TABLE_NAME":{"Ref":"AffiliateLinkTableB945AB49"},"SCENE_PRODUCT_MAP_TABLE_NAME":{"Ref":"SceneProductMapTableC93D0F2E"}}},"handler":"index.handler","role":{"Fn::GetAtt":["GetShopThisSceneFnServiceRole79189C36","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"LinkClosetItemToProductFn":{"id":"LinkClosetItemToProductFn","path":"ShoppingStack/LinkClosetItemToProductFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ShoppingStack/LinkClosetItemToProductFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ShoppingStack/LinkClosetItemToProductFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ShoppingStack/LinkClosetItemToProductFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ShoppingStack/LinkClosetItemToProductFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ShoppingStack/LinkClosetItemToProductFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ClosetItemProductMapTableC136F238","Arn"]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"LinkClosetItemToProductFnServiceRoleDefaultPolicy59E27F86","roles":[{"Ref":"LinkClosetItemToProductFnServiceRole4CEC6541"}]}}}}}}},"Code":{"id":"Code","path":"ShoppingStack/LinkClosetItemToProductFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ShoppingStack/LinkClosetItemToProductFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ShoppingStack/LinkClosetItemToProductFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ShoppingStack/LinkClosetItemToProductFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"ef1530a3643cc318714f3a532762c9fda82bf21e7f53c92bc5ca83b17edfd54f.zip"},"environment":{"variables":{"CLOSET_ITEM_PRODUCT_MAP_TABLE_NAME":{"Ref":"ClosetItemProductMapTableC136F238"}}},"handler":"index.handler","role":{"Fn::GetAtt":["LinkClosetItemToProductFnServiceRole4CEC6541","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"ShoppingStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"ShoppingStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ShoppingStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ShoppingStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"CommerceStack":{"id":"CommerceStack","path":"CommerceStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"OrdersTable":{"id":"OrdersTable","path":"CommerceStack/OrdersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CommerceStack/OrdersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"pk","attributeType":"S"},{"attributeName":"sk","attributeType":"S"},{"attributeName":"gsi1pk","attributeType":"S"},{"attributeName":"gsi1sk","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi1","keySchema":[{"attributeName":"gsi1pk","keyType":"HASH"},{"attributeName":"gsi1sk","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"pk","keyType":"HASH"},{"attributeName":"sk","keyType":"RANGE"}],"tableName":"sa-dev-orders","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"CommerceStack/OrdersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"CommerceFn":{"id":"CommerceFn","path":"CommerceStack/CommerceFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CommerceStack/CommerceFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CommerceStack/CommerceFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CommerceStack/CommerceFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CommerceStack/CommerceFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CommerceStack/CommerceFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["OrdersTable315BB997","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["OrdersTable315BB997","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CommerceFnServiceRoleDefaultPolicyEDFF6026","roles":[{"Ref":"CommerceFnServiceRole9DC9F8A1"}]}}}}}}},"Code":{"id":"Code","path":"CommerceStack/CommerceFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CommerceStack/CommerceFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CommerceStack/CommerceFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CommerceStack/CommerceFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"98474d296eb7d87c802cf5405b7b926f9b4bf2a6479eb85c8bb822e4870228a1.zip"},"environment":{"variables":{"APP_TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"ORDERS_TABLE_NAME":{"Ref":"OrdersTable315BB997"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"STRIPE_SECRET_KEY":"","STRIPE_WEBHOOK_SECRET":""}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["CommerceFnServiceRole9DC9F8A1","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"OrdersTableName":{"id":"OrdersTableName","path":"CommerceStack/OrdersTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"CommerceStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"CommerceStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CommerceStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CommerceStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"AnalyticsStack":{"id":"AnalyticsStack","path":"AnalyticsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"AnalyticsBucket":{"id":"AnalyticsBucket","path":"AnalyticsStack/AnalyticsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":{"Fn::Join":["",["stylingadventures-analytics-dev-",{"Ref":"AWS::AccountId"}]]},"tags":[{"key":"App","value":"stylingadventures"},{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Env","value":"dev"}]}}},"Policy":{"id":"Policy","path":"AnalyticsStack/AnalyticsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"AnalyticsBucket39EAAEEA"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"AnalyticsStack/AnalyticsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"AnalyticsStack/AnalyticsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"AnalyticsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.223.0"},"children":{"Staging":{"id":"Staging","path":"AnalyticsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"Role":{"id":"Role","path":"AnalyticsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}},"Handler":{"id":"Handler","path":"AnalyticsStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"AnalyticsIngestFn":{"id":"AnalyticsIngestFn","path":"AnalyticsStack/AnalyticsIngestFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AnalyticsStack/AnalyticsIngestFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AnalyticsStack/AnalyticsIngestFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsIngestFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AnalyticsStack/AnalyticsIngestFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsIngestFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},"/*"]]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["AnalyticsBus90C738ED","Arn"]}}],"Version":"2012-10-17"},"policyName":"AnalyticsIngestFnServiceRoleDefaultPolicy80304195","roles":[{"Ref":"AnalyticsIngestFnServiceRoleB24594EF"}]}}}}}}},"Code":{"id":"Code","path":"AnalyticsStack/AnalyticsIngestFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AnalyticsStack/AnalyticsIngestFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AnalyticsStack/AnalyticsIngestFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsIngestFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"3db18610d2bb03cd4acc17f6ea0c1913ec62d1d76838b48a0048999e0b8ea71b.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"BUCKET_NAME":{"Ref":"AnalyticsBucket39EAAEEA"},"NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AnalyticsIngestFnServiceRoleB24594EF","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AnalyticsBus":{"id":"AnalyticsBus","path":"AnalyticsStack/AnalyticsBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"name":"sa-dev-analytics"}}}}},"AnalyticsEventsRule":{"id":"AnalyticsEventsRule","path":"AnalyticsStack/AnalyticsEventsRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AnalyticsEventsRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventBusName":{"Ref":"AnalyticsBus90C738ED"},"eventPattern":{"source":["stylingadventures.gameplay","stylingadventures.economy","stylingadventures.livestream","stylingadventures.besties","stylingadventures.collabs"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["AnalyticsIngestFn44257924","Arn"]}}]}}},"AllowEventRuleAnalyticsStackAnalyticsIngestFnBB9B4CDF":{"id":"AllowEventRuleAnalyticsStackAnalyticsIngestFnBB9B4CDF","path":"AnalyticsStack/AnalyticsEventsRule/AllowEventRuleAnalyticsStackAnalyticsIngestFnBB9B4CDF","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AnalyticsIngestFn44257924","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["AnalyticsEventsRuleD1AF45E3","Arn"]}}}}}},"AdminAnalyticsFn":{"id":"AdminAnalyticsFn","path":"AnalyticsStack/AdminAnalyticsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AnalyticsStack/AdminAnalyticsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AnalyticsStack/AdminAnalyticsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AnalyticsStack/AdminAnalyticsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AnalyticsStack/AdminAnalyticsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AnalyticsStack/AdminAnalyticsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AnalyticsBucket39EAAEEA","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AdminAnalyticsFnServiceRoleDefaultPolicy92A756BE","roles":[{"Ref":"AdminAnalyticsFnServiceRole589BF811"}]}}}}}}},"Code":{"id":"Code","path":"AnalyticsStack/AdminAnalyticsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AnalyticsStack/AdminAnalyticsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AnalyticsStack/AdminAnalyticsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AnalyticsStack/AdminAnalyticsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"831903bf074ed756aa97e8b112aef4144d0bad1f83026b6d1d901cc13ee16692.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"BUCKET_NAME":{"Ref":"AnalyticsBucket39EAAEEA"},"NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminAnalyticsFnServiceRole589BF811","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AnalyticsBucketName":{"id":"AnalyticsBucketName","path":"AnalyticsStack/AnalyticsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"AnalyticsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"AnalyticsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"AnalyticsStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"AnalyticsBucket39EAAEEA\"}":{"id":"Output{\"Ref\":\"AnalyticsBucket39EAAEEA\"}","path":"AnalyticsStack/Exports/Output{\"Ref\":\"AnalyticsBucket39EAAEEA\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Fn::GetAtt\":[\"AnalyticsBucket39EAAEEA\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"AnalyticsBucket39EAAEEA\",\"Arn\"]}","path":"AnalyticsStack/Exports/Output{\"Fn::GetAtt\":[\"AnalyticsBucket39EAAEEA\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"AnalyticsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"AnalyticsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"LayoutEngineStack":{"id":"LayoutEngineStack","path":"LayoutEngineStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"LayoutTemplatesBucket":{"id":"LayoutTemplatesBucket","path":"LayoutEngineStack/LayoutTemplatesBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LayoutEngineStack/LayoutTemplatesBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"sa-dev-layout-templates-637423256673","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Env","value":"dev"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"LayoutEngineStack/LayoutTemplatesBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LayoutEngineStack/LayoutTemplatesBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"LayoutTemplatesBucket49D24765"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["LayoutTemplatesBucket49D24765","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["LayoutTemplatesBucket49D24765","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"LayoutEngineStack/LayoutTemplatesBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"LayoutEngineStack/LayoutTemplatesBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"LayoutEngineStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.223.0"},"children":{"Staging":{"id":"Staging","path":"LayoutEngineStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"Role":{"id":"Role","path":"LayoutEngineStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}},"Handler":{"id":"Handler","path":"LayoutEngineStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"LayoutValidatorFn":{"id":"LayoutValidatorFn","path":"LayoutEngineStack/LayoutValidatorFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"LayoutEngineStack/LayoutValidatorFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"LayoutEngineStack/LayoutValidatorFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"LayoutEngineStack/LayoutValidatorFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"LayoutEngineStack/LayoutValidatorFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"LayoutEngineStack/LayoutValidatorFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["LayoutTemplatesBucket49D24765","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["LayoutTemplatesBucket49D24765","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"LayoutValidatorFnServiceRoleDefaultPolicy37DC2575","roles":[{"Ref":"LayoutValidatorFnServiceRole0B4ED411"}]}}}}}}},"Code":{"id":"Code","path":"LayoutEngineStack/LayoutValidatorFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"LayoutEngineStack/LayoutValidatorFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"LayoutEngineStack/LayoutValidatorFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"LayoutEngineStack/LayoutValidatorFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"d5dbb7678f5274bfe50614f8ec325581c8430e7dcf461cde45f9196b1289e778.zip"},"environment":{"variables":{"LAYOUT_TEMPLATES_BUCKET":{"Ref":"LayoutTemplatesBucket49D24765"},"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["LayoutValidatorFnServiceRole0B4ED411","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"LayoutTemplatesBucketName":{"id":"LayoutTemplatesBucketName","path":"LayoutEngineStack/LayoutTemplatesBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"LayoutValidatorFnArn":{"id":"LayoutValidatorFnArn","path":"LayoutEngineStack/LayoutValidatorFnArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"LayoutEngineStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"LayoutEngineStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"LayoutEngineStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"LayoutValidatorFn6B19766D\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"LayoutValidatorFn6B19766D\",\"Arn\"]}","path":"LayoutEngineStack/Exports/Output{\"Fn::GetAtt\":[\"LayoutValidatorFn6B19766D\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"LayoutEngineStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"LayoutEngineStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"PrimeStudiosStack":{"id":"PrimeStudiosStack","path":"PrimeStudiosStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"EpisodeComponentsFn":{"id":"EpisodeComponentsFn","path":"PrimeStudiosStack/EpisodeComponentsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/EpisodeComponentsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/EpisodeComponentsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeComponentsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/EpisodeComponentsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeComponentsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"EpisodeComponentsFnServiceRoleDefaultPolicy0CC39D82","roles":[{"Ref":"EpisodeComponentsFnServiceRole38E5C563"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/EpisodeComponentsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/EpisodeComponentsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/EpisodeComponentsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeComponentsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"bd4439fe74776cf5d4880361ada1ab8baed03d44f001a11b02adafdd0913dfd7.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["EpisodeComponentsFnServiceRole38E5C563","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"EpisodeAssemblerFn":{"id":"EpisodeAssemblerFn","path":"PrimeStudiosStack/EpisodeAssemblerFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/EpisodeAssemblerFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/EpisodeAssemblerFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeAssemblerFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/EpisodeAssemblerFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeAssemblerFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"EpisodeAssemblerFnServiceRoleDefaultPolicy1A0DBD15","roles":[{"Ref":"EpisodeAssemblerFnServiceRoleA4450BAD"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/EpisodeAssemblerFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/EpisodeAssemblerFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/EpisodeAssemblerFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeAssemblerFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"98867a0fee8f663e0632ec7773363bb74c77f74a2747b0d97839badf27a51732.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["EpisodeAssemblerFnServiceRoleA4450BAD","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":30}}}}},"ScriptReviewFn":{"id":"ScriptReviewFn","path":"PrimeStudiosStack/ScriptReviewFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/ScriptReviewFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/ScriptReviewFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/ScriptReviewFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/ScriptReviewFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/ScriptReviewFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ScriptReviewFnServiceRoleDefaultPolicy2CE1C332","roles":[{"Ref":"ScriptReviewFnServiceRoleC89ADEC5"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/ScriptReviewFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/ScriptReviewFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/ScriptReviewFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/ScriptReviewFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"79aca047b8d7812cc5cae2a2292f0de8810d57bd4ed01cad0492eaeb9292bf67.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ScriptReviewFnServiceRoleC89ADEC5","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":20}}}}},"CoinsLedgerFn":{"id":"CoinsLedgerFn","path":"PrimeStudiosStack/CoinsLedgerFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/CoinsLedgerFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/CoinsLedgerFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/CoinsLedgerFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/CoinsLedgerFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/CoinsLedgerFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CoinsLedgerFnServiceRoleDefaultPolicy344DB649","roles":[{"Ref":"CoinsLedgerFnServiceRole1167D54A"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/CoinsLedgerFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/CoinsLedgerFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/CoinsLedgerFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/CoinsLedgerFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"151cb289d6ad59f4b737d41d50123a02965ff83919353a2c4b181eaaa6193f18.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["CoinsLedgerFnServiceRole1167D54A","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"CareerArchiveFn":{"id":"CareerArchiveFn","path":"PrimeStudiosStack/CareerArchiveFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/CareerArchiveFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/CareerArchiveFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/CareerArchiveFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/CareerArchiveFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/CareerArchiveFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CareerArchiveFnServiceRoleDefaultPolicy52520EB4","roles":[{"Ref":"CareerArchiveFnServiceRole2A0AA547"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/CareerArchiveFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/CareerArchiveFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/CareerArchiveFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/CareerArchiveFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"5f6db37f384f0acf4a06be25df7aaf8760f524015704e3ed8df310cd4bf54aba.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["CareerArchiveFnServiceRole2A0AA547","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":20}}}}},"PollManagerFn":{"id":"PollManagerFn","path":"PrimeStudiosStack/PollManagerFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/PollManagerFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/PollManagerFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/PollManagerFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/PollManagerFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/PollManagerFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"PollManagerFnServiceRoleDefaultPolicyAF346358","roles":[{"Ref":"PollManagerFnServiceRole95D5FFB6"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/PollManagerFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/PollManagerFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/PollManagerFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/PollManagerFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"f73301f398fa28e900a663f07912cadb2590dbc46eba3237e645e3571e7c58b4.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["PollManagerFnServiceRole95D5FFB6","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"MockSocialFeedFn":{"id":"MockSocialFeedFn","path":"PrimeStudiosStack/MockSocialFeedFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeStudiosStack/MockSocialFeedFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeStudiosStack/MockSocialFeedFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/MockSocialFeedFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/MockSocialFeedFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/MockSocialFeedFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"MockSocialFeedFnServiceRoleDefaultPolicyC0B19AB8","roles":[{"Ref":"MockSocialFeedFnServiceRole2F396A3D"}]}}}}}}},"Code":{"id":"Code","path":"PrimeStudiosStack/MockSocialFeedFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeStudiosStack/MockSocialFeedFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeStudiosStack/MockSocialFeedFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/MockSocialFeedFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"41877a33cb3b78c6ca6ad84b2c8ea209275cccdb90801732231a55956b21844d.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","ADMIN_GROUP_NAME":"admin","CREATOR_GROUP_NAME":"creator","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["MockSocialFeedFnServiceRole2F396A3D","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"GenerateEpisodeComponents":{"id":"GenerateEpisodeComponents","path":"PrimeStudiosStack/GenerateEpisodeComponents","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"AssembleEpisode":{"id":"AssembleEpisode","path":"PrimeStudiosStack/AssembleEpisode","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"LayoutCheck":{"id":"LayoutCheck","path":"PrimeStudiosStack/LayoutCheck","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"EpisodeProductionStateMachine":{"id":"EpisodeProductionStateMachine","path":"PrimeStudiosStack/EpisodeProductionStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["EpisodeComponentsFn056D8E2C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpisodeComponentsFn056D8E2C","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["EpisodeAssemblerFn6D82F1DD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpisodeAssemblerFn6D82F1DD","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},{"Fn::Join":["",[{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},":*"]]}]},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"EpisodeProductionStateMachineRoleDefaultPolicyFB4AF342","roles":[{"Ref":"EpisodeProductionStateMachineRole766FA6BC"}]}}}}}}},"Resource":{"id":"Resource","path":"PrimeStudiosStack/EpisodeProductionStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"GenerateEpisodeComponents\",\"States\":{\"GenerateEpisodeComponents\":{\"Next\":\"AssembleEpisode\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["EpisodeComponentsFn056D8E2C","Arn"]},"\"},\"AssembleEpisode\":{\"Next\":\"LayoutCheck\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["EpisodeAssemblerFn6D82F1DD","Arn"]},"\"},\"LayoutCheck\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},"\"}}}"]]},"roleArn":{"Fn::GetAtt":["EpisodeProductionStateMachineRole766FA6BC","Arn"]},"stateMachineName":"SA2-PrimeStudios-Production-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"EpisodeProductionSmArn":{"id":"EpisodeProductionSmArn","path":"PrimeStudiosStack/EpisodeProductionSmArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"PrimeStudiosStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"PrimeStudiosStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PrimeStudiosStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PrimeStudiosStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"PrimeBankStack":{"id":"PrimeBankStack","path":"PrimeBankStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"PrimeBankAccountTable":{"id":"PrimeBankAccountTable","path":"PrimeBankStack/PrimeBankAccountTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeBankStack/PrimeBankAccountTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"userId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"userId","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"sa-dev-prime-bank-account","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"PrimeBankStack/PrimeBankAccountTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"PrimeBankTransactionTable":{"id":"PrimeBankTransactionTable","path":"PrimeBankStack/PrimeBankTransactionTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeBankStack/PrimeBankTransactionTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"userId","attributeType":"S"},{"attributeName":"timestamp","attributeType":"S"},{"attributeName":"currency","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"currency-timestamp-index","keySchema":[{"attributeName":"currency","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"userId","keyType":"HASH"},{"attributeName":"timestamp","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"sa-dev-prime-bank-txn","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"ScalingRole":{"id":"ScalingRole","path":"PrimeBankStack/PrimeBankTransactionTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"AwardPrimeCoinsFn":{"id":"AwardPrimeCoinsFn","path":"PrimeBankStack/AwardPrimeCoinsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeBankStack/AwardPrimeCoinsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeBankStack/AwardPrimeCoinsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeBankStack/AwardPrimeCoinsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeBankStack/AwardPrimeCoinsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeBankStack/AwardPrimeCoinsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PrimeBankAccountTable32D613E1","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PrimeBankTransactionTableCB2A4A5D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PrimeBankTransactionTableCB2A4A5D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AwardPrimeCoinsFnServiceRoleDefaultPolicy7F21CD22","roles":[{"Ref":"AwardPrimeCoinsFnServiceRole4FDA7E71"}]}}}}}}},"Code":{"id":"Code","path":"PrimeBankStack/AwardPrimeCoinsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeBankStack/AwardPrimeCoinsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeBankStack/AwardPrimeCoinsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeBankStack/AwardPrimeCoinsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"3d8748af8af9e39c04f47be81b9531de7a04cdf1b51469524fb6e55e55b4af11.zip"},"environment":{"variables":{"PRIME_BANK_ACCOUNT_TABLE_NAME":{"Ref":"PrimeBankAccountTable32D613E1"},"PRIME_BANK_TRANSACTION_TABLE_NAME":{"Ref":"PrimeBankTransactionTableCB2A4A5D"}}},"handler":"index.handler","role":{"Fn::GetAtt":["AwardPrimeCoinsFnServiceRole4FDA7E71","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"AwardCreatorCreditsFn":{"id":"AwardCreatorCreditsFn","path":"PrimeBankStack/AwardCreatorCreditsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeBankStack/AwardCreatorCreditsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeBankStack/AwardCreatorCreditsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeBankStack/AwardCreatorCreditsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeBankStack/AwardCreatorCreditsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeBankStack/AwardCreatorCreditsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PrimeBankAccountTable32D613E1","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PrimeBankTransactionTableCB2A4A5D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PrimeBankTransactionTableCB2A4A5D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AwardCreatorCreditsFnServiceRoleDefaultPolicy23AB6F6B","roles":[{"Ref":"AwardCreatorCreditsFnServiceRoleCAC26578"}]}}}}}}},"Code":{"id":"Code","path":"PrimeBankStack/AwardCreatorCreditsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeBankStack/AwardCreatorCreditsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeBankStack/AwardCreatorCreditsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeBankStack/AwardCreatorCreditsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"9ca99a8d040986e2f0a6c81ba00e51fcd0189000f1a7f50ff14375e1843a1e6e.zip"},"environment":{"variables":{"PRIME_BANK_ACCOUNT_TABLE_NAME":{"Ref":"PrimeBankAccountTable32D613E1"},"PRIME_BANK_TRANSACTION_TABLE_NAME":{"Ref":"PrimeBankTransactionTableCB2A4A5D"}}},"handler":"index.handler","role":{"Fn::GetAtt":["AwardCreatorCreditsFnServiceRoleCAC26578","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"CalculateBankMeterFn":{"id":"CalculateBankMeterFn","path":"PrimeBankStack/CalculateBankMeterFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeBankStack/CalculateBankMeterFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeBankStack/CalculateBankMeterFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeBankStack/CalculateBankMeterFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeBankStack/CalculateBankMeterFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeBankStack/CalculateBankMeterFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PrimeBankAccountTable32D613E1","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PrimeBankTransactionTableCB2A4A5D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PrimeBankTransactionTableCB2A4A5D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CalculateBankMeterFnServiceRoleDefaultPolicy9EDD64F1","roles":[{"Ref":"CalculateBankMeterFnServiceRole4D66D080"}]}}}}}}},"Code":{"id":"Code","path":"PrimeBankStack/CalculateBankMeterFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeBankStack/CalculateBankMeterFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeBankStack/CalculateBankMeterFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeBankStack/CalculateBankMeterFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"c83ac07014f7a5ab27a06cddbce9700ea7d22947d669f78314b75f27c9baf69f.zip"},"environment":{"variables":{"PRIME_BANK_ACCOUNT_TABLE_NAME":{"Ref":"PrimeBankAccountTable32D613E1"},"PRIME_BANK_TRANSACTION_TABLE_NAME":{"Ref":"PrimeBankTransactionTableCB2A4A5D"}}},"handler":"index.handler","role":{"Fn::GetAtt":["CalculateBankMeterFnServiceRole4D66D080","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"EnforceEarningCapsFn":{"id":"EnforceEarningCapsFn","path":"PrimeBankStack/EnforceEarningCapsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PrimeBankStack/EnforceEarningCapsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PrimeBankStack/EnforceEarningCapsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PrimeBankStack/EnforceEarningCapsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PrimeBankStack/EnforceEarningCapsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PrimeBankStack/EnforceEarningCapsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PrimeBankAccountTable32D613E1","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PrimeBankTransactionTableCB2A4A5D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PrimeBankTransactionTableCB2A4A5D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"EnforceEarningCapsFnServiceRoleDefaultPolicy49E87F0A","roles":[{"Ref":"EnforceEarningCapsFnServiceRole238C17C7"}]}}}}}}},"Code":{"id":"Code","path":"PrimeBankStack/EnforceEarningCapsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PrimeBankStack/EnforceEarningCapsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PrimeBankStack/EnforceEarningCapsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PrimeBankStack/EnforceEarningCapsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"76802ec6922875b39ff8108d0071ae19c4bde542a13c049119804957eca7b370.zip"},"environment":{"variables":{"PRIME_BANK_ACCOUNT_TABLE_NAME":{"Ref":"PrimeBankAccountTable32D613E1"},"PRIME_BANK_TRANSACTION_TABLE_NAME":{"Ref":"PrimeBankTransactionTableCB2A4A5D"}}},"handler":"index.handler","role":{"Fn::GetAtt":["EnforceEarningCapsFnServiceRole238C17C7","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"PrimeBankAccountTableName":{"id":"PrimeBankAccountTableName","path":"PrimeBankStack/PrimeBankAccountTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"PrimeBankTransactionTableName":{"id":"PrimeBankTransactionTableName","path":"PrimeBankStack/PrimeBankTransactionTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"PrimeBankStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"PrimeBankStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PrimeBankStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PrimeBankStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"PublishingStack":{"id":"PublishingStack","path":"PublishingStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"ValidateEpisodeFn":{"id":"ValidateEpisodeFn","path":"PublishingStack/ValidateEpisodeFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PublishingStack/ValidateEpisodeFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PublishingStack/ValidateEpisodeFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PublishingStack/ValidateEpisodeFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PublishingStack/ValidateEpisodeFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PublishingStack/ValidateEpisodeFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ValidateEpisodeFnServiceRoleDefaultPolicyAF5E26F3","roles":[{"Ref":"ValidateEpisodeFnServiceRole84737477"}]}}}}}}},"Code":{"id":"Code","path":"PublishingStack/ValidateEpisodeFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PublishingStack/ValidateEpisodeFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PublishingStack/ValidateEpisodeFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PublishingStack/ValidateEpisodeFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"96c28755c24b39d5930df9e37cd644c218b49751a242c45f7216a94cd8d61de9.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ValidateEpisodeFnServiceRole84737477","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}}}},"PublishEpisodeFn":{"id":"PublishEpisodeFn","path":"PublishingStack/PublishEpisodeFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PublishingStack/PublishEpisodeFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PublishingStack/PublishEpisodeFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PublishingStack/PublishEpisodeFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PublishingStack/PublishEpisodeFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PublishingStack/PublishEpisodeFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"PublishEpisodeFnServiceRoleDefaultPolicyF0E6D0AA","roles":[{"Ref":"PublishEpisodeFnServiceRole58B94D4B"}]}}}}}}},"Code":{"id":"Code","path":"PublishingStack/PublishEpisodeFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PublishingStack/PublishEpisodeFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PublishingStack/PublishEpisodeFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PublishingStack/PublishEpisodeFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"af75fad9412b06125f76e268deb05f7d3ca4b975f7df8cbaac9a95066635f0f6.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["PublishEpisodeFnServiceRole58B94D4B","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":15}}}}},"FailEpisodeFn":{"id":"FailEpisodeFn","path":"PublishingStack/FailEpisodeFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PublishingStack/FailEpisodeFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PublishingStack/FailEpisodeFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PublishingStack/FailEpisodeFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PublishingStack/FailEpisodeFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PublishingStack/FailEpisodeFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"FailEpisodeFnServiceRoleDefaultPolicy3F676F6E","roles":[{"Ref":"FailEpisodeFnServiceRoleF843741D"}]}}}}}}},"Code":{"id":"Code","path":"PublishingStack/FailEpisodeFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PublishingStack/FailEpisodeFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PublishingStack/FailEpisodeFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PublishingStack/FailEpisodeFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"99777fc4557b1b7e0bff17298cc23841bea7754261499413850e1cbfaf396394.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"PK_NAME":"pk","SK_NAME":"sk","STATUS_GSI":"gsi1","NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["FailEpisodeFnServiceRoleF843741D","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":5}}}}},"ValidateEpisode":{"id":"ValidateEpisode","path":"PublishingStack/ValidateEpisode","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"LayoutChecklist":{"id":"LayoutChecklist","path":"PublishingStack/LayoutChecklist","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"PublishEpisode":{"id":"PublishEpisode","path":"PublishingStack/PublishEpisode","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"MarkEpisodeFailed":{"id":"MarkEpisodeFailed","path":"PublishingStack/MarkEpisodeFailed","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.223.0"}},"LayoutOk?":{"id":"LayoutOk?","path":"PublishingStack/LayoutOk?","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Choice","version":"2.223.0"}},"EpisodePublishingStateMachine":{"id":"EpisodePublishingStateMachine","path":"PublishingStack/EpisodePublishingStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.223.0","metadata":[]},"children":{"Role":{"id":"Role","path":"PublishingStack/EpisodePublishingStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"PublishingStack/EpisodePublishingStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PublishingStack/EpisodePublishingStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PublishingStack/EpisodePublishingStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PublishingStack/EpisodePublishingStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ValidateEpisodeFnE8E9DE49","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ValidateEpisodeFnE8E9DE49","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["FailEpisodeFnEAD37F30","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FailEpisodeFnEAD37F30","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},{"Fn::Join":["",[{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["PublishEpisodeFn42749809","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PublishEpisodeFn42749809","Arn"]},":*"]]}]},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"EpisodePublishingStateMachineRoleDefaultPolicy0227225F","roles":[{"Ref":"EpisodePublishingStateMachineRole2C63FFF7"}]}}}}}}},"Resource":{"id":"Resource","path":"PublishingStack/EpisodePublishingStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"ValidateEpisode\",\"States\":{\"ValidateEpisode\":{\"Next\":\"LayoutOk?\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["ValidateEpisodeFnE8E9DE49","Arn"]},"\"},\"LayoutOk?\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.layoutValid\",\"BooleanEquals\":true,\"Next\":\"LayoutChecklist\"}],\"Default\":\"MarkEpisodeFailed\"},\"MarkEpisodeFailed\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["FailEpisodeFnEAD37F30","Arn"]},"\"},\"LayoutChecklist\":{\"Next\":\"PublishEpisode\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::ImportValue":"LayoutEngineStack:ExportsOutputFnGetAttLayoutValidatorFn6B19766DArnDDBB8380"},"\"},\"PublishEpisode\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"Resource\":\"",{"Fn::GetAtt":["PublishEpisodeFn42749809","Arn"]},"\"}}}"]]},"roleArn":{"Fn::GetAtt":["EpisodePublishingStateMachineRole2C63FFF7","Arn"]},"stateMachineName":"SA2-PrimeStudios-Publish-dev","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"tracingConfiguration":{"enabled":true}}}}}},"EpisodePublishingSmArn":{"id":"EpisodePublishingSmArn","path":"PublishingStack/EpisodePublishingSmArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"PublishingStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"PublishingStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PublishingStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PublishingStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"CollaboratorStack":{"id":"CollaboratorStack","path":"CollaboratorStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"CollaboratorBus":{"id":"CollaboratorBus","path":"CollaboratorStack/CollaboratorBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"name":"sa-CollaboratorStack-collab"}}}}},"CollaboratorDeadlineTopic":{"id":"CollaboratorDeadlineTopic","path":"CollaboratorStack/CollaboratorDeadlineTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"StylingAdventures Collaborator Deadlines","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"topicName":"sa-dev-collab-deadlines"}}},"Policy":{"id":"Policy","path":"CollaboratorStack/CollaboratorDeadlineTopic/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.TopicPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineTopic/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopicPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::TopicPolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"Sid":"0"}],"Version":"2012-10-17"},"topics":[{"Ref":"CollaboratorDeadlineTopic2DF72641"}]}}}}}}},"CreateCollaboratorInviteFn":{"id":"CreateCollaboratorInviteFn","path":"CollaboratorStack/CreateCollaboratorInviteFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/CreateCollaboratorInviteFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/CreateCollaboratorInviteFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/CreateCollaboratorInviteFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/CreateCollaboratorInviteFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CreateCollaboratorInviteFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CreateCollaboratorInviteFnServiceRoleDefaultPolicy737904CA","roles":[{"Ref":"CreateCollaboratorInviteFnServiceRole2F228E1F"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/CreateCollaboratorInviteFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/CreateCollaboratorInviteFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/CreateCollaboratorInviteFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/CreateCollaboratorInviteFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"8518e062a45ee8894129dad01a444dea709af344abd36c82137b9449af75a343.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","CREATE_INVITE_ALLOWED_GROUPS":"creator,admin","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["CreateCollaboratorInviteFnServiceRole2F228E1F","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AcceptCollaboratorInviteFn":{"id":"AcceptCollaboratorInviteFn","path":"CollaboratorStack/AcceptCollaboratorInviteFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/AcceptCollaboratorInviteFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/AcceptCollaboratorInviteFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorInviteFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/AcceptCollaboratorInviteFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorInviteFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AcceptCollaboratorInviteFnServiceRoleDefaultPolicyE2A2F1AE","roles":[{"Ref":"AcceptCollaboratorInviteFnServiceRole28BAC2DD"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/AcceptCollaboratorInviteFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/AcceptCollaboratorInviteFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/AcceptCollaboratorInviteFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorInviteFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"ff542a0a18ebff2018aa4133187a39165e6bb3f9dcce22a5c768d67de207c906.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AcceptCollaboratorInviteFnServiceRole28BAC2DD","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AcceptCollaboratorTermsFn":{"id":"AcceptCollaboratorTermsFn","path":"CollaboratorStack/AcceptCollaboratorTermsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/AcceptCollaboratorTermsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/AcceptCollaboratorTermsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorTermsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/AcceptCollaboratorTermsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorTermsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AcceptCollaboratorTermsFnServiceRoleDefaultPolicyB181B8F7","roles":[{"Ref":"AcceptCollaboratorTermsFnServiceRoleD987CC24"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/AcceptCollaboratorTermsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/AcceptCollaboratorTermsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/AcceptCollaboratorTermsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/AcceptCollaboratorTermsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"a2ab131d395502c4fd32bb752dcce781caccac81195d96803e224b698a30586d.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AcceptCollaboratorTermsFnServiceRoleD987CC24","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"CollaboratorUploadFn":{"id":"CollaboratorUploadFn","path":"CollaboratorStack/CollaboratorUploadFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/CollaboratorUploadFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/CollaboratorUploadFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorUploadFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/CollaboratorUploadFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorUploadFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"CollaboratorUploadFnServiceRoleDefaultPolicy86261802","roles":[{"Ref":"CollaboratorUploadFnServiceRoleB23376CF"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/CollaboratorUploadFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/CollaboratorUploadFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/CollaboratorUploadFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorUploadFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"331f4fc9119c04169e9a9821cc6fc963f7f63c7f2a58888f866f3a5e679a5a94.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["CollaboratorUploadFnServiceRoleB23376CF","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"CollaboratorAdminReviewFn":{"id":"CollaboratorAdminReviewFn","path":"CollaboratorStack/CollaboratorAdminReviewFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/CollaboratorAdminReviewFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/CollaboratorAdminReviewFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorAdminReviewFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/CollaboratorAdminReviewFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorAdminReviewFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["CollaboratorBus521A8115","Arn"]}}],"Version":"2012-10-17"},"policyName":"CollaboratorAdminReviewFnServiceRoleDefaultPolicyFC66485D","roles":[{"Ref":"CollaboratorAdminReviewFnServiceRole6E03FB8F"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/CollaboratorAdminReviewFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/CollaboratorAdminReviewFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/CollaboratorAdminReviewFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorAdminReviewFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"f2302ed0732c7b848c66d4f9aff12185c0343fd2117fcd58d8c76575ee995bcc.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","COLLAB_REVIEW_ALLOWED_GROUPS":"creator,admin","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["CollaboratorAdminReviewFnServiceRole6E03FB8F","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"CollaboratorDeadlineReminderFn":{"id":"CollaboratorDeadlineReminderFn","path":"CollaboratorStack/CollaboratorDeadlineReminderFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"CollaboratorDeadlineTopic2DF72641"}}],"Version":"2012-10-17"},"policyName":"CollaboratorDeadlineReminderFnServiceRoleDefaultPolicyEB34AC60","roles":[{"Ref":"CollaboratorDeadlineReminderFnServiceRole927F8F16"}]}}}}}}},"Code":{"id":"Code","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineReminderFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"e1b1b20a6f4bc2a634575b891e3b292a82217c46f62fc2618b48e43a8b85149c.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"COLLAB_EVENT_BUS_NAME":{"Ref":"CollaboratorBus521A8115"},"DEADLINE_TOPIC_ARN":{"Ref":"CollaboratorDeadlineTopic2DF72641"},"NODE_OPTIONS":"--enable-source-maps","ENV_NAME":"dev","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["CollaboratorDeadlineReminderFnServiceRole927F8F16","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"CollaboratorDeadlineScheduleRule":{"id":"CollaboratorDeadlineScheduleRule","path":"CollaboratorStack/CollaboratorDeadlineScheduleRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CollaboratorStack/CollaboratorDeadlineScheduleRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"scheduleExpression":"rate(15 minutes)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["CollaboratorDeadlineReminderFn08EEF9C6","Arn"]}}]}}},"AllowEventRuleCollaboratorStackCollaboratorDeadlineReminderFnF8B19ED7":{"id":"AllowEventRuleCollaboratorStackCollaboratorDeadlineReminderFnF8B19ED7","path":"CollaboratorStack/CollaboratorDeadlineScheduleRule/AllowEventRuleCollaboratorStackCollaboratorDeadlineReminderFnF8B19ED7","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CollaboratorDeadlineReminderFn08EEF9C6","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["CollaboratorDeadlineScheduleRuleEB7CE806","Arn"]}}}}}},"CollaboratorBusName":{"id":"CollaboratorBusName","path":"CollaboratorStack/CollaboratorBusName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CollaboratorDeadlineTopicArn":{"id":"CollaboratorDeadlineTopicArn","path":"CollaboratorStack/CollaboratorDeadlineTopicArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"CollaboratorStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"CollaboratorStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"CollaboratorStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"CollaboratorBus521A8115\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"CollaboratorBus521A8115\",\"Arn\"]}","path":"CollaboratorStack/Exports/Output{\"Fn::GetAtt\":[\"CollaboratorBus521A8115\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"CollaboratorBus521A8115\"}":{"id":"Output{\"Ref\":\"CollaboratorBus521A8115\"}","path":"CollaboratorStack/Exports/Output{\"Ref\":\"CollaboratorBus521A8115\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CollaboratorStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CollaboratorStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"PromoKitStack":{"id":"PromoKitStack","path":"PromoKitStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"PromoKitGeneratorFn":{"id":"PromoKitGeneratorFn","path":"PromoKitStack/PromoKitGeneratorFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PromoKitStack/PromoKitGeneratorFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PromoKitStack/PromoKitGeneratorFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PromoKitStack/PromoKitGeneratorFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PromoKitStack/PromoKitGeneratorFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PromoKitStack/PromoKitGeneratorFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"CollaboratorStack:ExportsOutputFnGetAttCollaboratorBus521A8115Arn168BD36A"}}],"Version":"2012-10-17"},"policyName":"PromoKitGeneratorFnServiceRoleDefaultPolicy6AEBFE60","roles":[{"Ref":"PromoKitGeneratorFnServiceRole21D00353"}]}}}}}}},"Code":{"id":"Code","path":"PromoKitStack/PromoKitGeneratorFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PromoKitStack/PromoKitGeneratorFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PromoKitStack/PromoKitGeneratorFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PromoKitStack/PromoKitGeneratorFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"ce2d452b137bc0c2e71e57e06833421f3b933cd5782500f8490265996292c1f4.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","PROMO_KIT_ALLOWED_GROUPS":"creator,admin","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["PromoKitGeneratorFnServiceRole21D00353","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"PromoKitOnCollabApprovedRule":{"id":"PromoKitOnCollabApprovedRule","path":"PromoKitStack/PromoKitOnCollabApprovedRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PromoKitStack/PromoKitOnCollabApprovedRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"eventBusName":{"Fn::ImportValue":"CollaboratorStack:ExportsOutputRefCollaboratorBus521A8115667FDE9E"},"eventPattern":{"source":["stylingadventures.collab"],"detail-type":["CollabUploadApproved"]},"state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["PromoKitGeneratorFn15AB3B69","Arn"]}}]}}},"AllowEventRulePromoKitStackPromoKitGeneratorFn117AD613":{"id":"AllowEventRulePromoKitStackPromoKitGeneratorFn117AD613","path":"PromoKitStack/PromoKitOnCollabApprovedRule/AllowEventRulePromoKitStackPromoKitGeneratorFn117AD613","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PromoKitGeneratorFn15AB3B69","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["PromoKitOnCollabApprovedRuleF104FA1A","Arn"]}}}}}},"EpisodePreviewFn":{"id":"EpisodePreviewFn","path":"PromoKitStack/EpisodePreviewFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PromoKitStack/EpisodePreviewFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PromoKitStack/EpisodePreviewFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PromoKitStack/EpisodePreviewFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PromoKitStack/EpisodePreviewFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PromoKitStack/EpisodePreviewFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"EpisodePreviewFnServiceRoleDefaultPolicy73339732","roles":[{"Ref":"EpisodePreviewFnServiceRole0F27822C"}]}}}}}}},"Code":{"id":"Code","path":"PromoKitStack/EpisodePreviewFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PromoKitStack/EpisodePreviewFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PromoKitStack/EpisodePreviewFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PromoKitStack/EpisodePreviewFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"aa0a4dfd3c968dfe2cbacf0047a31c5a43187e73a80a7e5b69638a448e3916cb.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","PREVIEW_ALLOWED_GROUPS":"creator,admin","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["EpisodePreviewFnServiceRole0F27822C","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"HallOfSlayFn":{"id":"HallOfSlayFn","path":"PromoKitStack/HallOfSlayFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"PromoKitStack/HallOfSlayFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"PromoKitStack/HallOfSlayFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"PromoKitStack/HallOfSlayFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PromoKitStack/HallOfSlayFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PromoKitStack/HallOfSlayFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"HallOfSlayFnServiceRoleDefaultPolicy18447A4B","roles":[{"Ref":"HallOfSlayFnServiceRoleA08ABBD7"}]}}}}}}},"Code":{"id":"Code","path":"PromoKitStack/HallOfSlayFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"PromoKitStack/HallOfSlayFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"PromoKitStack/HallOfSlayFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"PromoKitStack/HallOfSlayFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"d1775fa9b0ddd9392bb175d0e15c019b42fe4136cae33e38bd44620365234d5b.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["HallOfSlayFnServiceRoleA08ABBD7","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"PromoKitFunctionName":{"id":"PromoKitFunctionName","path":"PromoKitStack/PromoKitFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"EpisodePreviewFunctionName":{"id":"EpisodePreviewFunctionName","path":"PromoKitStack/EpisodePreviewFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"HallOfSlayFunctionName":{"id":"HallOfSlayFunctionName","path":"PromoKitStack/HallOfSlayFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"PromoKitStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"PromoKitStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PromoKitStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PromoKitStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"AdminStack":{"id":"AdminStack","path":"AdminStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"AdminModerationFn":{"id":"AdminModerationFn","path":"AdminStack/AdminModerationFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AdminStack/AdminModerationFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AdminStack/AdminModerationFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AdminStack/AdminModerationFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AdminStack/AdminModerationFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminModerationFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},{"Fn::Join":["",[{"Fn::ImportValue":"UploadsStack:ExportsOutputFnGetAttUploadsBucket5E5E9B64Arn8603C131"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AdminModerationFnServiceRoleDefaultPolicy3532FE68","roles":[{"Ref":"AdminModerationFnServiceRole53812CC4"}]}}}}}}},"Code":{"id":"Code","path":"AdminStack/AdminModerationFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AdminStack/AdminModerationFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AdminStack/AdminModerationFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AdminStack/AdminModerationFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"1bcc27d0bbac6a45b828beadbaa16f2958b39de1d88f2ff69405e97197cdf66e.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"ANALYTICS_BUCKET":{"Fn::ImportValue":"AnalyticsStack:ExportsOutputRefAnalyticsBucket39EAAEEA4B56ABBC"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"ADMIN_GROUP_NAME":"ADMIN","WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminModerationFnServiceRole53812CC4","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}}}},"AdminCommunityFn":{"id":"AdminCommunityFn","path":"AdminStack/AdminCommunityFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AdminStack/AdminCommunityFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AdminStack/AdminCommunityFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AdminStack/AdminCommunityFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AdminStack/AdminCommunityFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminCommunityFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["AdminEventsBus6482B417","Arn"]}}],"Version":"2012-10-17"},"policyName":"AdminCommunityFnServiceRoleDefaultPolicyC36F8ADD","roles":[{"Ref":"AdminCommunityFnServiceRole75F0FF62"}]}}}}}}},"Code":{"id":"Code","path":"AdminStack/AdminCommunityFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AdminStack/AdminCommunityFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AdminStack/AdminCommunityFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AdminStack/AdminCommunityFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"ae55446d23282f8060d19f35165c17bd544314683a41fdb8a2f8d8b96e2347ee.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"ANALYTICS_BUCKET":{"Fn::ImportValue":"AnalyticsStack:ExportsOutputRefAnalyticsBucket39EAAEEA4B56ABBC"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"ADMIN_GROUP_NAME":"ADMIN","WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","ADMIN_EVENT_SOURCE":"stylingadventures.admin","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminCommunityFnServiceRole75F0FF62","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}}}},"AdminEventsBus":{"id":"AdminEventsBus","path":"AdminStack/AdminEventsBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminEventsBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"name":"sa-dev-admin"}}}}},"AdminShoutoutsTopic":{"id":"AdminShoutoutsTopic","path":"AdminStack/AdminShoutoutsTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminShoutoutsTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"StylingAdventures Admin Shoutouts","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"AdminShoutoutsFn":{"id":"AdminShoutoutsFn","path":"AdminStack/AdminShoutoutsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AdminStack/AdminShoutoutsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AdminStack/AdminShoutoutsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AdminStack/AdminShoutoutsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AdminStack/AdminShoutoutsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminShoutoutsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"AdminShoutoutsTopicCEB148D5"}}],"Version":"2012-10-17"},"policyName":"AdminShoutoutsFnServiceRoleDefaultPolicy1C00FFCC","roles":[{"Ref":"AdminShoutoutsFnServiceRole12429FF8"}]}}}}}}},"Code":{"id":"Code","path":"AdminStack/AdminShoutoutsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AdminStack/AdminShoutoutsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AdminStack/AdminShoutoutsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AdminStack/AdminShoutoutsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"5a594f587f750bfd7b8695100dd21d29239acacd29d9a1742fba1187d1878714.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"ANALYTICS_BUCKET":{"Fn::ImportValue":"AnalyticsStack:ExportsOutputRefAnalyticsBucket39EAAEEA4B56ABBC"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"ADMIN_GROUP_NAME":"ADMIN","WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","SHOUTOUTS_TOPIC_ARN":{"Ref":"AdminShoutoutsTopicCEB148D5"},"AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminShoutoutsFnServiceRole12429FF8","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}}}},"AdminAnalyticsFn":{"id":"AdminAnalyticsFn","path":"AdminStack/AdminAnalyticsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AdminStack/AdminAnalyticsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AdminStack/AdminAnalyticsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AdminStack/AdminAnalyticsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AdminStack/AdminAnalyticsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AdminStack/AdminAnalyticsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"AnalyticsStack:ExportsOutputFnGetAttAnalyticsBucket39EAAEEAArn99FBDA6B"},{"Fn::Join":["",[{"Fn::ImportValue":"AnalyticsStack:ExportsOutputFnGetAttAnalyticsBucket39EAAEEAArn99FBDA6B"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"AdminAnalyticsFnServiceRoleDefaultPolicy92A756BE","roles":[{"Ref":"AdminAnalyticsFnServiceRole589BF811"}]}}}}}}},"Code":{"id":"Code","path":"AdminStack/AdminAnalyticsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AdminStack/AdminAnalyticsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AdminStack/AdminAnalyticsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AdminStack/AdminAnalyticsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"6abc6aba3a17aacf0d26bfd74d7a2491168c90e12753b34070571ce47b884017.zip"},"environment":{"variables":{"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"},"UPLOADS_BUCKET":{"Fn::ImportValue":"UploadsStack:ExportsOutputRefUploadsBucket5E5E9B64F2F56CC2"},"ANALYTICS_BUCKET":{"Fn::ImportValue":"AnalyticsStack:ExportsOutputRefAnalyticsBucket39EAAEEA4B56ABBC"},"USER_POOL_ID":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"ADMIN_GROUP_NAME":"ADMIN","WEB_ORIGIN":{"Fn::Join":["",["https://",{"Fn::ImportValue":"WebStack:ExportsOutputFnGetAttWebDistribution59C46482DomainNameC09D0E36"}]]},"ENV_NAME":"dev","NODE_OPTIONS":"--enable-source-maps","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"handler":"index.handler","role":{"Fn::GetAtt":["AdminAnalyticsFnServiceRole589BF811","Arn"]},"runtime":"nodejs16.x","tags":[{"key":"Access","value":"Admin"},{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"},{"key":"Scope","value":"Admin"}]}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"AdminStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"AdminStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"AdminStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"AdminStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"ApiStack":{"id":"ApiStack","path":"ApiStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"PrimeBankAccountImported":{"id":"PrimeBankAccountImported","path":"ApiStack/PrimeBankAccountImported","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.223.0","metadata":[]}},"StylingApi":{"id":"StylingApi","path":"ApiStack/StylingApi","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.GraphqlApi","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLApi","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLApi","aws:cdk:cloudformation:props":{"additionalAuthenticationProviders":[{"authenticationType":"AWS_IAM"}],"authenticationType":"AMAZON_COGNITO_USER_POOLS","name":"stylingadventures-api","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"userPoolConfig":{"userPoolId":{"Fn::ImportValue":"IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236"},"awsRegion":"us-east-1","defaultAction":"ALLOW"},"xrayEnabled":true}}},"Schema":{"id":"Schema","path":"ApiStack/StylingApi/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLSchema","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLSchema","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"definition":"# ===============================================\n# ⚠️  AUTO-GENERATED FILE — DO NOT EDIT\n#\n# Generated by: scripts/build-schema.mjs\n# Source: appsync/schema/*.graphql\n# ===============================================\n\n# -----------------------------------------------\n# 00_scalars.graphql\n# -----------------------------------------------\n\n# ─────────────────────────────────────────\r\n# Scalars (AppSync + common)\r\n# ─────────────────────────────────────────\r\n\r\nscalar AWSDateTime\r\nscalar AWSDate\r\nscalar AWSJSON\n\n# -----------------------------------------------\n# 01_directives.graphql\n# -----------------------------------------------\n\n# ─────────────────────────────────────────\r\n# AppSync auth directives (used throughout schema)\r\n# ─────────────────────────────────────────\r\n\r\ndirective @aws_cognito_user_pools on FIELD_DEFINITION | OBJECT\r\ndirective @aws_auth(cognito_groups: [String!]) on FIELD_DEFINITION | OBJECT\n\n# -----------------------------------------------\n# 10_root.graphql\n# -----------------------------------------------\n\n# ─────────────────────────────────────────\r\n# Root operation shells ONLY\r\n# (Domain modules must use: extend type Query / extend type Mutation)\r\n# ─────────────────────────────────────────\r\n\r\ntype Query {\r\n  _root: String\r\n}\r\n\r\ntype Mutation {\r\n  _root: String\r\n}\n\n# -----------------------------------------------\n# 15_core.graphql\n# -----------------------------------------------\n\n# ─────────────────────────────────────────\r\n# Core / Auth\r\n# ─────────────────────────────────────────\r\n\r\ntype Me {\r\n  id: ID!\r\n  email: String!\r\n  role: String!\r\n  tier: String!\r\n}\r\n\r\ntype RoleResult {\r\n  userId: ID!\r\n  role: String!\r\n}\r\n\r\nextend type Query {\r\n  # Simple healthcheck (used by hello.graphql in site/src/graphql)\r\n  hello: String\r\n\r\n  # Current user basic info\r\n  me: Me! @aws_cognito_user_pools\r\n}\r\n\r\nextend type Mutation {\r\n  setUserRole(userId: ID!, role: String!): RoleResult!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n}\n\n# -----------------------------------------------\n# 20_closet.graphql\n# -----------------------------------------------\n\n# ─────────────────────────────────────────\r\n# Closet domain\r\n# Owns: closet enums, types, inputs, bg change request types, comments, likes\r\n# ─────────────────────────────────────────\r\n\r\n# ─────────────────────────────────────────\r\n# Enums\r\n# ─────────────────────────────────────────\r\n\r\nenum ClosetAudience {\r\n  PUBLIC\r\n  BESTIES\r\n  EXCLUSIVE\r\n}\r\n\r\nenum ClosetVisibility {\r\n  PRIVATE\r\n  BESTIE\r\n  PUBLIC\r\n}\r\n\r\n# Expanded to match values used by backend/workflows and to avoid\r\n# AppSync \"Invalid input for Enum 'ClosetStatus'\" serialization errors.\r\nenum ClosetStatus {\r\n  DRAFT\r\n  PENDING\r\n  PENDING_PUBLISH\r\n  APPROVED\r\n  PUBLISHED\r\n  REJECTED\r\n  ARCHIVED\r\n  FAILED\r\n  EXPIRED\r\n}\r\n\r\nenum ClosetFeedSort {\r\n  NEWEST\r\n  MOST_LOVED\r\n  LALAS_PICK\r\n  MY_FAVES\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Core types\r\n# ─────────────────────────────────────────\r\n\r\ntype ClosetItem {\r\n  id: ID!\r\n  ownerId: ID\r\n  ownerSub: ID\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility!\r\n  affiliateUrl: String\r\n  episodeIds: [ID!]\r\n  status: ClosetStatus!\r\n  audience: ClosetAudience\r\n  pinned: Boolean\r\n  favoriteCount: Int\r\n  coinValue: Int\r\n  backgroundStatus: String\r\n  scheduledAt: AWSDateTime\r\n  createdAt: AWSDateTime\r\n  updatedAt: AWSDateTime\r\n}\r\n\r\ntype ClosetConnection {\r\n  items: [ClosetItem!]!\r\n  nextToken: String\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Comments & Likes\r\n# ─────────────────────────────────────────\r\n\r\ntype Comment {\r\n  id: ID!\r\n  itemId: ID!\r\n  userId: ID!\r\n  text: String!\r\n  createdAt: AWSDateTime!\r\n}\r\n\r\ntype CommentConnection {\r\n  items: [Comment!]!\r\n  nextToken: String\r\n}\r\n\r\ntype Like {\r\n  itemId: ID!\r\n  userId: ID!\r\n  createdAt: AWSDateTime!\r\n}\r\n\r\ntype LikeConnection {\r\n  items: [Like!]!\r\n  nextToken: String\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Inputs\r\n# ─────────────────────────────────────────\r\n\r\ninput CreateClosetItemInput {\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility\r\n  affiliateUrl: String\r\n  episodeIds: [ID!]\r\n}\r\n\r\ninput UpdateClosetItemStoryInput {\r\n  itemId: ID!\r\n  storyId: ID\r\n  storyPosition: Int\r\n}\r\n\r\ninput CommentOnClosetItemInput {\r\n  itemId: ID!\r\n  text: String!\r\n}\r\n\r\ninput BestieCreateClosetItemInput {\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility\r\n  affiliateUrl: String\r\n  episodeIds: [ID!]\r\n}\r\n\r\ninput BestieUpdateClosetItemInput {\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility\r\n  affiliateUrl: String\r\n  episodeIds: [ID!]\r\n}\r\n\r\ninput AdminCreateClosetItemInput {\r\n  ownerId: ID\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility\r\n  affiliateUrl: String\r\n  episodeIds: [ID!]\r\n  status: ClosetStatus\r\n  audience: ClosetAudience\r\n  pinned: Boolean\r\n  coinValue: Int\r\n  backgroundStatus: String\r\n}\r\n\r\ninput AdminUpdateClosetItemInput {\r\n  id: ID!\r\n  ownerId: ID\r\n  title: String\r\n  mediaKey: String\r\n  rawMediaKey: String\r\n  category: String\r\n  subcategory: String\r\n  colorTags: [String!]\r\n  season: String\r\n  vibes: String\r\n  notes: String\r\n  visibility: ClosetVisibility\r\n  affiliateUrl: String\r\n  episodeIds: [ID!]\r\n  status: ClosetStatus\r\n  audience: ClosetAudience\r\n  pinned: Boolean\r\n  coinValue: Int\r\n  backgroundStatus: String\r\n  scheduledAt: AWSDateTime\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Query operations\r\n# ─────────────────────────────────────────\r\n\r\nextend type Query {\r\n  myCloset(limit: Int, nextToken: String): ClosetConnection!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n\r\n  myWishlist(limit: Int, nextToken: String): ClosetConnection!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n\r\n  bestieClosetItems(limit: Int, nextToken: String): ClosetConnection!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n\r\n  closetItemComments(itemId: ID!, limit: Int, nextToken: String): CommentConnection!\r\n    @aws_cognito_user_pools\r\n\r\n  adminClosetItemLikes(itemId: ID!, limit: Int, nextToken: String): LikeConnection!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  adminClosetItemComments(itemId: ID!, limit: Int, nextToken: String): CommentConnection!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  adminListPending(limit: Int, nextToken: String): ClosetConnection!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  adminListClosetItems(status: ClosetStatus, limit: Int, nextToken: String): ClosetConnection!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  adminListBestieClosetItems(status: ClosetStatus, limit: Int, nextToken: String): ClosetConnection!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  closetFeed(sort: ClosetFeedSort, limit: Int, nextToken: String): ClosetConnection!\r\n    @aws_cognito_user_pools\r\n\r\n  pinnedClosetItems: [ClosetItem!]!\r\n    @aws_cognito_user_pools\r\n}\r\n\r\n# ─────────────────────────────────────────\r\n# Mutation operations\r\n# ─────────────────────────────────────────\r\n\r\nextend type Mutation {\r\n  createClosetItem(input: CreateClosetItemInput!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n\r\n  requestClosetApproval(itemId: ID!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n\r\n  updateClosetMediaKey(itemId: ID!, mediaKey: String!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n\r\n  updateClosetItemStory(input: UpdateClosetItemStoryInput!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n\r\n  likeClosetItem(itemId: ID!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n\r\n  toggleFavoriteClosetItem(id: ID!, favoriteOn: Boolean): ClosetItem!\r\n    @aws_cognito_user_pools\r\n\r\n  commentOnClosetItem(input: CommentOnClosetItemInput!): Comment!\r\n    @aws_cognito_user_pools\r\n\r\n  bestieCreateClosetItem(input: BestieCreateClosetItemInput!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n\r\n  bestieUpdateClosetItem(id: ID!, input: BestieUpdateClosetItemInput!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n\r\n  bestieDeleteClosetItem(id: ID!): Boolean!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n\r\n  adminCreateClosetItem(input: AdminCreateClosetItemInput!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  adminApproveItem(closetItemId: ID!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  adminRejectItem(closetItemId: ID!, reason: String): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  adminPublishClosetItem(closetItemId: ID!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  adminSetClosetAudience(closetItemId: ID!, audience: ClosetAudience!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  adminUpdateClosetItem(input: AdminUpdateClosetItemInput!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  # ─────────────────────────────────────────\r\n  # ✅ Added to match ApiStack resolvers\r\n  # ─────────────────────────────────────────\r\n\r\n  pinHighlight(id: ID!, pinned: Boolean): ClosetItem!\r\n    @aws_cognito_user_pools\r\n\r\n  toggleWishlistItem(id: ID!, wishlistOn: Boolean): ClosetItem!\r\n    @aws_cognito_user_pools\r\n\r\n  addClosetItemToCommunityFeed(id: ID!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  removeClosetItemFromCommunityFeed(id: ID!): ClosetItem!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n\r\n  shareClosetItemToPinterest(id: ID!): AWSJSON!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r\n}\n\n# -----------------------------------------------\n# 25_bg-change.graphql\n# -----------------------------------------------\n\ninput BgChangeRequestInput {\r\n  itemId: ID!\r\n  newBackgroundKey: String!\r\n  notes: String\r\n}\r\n\r\ntype BgChangeRequestResult {\r\n  ok: Boolean!\r\n  requestId: ID\r\n}\n\n# -----------------------------------------------\n# 30_bestie.graphql\n# -----------------------------------------------\n\n# ─────────────────────────────────────────\r\n# Bestie workflow + membership types\r\n# ─────────────────────────────────────────\r\n\r\ntype BestieStatus {\r\n  userId: ID!\r\n  isBestie: Boolean!\r\n  tier: String\r\n  renewsAt: AWSDateTime\r\n  trialActive: Boolean\r\n  trialEndsAt: AWSDateTime\r\n}\r\n\r\ntype BestieCheckoutSession {\r\n  checkoutUrl: String!\r\n}\r\n\r\nextend type Mutation {\r\n  \"\"\"\r\n  Bestie workflow: request a background swap for a closet item.\r\n  \"\"\"\r\n  requestClosetBackgroundChange(input: BgChangeRequestInput!): BgChangeRequestResult!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n}\n\n# -----------------------------------------------\n# 40_stories.graphql\n# -----------------------------------------------\n\ntype BestieStory {\r\n  id: ID!\r\n  title: String!\r\n  body: String\r\n  createdAt: AWSDateTime!\r\n  updatedAt: AWSDateTime\r\n  status: BestieStoryStatus!\r\n  episodeId: ID\r\n  closetItemIds: [ID!]\r\n  mediaKeys: [String!]\r\n}\r\n\r\nenum BestieStoryStatus {\r\n  DRAFT\r\n  SCHEDULED\r\n  PUBLISHED\r\n  ARCHIVED\r\n}\r\n\r\ntype BestieStoryConnection {\r\n  items: [BestieStory!]!\r\n  nextToken: String\r\n}\r\n\r\ntype Story {\r\n  id: ID!\r\n  ownerId: ID!\r\n  title: String\r\n  status: String\r\n  createdAt: AWSDateTime\r\n  publishedAt: AWSDateTime\r\n}\r\n\r\ninput CreateStoryInput {\r\n  title: String!\r\n  closetItemIds: [ID!]\r\n}\r\n\r\nextend type Query {\r\n  stories(limit: Int, nextToken: String): BestieStoryConnection\r\n    @aws_cognito_user_pools\r\n\r\n  myStories(limit: Int, nextToken: String): BestieStoryConnection\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n}\r\n\r\nextend type Mutation {\r\n  createStory(input: CreateStoryInput!): Story!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n\r\n  publishStory(storyId: ID!): Story!\r\n    @aws_cognito_user_pools\r\n    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r\n}\n\n"}}},"LogGroup":{"id":"LogGroup","path":"ApiStack/StylingApi/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"HelloDs":{"id":"HelloDs","path":"ApiStack/StylingApi/HelloDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/HelloDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/HelloDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/HelloDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/HelloDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/HelloDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["HelloFn7942DF23","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["HelloFn7942DF23","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StylingApiHelloDsServiceRoleDefaultPolicy8C35E727","roles":[{"Ref":"StylingApiHelloDsServiceRole44626254"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/HelloDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["HelloFn7942DF23","Arn"]}},"name":"HelloDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiHelloDsServiceRole44626254","Arn"]},"type":"AWS_LAMBDA"}}}}},"Hello":{"id":"Hello","path":"ApiStack/StylingApi/Hello","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/Hello/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"HelloDs","fieldName":"hello","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"NoneDs":{"id":"NoneDs","path":"ApiStack/StylingApi/NoneDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.NoneDataSource","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/NoneDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"name":"NoneDs","type":"NONE"}}}}},"QueryMeResolver":{"id":"QueryMeResolver","path":"ApiStack/StylingApi/QueryMeResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/QueryMeResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"NoneDs","fieldName":"me","kind":"UNIT","requestMappingTemplate":"\n{\n  \"version\": \"2017-02-28\",\n  \"payload\": {}\n}\n","responseMappingTemplate":"\n#set($sub = \"anonymous\")\n#set($email = \"\")\n\n#if($ctx.identity && $ctx.identity.sub)\n  #set($sub = $ctx.identity.sub)\n#end\n\n#if($ctx.identity && $ctx.identity.claims && $ctx.identity.claims.get(\"email\"))\n  #set($email = $ctx.identity.claims.get(\"email\"))\n#end\n\n$util.toJson({\n  \"id\": $sub,\n  \"email\": $email,\n  \"role\": \"FAN\",\n  \"tier\": \"FREE\"\n})\n","typeName":"Query"}}}}},"ClosetDs":{"id":"ClosetDs","path":"ApiStack/StylingApi/ClosetDs","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/ClosetDs/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/ClosetDs/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetDs/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/ClosetDs/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetDs/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":{"Ref":"ClosetResolverFnLive326F31AD"}}],"Version":"2012-10-17"},"policyName":"StylingApiClosetDsServiceRoleDefaultPolicyE595E568","roles":[{"Ref":"StylingApiClosetDsServiceRole61F98ADC"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetDs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Ref":"ClosetResolverFnLive326F31AD"}},"name":"ClosetDs","serviceRoleArn":{"Fn::GetAtt":["StylingApiClosetDsServiceRole61F98ADC","Arn"]},"type":"AWS_LAMBDA"}}}}},"MyCloset":{"id":"MyCloset","path":"ApiStack/StylingApi/MyCloset","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/MyCloset/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"myCloset","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"MyWishlistResolver":{"id":"MyWishlistResolver","path":"ApiStack/StylingApi/MyWishlistResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/MyWishlistResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"myWishlist","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"QueryBestieClosetItemsResolver":{"id":"QueryBestieClosetItemsResolver","path":"ApiStack/StylingApi/QueryBestieClosetItemsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/QueryBestieClosetItemsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"bestieClosetItems","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"ClosetFeedResolver":{"id":"ClosetFeedResolver","path":"ApiStack/StylingApi/ClosetFeedResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetFeedResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"closetFeed","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"StoriesResolver":{"id":"StoriesResolver","path":"ApiStack/StylingApi/StoriesResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/StoriesResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"stories","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"MyStoriesResolver":{"id":"MyStoriesResolver","path":"ApiStack/StylingApi/MyStoriesResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/MyStoriesResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"myStories","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"CreateClosetItem":{"id":"CreateClosetItem","path":"ApiStack/StylingApi/CreateClosetItem","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreateClosetItem/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"createClosetItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"RequestClosetApproval":{"id":"RequestClosetApproval","path":"ApiStack/StylingApi/RequestClosetApproval","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/RequestClosetApproval/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"requestClosetApproval","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"UpdateClosetMediaKey":{"id":"UpdateClosetMediaKey","path":"ApiStack/StylingApi/UpdateClosetMediaKey","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/UpdateClosetMediaKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"updateClosetMediaKey","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"UpdateClosetItemStory":{"id":"UpdateClosetItemStory","path":"ApiStack/StylingApi/UpdateClosetItemStory","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/UpdateClosetItemStory/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"updateClosetItemStory","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"LikeClosetItemResolver":{"id":"LikeClosetItemResolver","path":"ApiStack/StylingApi/LikeClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/LikeClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"likeClosetItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"ToggleFavoriteClosetItemResolver":{"id":"ToggleFavoriteClosetItemResolver","path":"ApiStack/StylingApi/ToggleFavoriteClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ToggleFavoriteClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"toggleFavoriteClosetItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"CommentOnClosetItemResolver":{"id":"CommentOnClosetItemResolver","path":"ApiStack/StylingApi/CommentOnClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CommentOnClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"commentOnClosetItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"PinHighlightResolver":{"id":"PinHighlightResolver","path":"ApiStack/StylingApi/PinHighlightResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/PinHighlightResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"pinHighlight","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"ToggleWishlistItemResolver":{"id":"ToggleWishlistItemResolver","path":"ApiStack/StylingApi/ToggleWishlistItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ToggleWishlistItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"toggleWishlistItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"ClosetItemCommentsResolver":{"id":"ClosetItemCommentsResolver","path":"ApiStack/StylingApi/ClosetItemCommentsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetItemCommentsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"closetItemComments","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"AdminClosetItemLikesResolver":{"id":"AdminClosetItemLikesResolver","path":"ApiStack/StylingApi/AdminClosetItemLikesResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminClosetItemLikesResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"adminClosetItemLikes","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"AdminClosetItemCommentsResolver":{"id":"AdminClosetItemCommentsResolver","path":"ApiStack/StylingApi/AdminClosetItemCommentsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminClosetItemCommentsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"adminClosetItemComments","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"PinnedClosetItemsResolver":{"id":"PinnedClosetItemsResolver","path":"ApiStack/StylingApi/PinnedClosetItemsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/PinnedClosetItemsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"pinnedClosetItems","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"RequestBgChangeResolver":{"id":"RequestBgChangeResolver","path":"ApiStack/StylingApi/RequestBgChangeResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/RequestBgChangeResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"requestClosetBackgroundChange","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"CreateStoryResolver":{"id":"CreateStoryResolver","path":"ApiStack/StylingApi/CreateStoryResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/CreateStoryResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"createStory","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"PublishStoryResolver":{"id":"PublishStoryResolver","path":"ApiStack/StylingApi/PublishStoryResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/PublishStoryResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"publishStory","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"AddClosetItemToFeedResolver":{"id":"AddClosetItemToFeedResolver","path":"ApiStack/StylingApi/AddClosetItemToFeedResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AddClosetItemToFeedResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"addClosetItemToCommunityFeed","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"RemoveClosetItemFromFeedResolver":{"id":"RemoveClosetItemFromFeedResolver","path":"ApiStack/StylingApi/RemoveClosetItemFromFeedResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/RemoveClosetItemFromFeedResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"removeClosetItemFromCommunityFeed","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"ShareClosetItemToPinterestResolver":{"id":"ShareClosetItemToPinterestResolver","path":"ApiStack/StylingApi/ShareClosetItemToPinterestResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ShareClosetItemToPinterestResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"shareClosetItemToPinterest","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"BestieCreateClosetItemResolver":{"id":"BestieCreateClosetItemResolver","path":"ApiStack/StylingApi/BestieCreateClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/BestieCreateClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"bestieCreateClosetItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"BestieUpdateClosetItemResolver":{"id":"BestieUpdateClosetItemResolver","path":"ApiStack/StylingApi/BestieUpdateClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/BestieUpdateClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"bestieUpdateClosetItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"BestieDeleteClosetItemResolver":{"id":"BestieDeleteClosetItemResolver","path":"ApiStack/StylingApi/BestieDeleteClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/BestieDeleteClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetDs","fieldName":"bestieDeleteClosetItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"ClosetAdminSource":{"id":"ClosetAdminSource","path":"ApiStack/StylingApi/ClosetAdminSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.223.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/StylingApi/ClosetAdminSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/StylingApi/ClosetAdminSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetAdminSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/StylingApi/ClosetAdminSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetAdminSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":{"Ref":"ClosetAdminFnLive19204595"}}],"Version":"2012-10-17"},"policyName":"StylingApiClosetAdminSourceServiceRoleDefaultPolicyDFCEEFAE","roles":[{"Ref":"StylingApiClosetAdminSourceServiceRole9EF81003"}]}}}}}}},"Resource":{"id":"Resource","path":"ApiStack/StylingApi/ClosetAdminSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Ref":"ClosetAdminFnLive19204595"}},"name":"ClosetAdminSource","serviceRoleArn":{"Fn::GetAtt":["StylingApiClosetAdminSourceServiceRole9EF81003","Arn"]},"type":"AWS_LAMBDA"}}}}},"AdminListPendingResolver":{"id":"AdminListPendingResolver","path":"ApiStack/StylingApi/AdminListPendingResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminListPendingResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminListPending","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"AdminListClosetItemsResolver":{"id":"AdminListClosetItemsResolver","path":"ApiStack/StylingApi/AdminListClosetItemsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminListClosetItemsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminListClosetItems","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"AdminListBestieClosetItemsResolver":{"id":"AdminListBestieClosetItemsResolver","path":"ApiStack/StylingApi/AdminListBestieClosetItemsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminListBestieClosetItemsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminListBestieClosetItems","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"AdminCreateClosetItemResolver":{"id":"AdminCreateClosetItemResolver","path":"ApiStack/StylingApi/AdminCreateClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminCreateClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminCreateClosetItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"AdminApproveItem":{"id":"AdminApproveItem","path":"ApiStack/StylingApi/AdminApproveItem","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminApproveItem/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminApproveItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"AdminRejectItem":{"id":"AdminRejectItem","path":"ApiStack/StylingApi/AdminRejectItem","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminRejectItem/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminRejectItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"AdminSetClosetAudience":{"id":"AdminSetClosetAudience","path":"ApiStack/StylingApi/AdminSetClosetAudience","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminSetClosetAudience/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminSetClosetAudience","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"AdminUpdateClosetItemResolver":{"id":"AdminUpdateClosetItemResolver","path":"ApiStack/StylingApi/AdminUpdateClosetItemResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminUpdateClosetItemResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminUpdateClosetItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"AdminPublishClosetItem":{"id":"AdminPublishClosetItem","path":"ApiStack/StylingApi/AdminPublishClosetItem","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"ApiStack/StylingApi/AdminPublishClosetItem/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"dataSourceName":"ClosetAdminSource","fieldName":"adminPublishClosetItem","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}}}},"AppSyncSchemaReadyFn":{"id":"AppSyncSchemaReadyFn","path":"ApiStack/AppSyncSchemaReadyFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/AppSyncSchemaReadyFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/AppSyncSchemaReadyFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/AppSyncSchemaReadyFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/AppSyncSchemaReadyFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/AppSyncSchemaReadyFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["appsync:GetSchemaCreationStatus","appsync:GetIntrospectionSchema"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"AppSyncSchemaReadyFnServiceRoleDefaultPolicyE0925986","roles":[{"Ref":"AppSyncSchemaReadyFnServiceRole62E33748"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/AppSyncSchemaReadyFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/AppSyncSchemaReadyFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/AppSyncSchemaReadyFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/AppSyncSchemaReadyFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"6260b18a055aa80908b088dfe9dce3cbf4e74f11dcf065e6d2eff36a5b600d34.zip"},"environment":{"variables":{"APPSYNC_API_ID":{"Fn::GetAtt":["StylingApiC401F041","ApiId"]},"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","memorySize":256,"role":{"Fn::GetAtt":["AppSyncSchemaReadyFnServiceRole62E33748","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":600}}}}},"SchemaReadyProvider":{"id":"SchemaReadyProvider","path":"ApiStack/SchemaReadyProvider","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.Provider","version":"2.223.0"},"children":{"framework-onEvent":{"id":"framework-onEvent","path":"ApiStack/SchemaReadyProvider/framework-onEvent","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/SchemaReadyProvider/framework-onEvent/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/SchemaReadyProvider/framework-onEvent/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/SchemaReadyProvider/framework-onEvent/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/SchemaReadyProvider/framework-onEvent/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/SchemaReadyProvider/framework-onEvent/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["AppSyncSchemaReadyFnD1C75E51","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AppSyncSchemaReadyFnD1C75E51","Arn"]},":*"]]}]},{"Action":"lambda:GetFunction","Effect":"Allow","Resource":{"Fn::GetAtt":["AppSyncSchemaReadyFnD1C75E51","Arn"]}}],"Version":"2012-10-17"},"policyName":"SchemaReadyProviderframeworkonEventServiceRoleDefaultPolicyE2DDA385","roles":[{"Ref":"SchemaReadyProviderframeworkonEventServiceRole8F2E62B3"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/SchemaReadyProvider/framework-onEvent/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/SchemaReadyProvider/framework-onEvent/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/SchemaReadyProvider/framework-onEvent/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/SchemaReadyProvider/framework-onEvent/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"bdc104ed9cab1b5b6421713c8155f0b753380595356f710400609664d3635eca.zip"},"description":"AWS CDK resource provider framework - onEvent (ApiStack/SchemaReadyProvider)","environment":{"variables":{"USER_ON_EVENT_FUNCTION_ARN":{"Fn::GetAtt":["AppSyncSchemaReadyFnD1C75E51","Arn"]}}},"handler":"framework.onEvent","loggingConfig":{"logFormat":"JSON","applicationLogLevel":"FATAL"},"role":{"Fn::GetAtt":["SchemaReadyProviderframeworkonEventServiceRole8F2E62B3","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":900}}}}}}},"SchemaReady":{"id":"SchemaReady","path":"ApiStack/SchemaReady","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"ApiStack/SchemaReady/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"CreatorMediaBucket":{"id":"CreatorMediaBucket","path":"ApiStack/CreatorMediaBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/CreatorMediaBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"corsConfiguration":{"corsRules":[{"maxAge":3600,"allowedHeaders":["*"],"allowedMethods":["PUT","GET"],"allowedOrigins":["http://localhost:5173"],"exposedHeaders":["ETag"]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"HelloFn":{"id":"HelloFn","path":"ApiStack/HelloFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/HelloFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/HelloFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/HelloFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Code":{"id":"Code","path":"ApiStack/HelloFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/HelloFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/HelloFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/HelloFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"dba505f53767a9e6657cdeba0a1fe85822984a28978face5a785b36aa3fb4af7.zip"},"environment":{"variables":{"NODE_OPTIONS":"--enable-source-maps"}},"handler":"index.handler","role":{"Fn::GetAtt":["HelloFnServiceRoleDA97FE56","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ClosetResolverFn":{"id":"ClosetResolverFn","path":"ApiStack/ClosetResolverFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/ClosetResolverFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/ClosetResolverFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/ClosetResolverFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513"}},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefBestieClosetUploadAutoPublishSMD39D3713F9680EDA"}},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefBackgroundChangeApprovalSMA6DF140DCA66162D"}},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"BestiesStoriesStack:ExportsOutputRefStoryPublishSMAF8A41480C93DC91"}},{"Action":"events:PutEvents","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ClosetResolverFnServiceRoleDefaultPolicy2117A20A","roles":[{"Ref":"ClosetResolverFnServiceRole21435BA2"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/ClosetResolverFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/ClosetResolverFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/ClosetResolverFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"f637f88a5166c43b4ef4e7a155840a51323b0f4ae52e67828a3f8f91fa4ff79b.zip"},"environment":{"variables":{"ADMIN_GROUP_NAME":"ADMIN","APPROVAL_SM_ARN":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513"},"BESTIE_AUTOPUBLISH_SM_ARN":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefBestieClosetUploadAutoPublishSMD39D3713F9680EDA"},"BG_CHANGE_SM_ARN":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefBackgroundChangeApprovalSMA6DF140DCA66162D"},"CREATOR_GROUP_NAME":"CREATOR","FAN_APPROVAL_SM_ARN":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513"},"NODE_OPTIONS":"--enable-source-maps","PK_NAME":"pk","PUBLIC_UPLOADS_CDN":"","SK_NAME":"sk","STATUS_GSI":"gsi1","STORY_PUBLISH_SM_ARN":{"Fn::ImportValue":"BestiesStoriesStack:ExportsOutputRefStoryPublishSMAF8A41480C93DC91"},"TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"}}},"handler":"index.handler","role":{"Fn::GetAtt":["ClosetResolverFnServiceRole21435BA2","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"CurrentVersion":{"id":"CurrentVersion","path":"ApiStack/ClosetResolverFn/CurrentVersion","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Version","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFn/CurrentVersion/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnVersion","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Version","aws:cdk:cloudformation:props":{"functionName":{"Ref":"ClosetResolverFnDB09D91C"}}}}}}}},"ClosetResolverFnLive":{"id":"ClosetResolverFnLive","path":"ApiStack/ClosetResolverFnLive","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Alias","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFnLive/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnAlias","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Alias","aws:cdk:cloudformation:props":{"functionName":{"Ref":"ClosetResolverFnDB09D91C"},"functionVersion":{"Fn::GetAtt":["ClosetResolverFnCurrentVersion71AF2A5Ed2865cecae5c37ab5ff06ab6d7239043","Version"]},"name":"live"}}},"ScalingRole":{"id":"ScalingRole","path":"ApiStack/ClosetResolverFnLive/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"ClosetResolverFnAliasErrorsAlarm":{"id":"ClosetResolverFnAliasErrorsAlarm","path":"ApiStack/ClosetResolverFnAliasErrorsAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFnAliasErrorsAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"ClosetResolverFnDB09D91C"}},{"name":"Resource","value":{"Fn::Join":["",[{"Ref":"ClosetResolverFnDB09D91C"},":live"]]}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":60,"statistic":"Sum","threshold":1}}}}},"ClosetResolverFnDeploymentGroup":{"id":"ClosetResolverFnDeploymentGroup","path":"ApiStack/ClosetResolverFnDeploymentGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_codedeploy.LambdaDeploymentGroup","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/ClosetResolverFnDeploymentGroup/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/ClosetResolverFnDeploymentGroup/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFnDeploymentGroup/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codedeploy.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSCodeDeployRoleForLambdaLimited"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Application":{"id":"Application","path":"ApiStack/ClosetResolverFnDeploymentGroup/Application","constructInfo":{"fqn":"aws-cdk-lib.aws_codedeploy.LambdaApplication","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFnDeploymentGroup/Application/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codedeploy.CfnApplication","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeDeploy::Application","aws:cdk:cloudformation:props":{"computePlatform":"Lambda","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Resource":{"id":"Resource","path":"ApiStack/ClosetResolverFnDeploymentGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codedeploy.CfnDeploymentGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeDeploy::DeploymentGroup","aws:cdk:cloudformation:props":{"alarmConfiguration":{"alarms":[{"name":{"Ref":"ClosetResolverFnAliasErrorsAlarmFFD2E07A"}}],"enabled":true},"applicationName":{"Ref":"ClosetResolverFnDeploymentGroupApplication6B92EE45"},"autoRollbackConfiguration":{"enabled":true,"events":["DEPLOYMENT_FAILURE","DEPLOYMENT_STOP_ON_REQUEST","DEPLOYMENT_STOP_ON_ALARM"]},"deploymentConfigName":"CodeDeployDefault.LambdaCanary10Percent5Minutes","deploymentStyle":{"deploymentType":"BLUE_GREEN","deploymentOption":"WITH_TRAFFIC_CONTROL"},"serviceRoleArn":{"Fn::GetAtt":["ClosetResolverFnDeploymentGroupServiceRole3D5952DE","Arn"]},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"ClosetAdminFn":{"id":"ClosetAdminFn","path":"ApiStack/ClosetAdminFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/ClosetAdminFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/ClosetAdminFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/ClosetAdminFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513"}},{"Action":["dynamodb:Query","dynamodb:Scan","dynamodb:GetItem","dynamodb:UpdateItem","dynamodb:PutItem","dynamodb:DeleteItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},{"Fn::Join":["",[{"Fn::ImportValue":"DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3"},"/index/*"]]}]},{"Action":["states:SendTaskSuccess","states:SendTaskFailure"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ClosetAdminFnServiceRoleDefaultPolicy08DF50EF","roles":[{"Ref":"ClosetAdminFnServiceRole87F02459"}]}}}}}}},"Code":{"id":"Code","path":"ApiStack/ClosetAdminFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"ApiStack/ClosetAdminFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/ClosetAdminFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-637423256673-us-east-1","s3Key":"4c8661a90fa63e1ceb9ed190df6417024837d3f5e72d5ee907920de30b70fcab.zip"},"environment":{"variables":{"ADMIN_GROUP_NAME":"ADMIN","APPROVAL_SM_ARN":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513"},"FAN_APPROVAL_SM_ARN":{"Fn::ImportValue":"BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513"},"NODE_OPTIONS":"--enable-source-maps","PK_NAME":"pk","PUBLIC_UPLOADS_CDN":"","SK_NAME":"sk","STATUS_GSI":"gsi1","TABLE_NAME":{"Fn::ImportValue":"DataStack:ExportsOutputRefAppTable815C50BC1988FCFB"}}},"handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ClosetAdminFnServiceRole87F02459","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"timeout":10}}},"CurrentVersion":{"id":"CurrentVersion","path":"ApiStack/ClosetAdminFn/CurrentVersion","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Version","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFn/CurrentVersion/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnVersion","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Version","aws:cdk:cloudformation:props":{"functionName":{"Ref":"ClosetAdminFnB4D542CC"}}}}}}}},"ClosetAdminFnLive":{"id":"ClosetAdminFnLive","path":"ApiStack/ClosetAdminFnLive","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Alias","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFnLive/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnAlias","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Alias","aws:cdk:cloudformation:props":{"functionName":{"Ref":"ClosetAdminFnB4D542CC"},"functionVersion":{"Fn::GetAtt":["ClosetAdminFnCurrentVersionFAF5CD3De34e45939ddd1a8606ea184e439ea0f6","Version"]},"name":"live"}}},"ScalingRole":{"id":"ScalingRole","path":"ApiStack/ClosetAdminFnLive/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"ClosetAdminFnAliasErrorsAlarm":{"id":"ClosetAdminFnAliasErrorsAlarm","path":"ApiStack/ClosetAdminFnAliasErrorsAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFnAliasErrorsAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"ClosetAdminFnB4D542CC"}},{"name":"Resource","value":{"Fn::Join":["",[{"Ref":"ClosetAdminFnB4D542CC"},":live"]]}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":60,"statistic":"Sum","threshold":1}}}}},"ClosetAdminFnDeploymentGroup":{"id":"ClosetAdminFnDeploymentGroup","path":"ApiStack/ClosetAdminFnDeploymentGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_codedeploy.LambdaDeploymentGroup","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/ClosetAdminFnDeploymentGroup/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/ClosetAdminFnDeploymentGroup/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFnDeploymentGroup/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codedeploy.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSCodeDeployRoleForLambdaLimited"]]}],"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Application":{"id":"Application","path":"ApiStack/ClosetAdminFnDeploymentGroup/Application","constructInfo":{"fqn":"aws-cdk-lib.aws_codedeploy.LambdaApplication","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFnDeploymentGroup/Application/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codedeploy.CfnApplication","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeDeploy::Application","aws:cdk:cloudformation:props":{"computePlatform":"Lambda","tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"Resource":{"id":"Resource","path":"ApiStack/ClosetAdminFnDeploymentGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codedeploy.CfnDeploymentGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeDeploy::DeploymentGroup","aws:cdk:cloudformation:props":{"alarmConfiguration":{"alarms":[{"name":{"Ref":"ClosetAdminFnAliasErrorsAlarm510C0B72"}}],"enabled":true},"applicationName":{"Ref":"ClosetAdminFnDeploymentGroupApplication6B0E5F1B"},"autoRollbackConfiguration":{"enabled":true,"events":["DEPLOYMENT_FAILURE","DEPLOYMENT_STOP_ON_REQUEST","DEPLOYMENT_STOP_ON_ALARM"]},"deploymentConfigName":"CodeDeployDefault.LambdaCanary10Percent5Minutes","deploymentStyle":{"deploymentType":"BLUE_GREEN","deploymentOption":"WITH_TRAFFIC_CONTROL"},"serviceRoleArn":{"Fn::GetAtt":["ClosetAdminFnDeploymentGroupServiceRole7FC4FFFE","Arn"]},"tags":[{"key":"App","value":"stylingadventures"},{"key":"Env","value":"dev"}]}}}}},"GraphQlApiUrl":{"id":"GraphQlApiUrl","path":"ApiStack/GraphQlApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"GraphQlApiId":{"id":"GraphQlApiId","path":"ApiStack/GraphQlApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CreatorMediaBucketName":{"id":"CreatorMediaBucketName","path":"ApiStack/CreatorMediaBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ApiStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"ApiStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}