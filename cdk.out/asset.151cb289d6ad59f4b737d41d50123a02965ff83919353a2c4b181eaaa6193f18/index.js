"use strict";var t=Object.defineProperty;var a=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var c=Object.prototype.hasOwnProperty;var g=(e,n)=>{for(var r in n)t(e,r,{get:n[r],enumerable:!0})},l=(e,n,r,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of u(n))!c.call(e,o)&&o!==r&&t(e,o,{get:()=>n[o],enumerable:!(s=a(n,o))||s.enumerable});return e};var m=e=>l(t({},"__esModule",{value:!0}),e);var E={};g(E,{handler:()=>p});module.exports=m(E);function d(e,n){let r=typeof e=="number"?e:Number(e);return Number.isFinite(r)?r:n}var p=async e=>{if(console.log("CoinsLedger incoming event:",JSON.stringify(e,null,2)),!e||!e.userId)throw new Error("Missing required field: userId");if(!e.source)throw new Error("Missing required field: source");let n=new Date().toISOString(),r=`ledger-${Math.random().toString(36).slice(2,10)}`,s=d(e.coinsDelta??0,0),o=d(e.xpDelta??0,0),i={entryId:r,userId:e.userId,episodeId:e.episodeId,source:e.source,coinsDelta:s,xpDelta:o,reason:e.reason,metadata:e.metadata,createdAt:n,newCoinsBalance:s,newXpTotal:o};return console.log("CoinsLedger normalized entry:",JSON.stringify(i,null,2)),i};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
