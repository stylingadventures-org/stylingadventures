"use strict";var u=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var U=Object.prototype.hasOwnProperty;var h=(r,t)=>{for(var o in t)u(r,o,{get:t[o],enumerable:!0})},I=(r,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of S(t))!U.call(r,i)&&i!==o&&u(r,i,{get:()=>t[i],enumerable:!(n=A(t,i))||n.enumerable});return r};var D=r=>I(u({},"__esModule",{value:!0}),r);var M={};h(M,{handler:()=>$});module.exports=D(M);var y=require("@aws-sdk/client-dynamodb"),l=require("@aws-sdk/lib-dynamodb");var e=[];for(let r=0;r<256;++r)e.push((r+256).toString(16).slice(1));function g(r,t=0){return(e[r[t+0]]+e[r[t+1]]+e[r[t+2]]+e[r[t+3]]+"-"+e[r[t+4]]+e[r[t+5]]+"-"+e[r[t+6]]+e[r[t+7]]+"-"+e[r[t+8]]+e[r[t+9]]+"-"+e[r[t+10]]+e[r[t+11]]+e[r[t+12]]+e[r[t+13]]+e[r[t+14]]+e[r[t+15]]).toLowerCase()}var v=require("crypto"),d=new Uint8Array(256),m=d.length;function p(){return m>d.length-16&&((0,v.randomFillSync)(d),m=0),d.slice(m,m+=16)}var E=require("crypto"),c={randomUUID:E.randomUUID};function T(r,t,o){if(c.randomUUID&&!t&&!r)return c.randomUUID();r=r||{};let n=r.random??r.rng?.()??p();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(o=o||0,o<0||o+16>t.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[o+i]=n[i];return t}return g(n)}var x=T;var P=l.DynamoDBDocumentClient.from(new y.DynamoDBClient({})),C=process.env.TABLE_NAME,L=process.env.PK_NAME??"pk",R=process.env.SK_NAME??"sk",$=async r=>{let{creatorId:t,niche:o,platforms:n,trendBriefs:i,contentIdeas:f}=r;if(!t)throw new Error("Missing creatorId in Social Pulse persist");let a=x(),s=new Date().toISOString(),w={[L]:`CREATOR#${t}`,[R]:`PULSE#${a}`,type:"CREATOR_SOCIAL_PULSE",id:a,creatorId:t,niche:o,platforms:n,trendBriefs:i,contentIdeas:f,createdAt:s,gsi1pk:`CREATOR#${t}`,gsi1sk:`PULSE#${s}#${a}`};return await P.send(new l.PutCommand({TableName:C,Item:w})),{id:a,creatorId:t,niche:o,platforms:n,trendBriefs:i,contentIdeas:f,createdAt:s}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
