"use strict";var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var A=(o,t)=>{for(var n in t)c(o,n,{get:t[n],enumerable:!0})},u=(o,t,n,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of d(t))!l.call(o,s)&&s!==n&&c(o,s,{get:()=>t[s],enumerable:!(e=p(t,s))||e.enumerable});return o};var E=o=>u(c({},"__esModule",{value:!0}),o);var I={};A(I,{handler:()=>O});module.exports=E(I);var m=require("@aws-sdk/client-dynamodb"),i=require("@aws-sdk/lib-dynamodb");function a(o,t){let n=o?.claims??{},e=n["cognito:groups"]||n["cognito:groups:custom"]||[],s=Array.isArray(e)?e:`${e}`.split(",");if(!s.some(r=>t.includes(r.trim()))){let r="Forbidden: internal studio/admin access only";throw console.warn(r,{groups:s}),new Error(r)}}var y=new m.DynamoDBClient({}),g=i.DynamoDBDocumentClient.from(y),N=process.env.TABLE_NAME,_=process.env.ADMIN_GROUP_NAME??"admin",D=process.env.CREATOR_GROUP_NAME??"creator",O=async o=>{let t=o.identity??o.requestContext?.identity;a(t,[_,D]);let n=o.episodeId??`ep_${Date.now()}`,e=`EPISODE#${n}`,s="COMPONENTS#v1";return await g.send(new i.PutCommand({TableName:N,Item:{pk:e,sk:s,type:"episode-components",episodeId:n,components:{invite:{},envelope:{},closet:{},outfit:{},dialogue:[],sideQuests:[],coins:{},locations:[],photoshoots:[]},createdAt:new Date().toISOString()}})),{episodeId:n,pk:e,sk:s}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
