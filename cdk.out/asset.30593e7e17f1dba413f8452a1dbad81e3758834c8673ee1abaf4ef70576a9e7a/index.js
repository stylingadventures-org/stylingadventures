"use strict";var a=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var S=(e,t)=>{for(var o in t)a(e,o,{get:t[o],enumerable:!0})},m=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of g(t))!h.call(e,s)&&s!==o&&a(e,s,{get:()=>t[s],enumerable:!(r=I(t,s))||r.enumerable});return e};var P=e=>m(a({},"__esModule",{value:!0}),e);var _={};S(_,{handler:()=>M});module.exports=P(_);function f(){return new Date().toISOString()}function E(e){return`${e}-${Math.random().toString(36).slice(2,10)}`}function k(e){let t=["instagram_reel","youtube_short","tiktok"];return t[e%t.length]}function T(e){let t=1e3+e*137;return{views:t,likes:Math.floor(t*.18),comments:Math.floor(t*.03)}}function c(e,t){let o=k(e),r=E("post"),s=f(),i=T(e+1),d=t.episodeId?`EP ${t.episodeId}`:"Prime Studios",l=t.characterId?`with ${t.characterId}`:"with the Besties",p=`${d}: Scene ${e+1}`,u=`POV: You just unlocked a new outfit ${l} \u2728`,n=e%3===0?"WATCH_EPISODE":e%3===1?"SHOP_OUTFIT":"JOIN_POLL";return{postId:r,platform:o,shareUrl:`https://prime.stylingadventures.local/${o}/${r}`,thumbnailUrl:`https://prime.stylingadventures.local/thumbs/${r}.jpg`,episodeId:t.episodeId,storyId:t.storyId,characterId:t.characterId,title:p,caption:u,durationSeconds:12+e%8,views:i.views,likes:i.likes,comments:i.comments,createdAt:s,cta:{label:n==="WATCH_EPISODE"?"Watch episode":n==="SHOP_OUTFIT"?"Shop the look":"Vote in poll",type:n,targetId:n==="WATCH_EPISODE"?t.episodeId:n==="SHOP_OUTFIT"?"outfit-placeholder":"poll-placeholder"}}}async function y(e){let t=e.count&&e.count>0?e.count:6,o=[];for(let r=0;r<t;r++)o.push(c(r,{episodeId:e.episodeId,storyId:e.storyId,characterId:e.characterId}));return console.log("MockSocialFeed GENERATE_FEED:",JSON.stringify({input:e,postsCount:o.length},null,2)),{kind:"feed",posts:o}}async function F(e){if(!e.postId)throw new Error("MockSocialFeed GET_POST: missing postId");let t=Math.abs(O(e.postId))%10,o=c(t,{episodeId:void 0,storyId:void 0,characterId:void 0});return o.postId=e.postId,o.shareUrl=`https://prime.stylingadventures.local/reels/${e.postId}`,o.thumbnailUrl=`https://prime.stylingadventures.local/thumbs/${e.postId}.jpg`,console.log("MockSocialFeed GET_POST:",JSON.stringify({input:e,post:o},null,2)),{kind:"post",post:o}}function O(e){let t=0;for(let o of e)t=t*31+o.charCodeAt(0)|0;return t>>>0}var M=async e=>{if(console.log("MockSocialFeed incoming event:",JSON.stringify(e,null,2)),!e||!e.action)throw new Error("MockSocialFeed: missing action");switch(e.action){case"GENERATE_FEED":if(!e.generateFeed)throw new Error("MockSocialFeed GENERATE_FEED: missing 'generateFeed' payload");return y(e.generateFeed);case"GET_POST":if(!e.getPost)throw new Error("MockSocialFeed GET_POST: missing 'getPost' payload");return F(e.getPost);default:throw new Error(`MockSocialFeed: unsupported action ${e.action}`)}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
