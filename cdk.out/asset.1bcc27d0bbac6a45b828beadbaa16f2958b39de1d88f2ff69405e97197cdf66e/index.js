"use strict";var s=Object.defineProperty;var i=Object.getOwnPropertyDescriptor;var a=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var c=(n,e)=>{for(var r in e)s(n,r,{get:e[r],enumerable:!0})},d=(n,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of a(e))!u.call(n,t)&&t!==r&&s(n,t,{get:()=>e[t],enumerable:!(o=i(e,t))||o.enumerable});return n};var l=n=>d(s({},"__esModule",{value:!0}),n);var g={};c(g,{handler:()=>m});module.exports=l(g);var{TABLE_NAME:f=""}=process.env;function p(n){var o,t;if(!n)return!1;let e=((o=n.claims)==null?void 0:o["cognito:groups"])??((t=n.claims)==null?void 0:t["custom:groups"])??n.groups,r=Array.isArray(e)?e:typeof e=="string"?e.split(","):[];return r.includes("admin")||r.includes("ADMIN")}var m=async n=>{let e=n.info.fieldName,r=n.identity;if(!(r!=null&&r.sub))throw new Error("Unauthorized");if(!p(r))throw new Error("Forbidden");switch(e){case"adminModerationPing":return{ok:!0,at:new Date().toISOString()};case"adminListModerationQueue":return{items:[],nextToken:null};case"adminUpdateModerationStatus":return{ok:!0,updatedAt:new Date().toISOString()};case"adminLaunchChallenge":return{ok:!0,challengeId:"placeholder"};case"adminSendShoutout":return{ok:!0};default:throw new Error(`No resolver implemented for field ${e}`)}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
