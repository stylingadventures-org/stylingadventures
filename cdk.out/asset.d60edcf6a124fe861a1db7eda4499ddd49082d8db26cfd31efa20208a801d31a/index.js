"use strict";var r=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var f=(e,n)=>{for(var o in n)r(e,o,{get:n[o],enumerable:!0})},x=(e,n,o,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of c(n))!u.call(e,s)&&s!==o&&r(e,s,{get:()=>n[s],enumerable:!(t=d(n,s))||t.enumerable});return e};var E=e=>x(r({},"__esModule",{value:!0}),e);var D={};f(D,{handler:()=>A});module.exports=E(D);var p=require("@aws-sdk/client-dynamodb"),i=require("@aws-sdk/lib-dynamodb"),w=i.DynamoDBDocumentClient.from(new p.DynamoDBClient({})),y=process.env.TABLE_NAME,A=async e=>{let{fieldName:n}=e.info,{limit:o=10,season:t="GLOBAL"}=e.arguments||{};if(n==="topXP"||n==="topCoins"){let s=`LEADERBOARD#${t}`,m=await w.send(new i.QueryCommand({TableName:y,IndexName:"gsi1",KeyConditionExpression:"gsi1pk = :p AND begins_with(gsi1sk, :xp)",ExpressionAttributeValues:{":p":s,":xp":"XP#"},ScanIndexForward:!1,Limit:Math.min(100,o)})),l=1;return(m.Items??[]).map(a=>({userId:a.pk.replace("USER#",""),displayName:a.displayName??void 0,xp:a.xp??null,coins:a.coins??null,rank:l++}))}throw new Error(`Unknown field ${n}`)};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
