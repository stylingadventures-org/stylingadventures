{
  "version": 3,
  "sources": ["../../lambda/creator-tools/index.ts"],
  "sourcesContent": ["import { DynamoDBClient } from \"@aws-sdk/client-dynamodb\";\r\nimport {\r\n  DynamoDBDocumentClient,\r\n  QueryCommand,\r\n  PutCommand,\r\n  UpdateCommand,\r\n  DeleteCommand,\r\n  GetCommand,\r\n} from \"@aws-sdk/lib-dynamodb\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { S3Client, PutObjectCommand } from \"@aws-sdk/client-s3\";\r\nimport { getSignedUrl } from \"@aws-sdk/s3-request-presigner\";\r\n\r\nconst ddb = DynamoDBDocumentClient.from(new DynamoDBClient({}));\r\nconst s3 = new S3Client({});\r\n\r\nconst TABLE_NAME = process.env.TABLE_NAME!;\r\nconst CREATOR_MEDIA_BUCKET = process.env.CREATOR_MEDIA_BUCKET!;\r\nconst PK = process.env.PK_NAME || \"pk\";\r\nconst SK = process.env.SK_NAME || \"sk\";\r\nconst STATUS_GSI = process.env.STATUS_GSI || \"gsi1\";\r\n\r\nfunction now() {\r\n  return new Date().toISOString();\r\n}\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// GraphQL handler \u2013 router\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\nexport const handler = async (event: any) => {\r\n  const field = event.info?.fieldName;\r\n  const sub =\r\n    event.identity?.sub ||\r\n    event.identity?.claims?.sub ||\r\n    \"anonymous\";\r\n\r\n  switch (field) {\r\n    // CABINETS\r\n    case \"creatorCabinets\":\r\n      return listCabinets(sub);\r\n    case \"creatorCabinet\":\r\n      return getCabinet(sub, event.arguments?.id);\r\n    case \"createCreatorCabinet\":\r\n      return createCabinet(sub, event.arguments?.input);\r\n    case \"updateCreatorCabinet\":\r\n      return updateCabinet(sub, event.arguments?.id, event.arguments?.input);\r\n    case \"deleteCreatorCabinet\":\r\n      return deleteCabinet(sub, event.arguments?.id);\r\n\r\n    // FOLDERS\r\n    case \"creatorFolders\":\r\n      return listFolders(sub, event.arguments?.cabinetId);\r\n    case \"createCreatorFolder\":\r\n      return createFolder(sub, event.arguments?.input);\r\n    case \"renameCreatorFolder\":\r\n      return renameFolder(sub, event.arguments?.input);\r\n    case \"deleteCreatorFolder\":\r\n      return deleteFolder(sub, event.arguments?.id, event.arguments?.cabinetId);\r\n\r\n    // ASSETS\r\n    case \"creatorCabinetAssets\":\r\n      return listAssets(sub, event.arguments);\r\n    case \"createCreatorAssetUpload\":\r\n      return createAssetUpload(sub, event.arguments?.input);\r\n    case \"updateCreatorAsset\":\r\n      return updateAsset(sub, event.arguments?.input);\r\n    case \"deleteCreatorAsset\":\r\n      return deleteAsset(sub, event.arguments?.id, event.arguments?.cabinetId);\r\n    case \"moveCreatorAsset\":\r\n      return moveAsset(sub, event.arguments?.input);\r\n\r\n    // AI\r\n    case \"creatorAiSuggest\":\r\n      return runCreatorAi(event);\r\n\r\n    default:\r\n      throw new Error(`Unknown field ${field}`);\r\n  }\r\n};\r\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA+B,oCAC/BC,EAOO,iCAEPC,EAA2C,8BAGrCC,EAAM,yBAAuB,KAAK,IAAI,iBAAe,CAAC,CAAC,CAAC,EACxDC,EAAK,IAAI,WAAS,CAAC,CAAC,EAEpBC,EAAa,QAAQ,IAAI,WACzBC,EAAuB,QAAQ,IAAI,qBACnCC,EAAK,QAAQ,IAAI,SAAW,KAC5BC,EAAK,QAAQ,IAAI,SAAW,KAC5BC,EAAa,QAAQ,IAAI,YAAc,OAStC,IAAMC,EAAU,MAAOC,GAAe,CAC3C,IAAMC,EAAQD,EAAM,MAAM,UACpBE,EACJF,EAAM,UAAU,KAChBA,EAAM,UAAU,QAAQ,KACxB,YAEF,OAAQC,EAAO,CAEb,IAAK,kBACH,OAAO,aAAaC,CAAG,EACzB,IAAK,iBACH,OAAO,WAAWA,EAAKF,EAAM,WAAW,EAAE,EAC5C,IAAK,uBACH,OAAO,cAAcE,EAAKF,EAAM,WAAW,KAAK,EAClD,IAAK,uBACH,OAAO,cAAcE,EAAKF,EAAM,WAAW,GAAIA,EAAM,WAAW,KAAK,EACvE,IAAK,uBACH,OAAO,cAAcE,EAAKF,EAAM,WAAW,EAAE,EAG/C,IAAK,iBACH,OAAO,YAAYE,EAAKF,EAAM,WAAW,SAAS,EACpD,IAAK,sBACH,OAAO,aAAaE,EAAKF,EAAM,WAAW,KAAK,EACjD,IAAK,sBACH,OAAO,aAAaE,EAAKF,EAAM,WAAW,KAAK,EACjD,IAAK,sBACH,OAAO,aAAaE,EAAKF,EAAM,WAAW,GAAIA,EAAM,WAAW,SAAS,EAG1E,IAAK,uBACH,OAAO,WAAWE,EAAKF,EAAM,SAAS,EACxC,IAAK,2BACH,OAAO,kBAAkBE,EAAKF,EAAM,WAAW,KAAK,EACtD,IAAK,qBACH,OAAO,YAAYE,EAAKF,EAAM,WAAW,KAAK,EAChD,IAAK,qBACH,OAAO,YAAYE,EAAKF,EAAM,WAAW,GAAIA,EAAM,WAAW,SAAS,EACzE,IAAK,mBACH,OAAO,UAAUE,EAAKF,EAAM,WAAW,KAAK,EAG9C,IAAK,mBACH,OAAO,aAAaA,CAAK,EAE3B,QACE,MAAM,IAAI,MAAM,iBAAiBC,CAAK,EAAE,CAC5C,CACF",
  "names": ["index_exports", "__export", "handler", "__toCommonJS", "import_client_dynamodb", "import_lib_dynamodb", "import_client_s3", "ddb", "s3", "TABLE_NAME", "CREATOR_MEDIA_BUCKET", "PK", "SK", "STATUS_GSI", "handler", "event", "field", "sub"]
}
