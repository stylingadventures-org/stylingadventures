"use strict";var r=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var l=(n,t)=>{for(var o in t)r(n,o,{get:t[o],enumerable:!0})},p=(n,t,o,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of d(t))!A.call(n,e)&&e!==o&&r(n,e,{get:()=>t[e],enumerable:!(c=y(t,e))||c.enumerable});return n};var E=n=>p(r({},"__esModule",{value:!0}),n);var u={};l(u,{handler:()=>g});module.exports=E(u);var s=require("@aws-sdk/client-s3"),T=new s.S3Client({}),a=process.env.ANALYTICS_BUCKET_NAME,C=process.env.TABLE_NAME||"",g=async n=>{console.log("AnalyticsIngestFn event",JSON.stringify(n));let t=Array.isArray(n?.Records)?n.Records:[n],o=new Date,e=`events/date=${o.toISOString().slice(0,10)}/${o.getTime()}.json`,i=JSON.stringify(t,null,2);return await T.send(new s.PutObjectCommand({Bucket:a,Key:e,Body:i,ContentType:"application/json"})),{ok:!0,bucket:a,key:e}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
