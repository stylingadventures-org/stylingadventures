{
  "version": 3,
  "sources": ["../../lambda/social-pulse/loadGoalCompass.ts"],
  "sourcesContent": ["import { DynamoDBClient } from \"@aws-sdk/client-dynamodb\";\r\nimport {\r\n  DynamoDBDocumentClient,\r\n  GetCommand,\r\n} from \"@aws-sdk/lib-dynamodb\";\r\n\r\nconst ddb = DynamoDBDocumentClient.from(new DynamoDBClient({}));\r\nconst TABLE_NAME = process.env.TABLE_NAME!;\r\nconst PK = process.env.PK_NAME ?? \"pk\";\r\nconst SK = process.env.SK_NAME ?? \"sk\";\r\n\r\nexport const handler = async (event: any) => {\r\n  const sub =\r\n    event.identity?.sub ||\r\n    event.identity?.claims?.sub;\r\n\r\n  if (!sub) throw new Error(\"Missing identity.sub\");\r\n\r\n  const res = await ddb.send(\r\n    new GetCommand({\r\n      TableName: TABLE_NAME,\r\n      Key: {\r\n        [PK]: `CREATOR#${sub}`,\r\n        [SK]: \"GOAL_COMPASS\",\r\n      },\r\n    }),\r\n  );\r\n\r\n  const gc = res.Item ?? {};\r\n\r\n  return {\r\n    creatorId: sub,\r\n    goalCompass: {\r\n      primaryGoal: gc.primaryGoal ?? \"GROWTH\",\r\n      timeHorizon: gc.timeHorizon ?? \"90_DAYS\",\r\n      weeklyCapacity:\r\n        typeof gc.weeklyCapacity === \"number\"\r\n          ? gc.weeklyCapacity\r\n          : 5,\r\n      focusAreas: gc.focusAreas ?? [\"PERSONALITY\", \"NURTURE\"],\r\n      riskTolerance: gc.riskTolerance ?? \"MEDIUM\",\r\n      contentMixTarget: gc.contentMixTarget ?? null,\r\n    },\r\n    args: event.arguments ?? {},\r\n  };\r\n};\r\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA+B,oCAC/BC,EAGO,iCAEDC,EAAM,yBAAuB,KAAK,IAAI,iBAAe,CAAC,CAAC,CAAC,EACxDC,EAAa,QAAQ,IAAI,WACzBC,EAAK,QAAQ,IAAI,SAAW,KAC5BC,EAAK,QAAQ,IAAI,SAAW,KAErBP,EAAU,MAAOQ,GAAe,CAC3C,IAAMC,EACJD,EAAM,UAAU,KAChBA,EAAM,UAAU,QAAQ,IAE1B,GAAI,CAACC,EAAK,MAAM,IAAI,MAAM,sBAAsB,EAYhD,IAAMC,GAVM,MAAMN,EAAI,KACpB,IAAI,aAAW,CACb,UAAWC,EACX,IAAK,CACH,CAACC,CAAE,EAAG,WAAWG,CAAG,GACpB,CAACF,CAAE,EAAG,cACR,CACF,CAAC,CACH,GAEe,MAAQ,CAAC,EAExB,MAAO,CACL,UAAWE,EACX,YAAa,CACX,YAAaC,EAAG,aAAe,SAC/B,YAAaA,EAAG,aAAe,UAC/B,eACE,OAAOA,EAAG,gBAAmB,SACzBA,EAAG,eACH,EACN,WAAYA,EAAG,YAAc,CAAC,cAAe,SAAS,EACtD,cAAeA,EAAG,eAAiB,SACnC,iBAAkBA,EAAG,kBAAoB,IAC3C,EACA,KAAMF,EAAM,WAAa,CAAC,CAC5B,CACF",
  "names": ["loadGoalCompass_exports", "__export", "handler", "__toCommonJS", "import_client_dynamodb", "import_lib_dynamodb", "ddb", "TABLE_NAME", "PK", "SK", "event", "sub", "gc"]
}
