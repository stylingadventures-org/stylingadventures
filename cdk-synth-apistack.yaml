Resources:
  StylingApiC401F041:
    Type: AWS::AppSync::GraphQLApi
    Properties:
      AdditionalAuthenticationProviders:
        - AuthenticationType: AWS_IAM
      AuthenticationType: AMAZON_COGNITO_USER_POOLS
      Name: stylingadventures-api
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
      UserPoolConfig:
        AwsRegion: us-east-1
        DefaultAction: ALLOW
        UserPoolId:
          Fn::ImportValue: IdentityV2Stack:ExportsOutputRefUserPool6BA7E5F296FD7236
      XrayEnabled: true
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/Resource
  StylingApiSchemaD8A6FBCC:
    Type: AWS::AppSync::GraphQLSchema
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      Definition: "# ===============================================

        # ΓÜá∩╕Å  AUTO-GENERATED FILE ΓÇö DO NOT EDIT

        #

        # Generated by: scripts/build-schema.mjs

        # Source: appsync/schema/*.graphql

        # ===============================================


        # -----------------------------------------------

        # 00_scalars.graphql

        # -----------------------------------------------


        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Scalars (AppSync + common)\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        scalar AWSDateTime\r

        scalar AWSDate\r

        scalar AWSJSON


        # -----------------------------------------------

        # 01_directives.graphql

        # -----------------------------------------------


        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # AppSync auth directives (used throughout schema)\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        directive @aws_cognito_user_pools on FIELD_DEFINITION | OBJECT\r

        directive @aws_auth(cognito_groups: [String!]) on FIELD_DEFINITION | OBJECT


        # -----------------------------------------------

        # 10_root.graphql

        # -----------------------------------------------


        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Root operation shells ONLY\r

        # (Domain modules must use: extend type Query / extend type Mutation)\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        type Query {\r

        \  _root: String\r

        }\r

        \r

        type Mutation {\r

        \  _root: String\r

        }


        # -----------------------------------------------

        # 15_core.graphql

        # -----------------------------------------------


        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Core / Auth\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        type Me {\r

        \  id: ID!\r

        \  email: String!\r

        \  role: String!\r

        \  tier: String!\r

        }\r

        \r

        type RoleResult {\r

        \  userId: ID!\r

        \  role: String!\r

        }\r

        \r

        extend type Query {\r

        \  # Simple healthcheck (used by hello.graphql in site/src/graphql)\r

        \  hello: String\r

        \r

        \  # Current user basic info\r

        \  me: Me! @aws_cognito_user_pools\r

        }\r

        \r

        extend type Mutation {\r

        \  setUserRole(userId: ID!, role: String!): RoleResult!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        }


        # -----------------------------------------------

        # 20_closet.graphql

        # -----------------------------------------------


        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Closet domain\r

        # Owns: closet enums, types, inputs, bg change request types, comments, likes\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Enums\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        enum ClosetAudience {\r

        \  PUBLIC\r

        \  BESTIES\r

        \  EXCLUSIVE\r

        }\r

        \r

        enum ClosetVisibility {\r

        \  PRIVATE\r

        \  BESTIE\r

        \  PUBLIC\r

        }\r

        \r

        # Expanded to match values used by backend/workflows and to avoid\r

        # AppSync \"Invalid input for Enum 'ClosetStatus'\" serialization errors.\r

        enum ClosetStatus {\r

        \  DRAFT\r

        \  PENDING\r

        \  PENDING_PUBLISH\r

        \  APPROVED\r

        \  PUBLISHED\r

        \  REJECTED\r

        \  ARCHIVED\r

        \  FAILED\r

        \  EXPIRED\r

        }\r

        \r

        enum ClosetFeedSort {\r

        \  NEWEST\r

        \  MOST_LOVED\r

        \  LALAS_PICK\r

        \  MY_FAVES\r

        }\r

        \r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Core types\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        type ClosetItem {\r

        \  id: ID!\r

        \  ownerId: ID\r

        \  ownerSub: ID\r

        \  title: String\r

        \  mediaKey: String\r

        \  rawMediaKey: String\r

        \  category: String\r

        \  subcategory: String\r

        \  colorTags: [String!]\r

        \  season: String\r

        \  vibes: String\r

        \  notes: String\r

        \  visibility: ClosetVisibility!\r

        \  affiliateUrl: String\r

        \  episodeIds: [ID!]\r

        \  status: ClosetStatus!\r

        \  audience: ClosetAudience\r

        \  pinned: Boolean\r

        \  favoriteCount: Int\r

        \  coinValue: Int\r

        \  backgroundStatus: String\r

        \  scheduledAt: AWSDateTime\r

        \  createdAt: AWSDateTime\r

        \  updatedAt: AWSDateTime\r

        }\r

        \r

        type ClosetConnection {\r

        \  items: [ClosetItem!]!\r

        \  nextToken: String\r

        }\r

        \r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Comments & Likes\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        type Comment {\r

        \  id: ID!\r

        \  itemId: ID!\r

        \  userId: ID!\r

        \  text: String!\r

        \  createdAt: AWSDateTime!\r

        }\r

        \r

        type CommentConnection {\r

        \  items: [Comment!]!\r

        \  nextToken: String\r

        }\r

        \r

        type Like {\r

        \  itemId: ID!\r

        \  userId: ID!\r

        \  createdAt: AWSDateTime!\r

        }\r

        \r

        type LikeConnection {\r

        \  items: [Like!]!\r

        \  nextToken: String\r

        }\r

        \r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Inputs\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        input CreateClosetItemInput {\r

        \  title: String\r

        \  mediaKey: String\r

        \  rawMediaKey: String\r

        \  category: String\r

        \  subcategory: String\r

        \  colorTags: [String!]\r

        \  season: String\r

        \  vibes: String\r

        \  notes: String\r

        \  visibility: ClosetVisibility\r

        \  affiliateUrl: String\r

        \  episodeIds: [ID!]\r

        }\r

        \r

        input UpdateClosetItemStoryInput {\r

        \  itemId: ID!\r

        \  storyId: ID\r

        \  storyPosition: Int\r

        }\r

        \r

        input CommentOnClosetItemInput {\r

        \  itemId: ID!\r

        \  text: String!\r

        }\r

        \r

        input BestieCreateClosetItemInput {\r

        \  title: String\r

        \  mediaKey: String\r

        \  rawMediaKey: String\r

        \  category: String\r

        \  subcategory: String\r

        \  colorTags: [String!]\r

        \  season: String\r

        \  vibes: String\r

        \  notes: String\r

        \  visibility: ClosetVisibility\r

        \  affiliateUrl: String\r

        \  episodeIds: [ID!]\r

        }\r

        \r

        input BestieUpdateClosetItemInput {\r

        \  title: String\r

        \  mediaKey: String\r

        \  rawMediaKey: String\r

        \  category: String\r

        \  subcategory: String\r

        \  colorTags: [String!]\r

        \  season: String\r

        \  vibes: String\r

        \  notes: String\r

        \  visibility: ClosetVisibility\r

        \  affiliateUrl: String\r

        \  episodeIds: [ID!]\r

        }\r

        \r

        input AdminCreateClosetItemInput {\r

        \  ownerId: ID\r

        \  title: String\r

        \  mediaKey: String\r

        \  rawMediaKey: String\r

        \  category: String\r

        \  subcategory: String\r

        \  colorTags: [String!]\r

        \  season: String\r

        \  vibes: String\r

        \  notes: String\r

        \  visibility: ClosetVisibility\r

        \  affiliateUrl: String\r

        \  episodeIds: [ID!]\r

        \  status: ClosetStatus\r

        \  audience: ClosetAudience\r

        \  pinned: Boolean\r

        \  coinValue: Int\r

        \  backgroundStatus: String\r

        }\r

        \r

        input AdminUpdateClosetItemInput {\r

        \  id: ID!\r

        \  ownerId: ID\r

        \  title: String\r

        \  mediaKey: String\r

        \  rawMediaKey: String\r

        \  category: String\r

        \  subcategory: String\r

        \  colorTags: [String!]\r

        \  season: String\r

        \  vibes: String\r

        \  notes: String\r

        \  visibility: ClosetVisibility\r

        \  affiliateUrl: String\r

        \  episodeIds: [ID!]\r

        \  status: ClosetStatus\r

        \  audience: ClosetAudience\r

        \  pinned: Boolean\r

        \  coinValue: Int\r

        \  backgroundStatus: String\r

        \  scheduledAt: AWSDateTime\r

        }\r

        \r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Background change request (owned here, referenced elsewhere)\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        input BgChangeRequestInput {\r

        \  itemId: ID!\r

        \  newBackgroundKey: String!\r

        \  notes: String\r

        }\r

        \r

        type BgChangeRequestResult {\r

        \  ok: Boolean!\r

        \  requestId: ID\r

        }\r

        \r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Query operations\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        extend type Query {\r

        \  myCloset(limit: Int, nextToken: String): ClosetConnection!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        \r

        \  myWishlist(limit: Int, nextToken: String): ClosetConnection!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        \r

        \  bestieClosetItems(limit: Int, nextToken: String): ClosetConnection!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        \r

        \  closetItemComments(itemId: ID!, limit: Int, nextToken: String): CommentConnection!\r

        \    @aws_cognito_user_pools\r

        \r

        \  adminClosetItemLikes(itemId: ID!, limit: Int, nextToken: String): LikeConnection!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        \r

        \  adminClosetItemComments(itemId: ID!, limit: Int, nextToken: String): CommentConnection!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        \r

        \  adminListPending(limit: Int, nextToken: String): ClosetConnection!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        \r

        \  adminListClosetItems(status: ClosetStatus, limit: Int, nextToken: String): ClosetConnection!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        \r

        \  # Γ£à Admin-only ΓÇ£Bestie libraryΓÇ¥ view (subset filter)\r

        \  adminListBestieClosetItems(status: ClosetStatus, limit: Int, nextToken: String): ClosetConnection!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        \r

        \  closetFeed(sort: ClosetFeedSort, limit: Int, nextToken: String): ClosetConnection!\r

        \    @aws_cognito_user_pools\r

        \r

        \  # Pinned items for the signed-in user\r

        \  pinnedClosetItems: [ClosetItem!]!\r

        \    @aws_cognito_user_pools\r

        }\r

        \r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Mutation operations\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        extend type Mutation {\r

        \  createClosetItem(input: CreateClosetItemInput!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        \r

        \  requestClosetApproval(itemId: ID!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        \r

        \  updateClosetMediaKey(itemId: ID!, mediaKey: String!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        \r

        \  updateClosetItemStory(input: UpdateClosetItemStoryInput!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        \r

        \  # legacy ΓÇ£likeΓÇ¥ (kept)\r

        \  likeClosetItem(itemId: ID!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \r

        \  # Γ£à explicit favorite toggle (new)\r

        \  toggleFavoriteClosetItem(id: ID!, favoriteOn: Boolean): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \r

        \  commentOnClosetItem(input: CommentOnClosetItemInput!): Comment!\r

        \    @aws_cognito_user_pools\r

        \r

        \  bestieCreateClosetItem(input: BestieCreateClosetItemInput!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        \r

        \  bestieUpdateClosetItem(id: ID!, input: BestieUpdateClosetItemInput!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        \r

        \  bestieDeleteClosetItem(id: ID!): Boolean!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        \r

        \  adminCreateClosetItem(input: AdminCreateClosetItemInput!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        \r

        \  adminApproveItem(closetItemId: ID!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        \r

        \  adminRejectItem(closetItemId: ID!, reason: String): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        \r

        \  adminPublishClosetItem(closetItemId: ID!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        \r

        \  adminSetClosetAudience(closetItemId: ID!, audience: ClosetAudience!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        \r

        \  adminUpdateClosetItem(input: AdminUpdateClosetItemInput!): ClosetItem!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"ADMIN\", \"PRIME\"])\r

        }


        # -----------------------------------------------

        # 30_bestie.graphql

        # -----------------------------------------------


        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        # Bestie workflow + membership types\r

        # ΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇΓöÇ\r

        \r

        type BestieStatus {\r

        \  userId: ID!\r

        \  isBestie: Boolean!\r

        \  tier: String\r

        \  renewsAt: AWSDateTime\r

        \  trialActive: Boolean\r

        \  trialEndsAt: AWSDateTime\r

        }\r

        \r

        type BestieCheckoutSession {\r

        \  checkoutUrl: String!\r

        }\r

        \r

        extend type Mutation {\r

        \  \"\"\"\r

        \  Bestie workflow: request a background swap for a closet item.\r

        \  \"\"\"\r

        \  requestClosetBackgroundChange(input: BgChangeRequestInput!): BgChangeRequestResult!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        }


        # -----------------------------------------------

        # 40_stories.graphql

        # -----------------------------------------------


        type BestieStory {\r

        \  id: ID!\r

        \  title: String!\r

        \  body: String\r

        \  createdAt: AWSDateTime!\r

        \  updatedAt: AWSDateTime\r

        \  status: BestieStoryStatus!\r

        \  episodeId: ID\r

        \  closetItemIds: [ID!]\r

        \  mediaKeys: [String!]\r

        }\r

        \r

        enum BestieStoryStatus {\r

        \  DRAFT\r

        \  SCHEDULED\r

        \  PUBLISHED\r

        \  ARCHIVED\r

        }\r

        \r

        type BestieStoryConnection {\r

        \  items: [BestieStory!]!\r

        \  nextToken: String\r

        }\r

        \r

        type Story {\r

        \  id: ID!\r

        \  ownerId: ID!\r

        \  title: String\r

        \  status: String\r

        \  createdAt: AWSDateTime\r

        \  publishedAt: AWSDateTime\r

        }\r

        \r

        input CreateStoryInput {\r

        \  title: String!\r

        \  closetItemIds: [ID!]\r

        }\r

        \r

        extend type Query {\r

        \  stories(limit: Int, nextToken: String): BestieStoryConnection\r

        \    @aws_cognito_user_pools\r

        \r

        \  myStories(limit: Int, nextToken: String): BestieStoryConnection\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        }\r

        \r

        extend type Mutation {\r

        \  createStory(input: CreateStoryInput!): Story!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        \r

        \  publishStory(storyId: ID!): Story!\r

        \    @aws_cognito_user_pools\r

        \    @aws_auth(cognito_groups: [\"BESTIE\", \"CREATOR\", \"COLLAB\", \"ADMIN\", \"PRIME\"])\r

        }

        \n"
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/Schema
  StylingApiHelloDsServiceRole44626254:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: appsync.amazonaws.com
        Version: "2012-10-17"
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/HelloDs/ServiceRole/Resource
  StylingApiHelloDsServiceRoleDefaultPolicy8C35E727:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: lambda:InvokeFunction
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - HelloFn7942DF23
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - HelloFn7942DF23
                        - Arn
                    - :*
        Version: "2012-10-17"
      PolicyName: StylingApiHelloDsServiceRoleDefaultPolicy8C35E727
      Roles:
        - Ref: StylingApiHelloDsServiceRole44626254
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/HelloDs/ServiceRole/DefaultPolicy/Resource
  StylingApiHelloDs58F1D645:
    Type: AWS::AppSync::DataSource
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      LambdaConfig:
        LambdaFunctionArn:
          Fn::GetAtt:
            - HelloFn7942DF23
            - Arn
      Name: HelloDs
      ServiceRoleArn:
        Fn::GetAtt:
          - StylingApiHelloDsServiceRole44626254
          - Arn
      Type: AWS_LAMBDA
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/HelloDs/Resource
  StylingApiHello5D556CAF:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: HelloDs
      FieldName: hello
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiHelloDs58F1D645
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/Hello/Resource
  StylingApiNoneDs95A6ABC6:
    Type: AWS::AppSync::DataSource
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      Name: NoneDs
      Type: NONE
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/NoneDs/Resource
  StylingApiQueryMeResolverB661C632:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: NoneDs
      FieldName: me
      Kind: UNIT
      RequestMappingTemplate: |
        
        {
          "version": "2017-02-28",
          "payload": {}
        }
      ResponseMappingTemplate: |
        
        #set($sub = "anonymous")
        #set($email = "")

        #if($ctx.identity && $ctx.identity.sub)
          #set($sub = $ctx.identity.sub)
        #end

        #if($ctx.identity && $ctx.identity.claims && $ctx.identity.claims.get("email"))
          #set($email = $ctx.identity.claims.get("email"))
        #end

        $util.toJson({
          "id": $sub,
          "email": $email,
          "role": "FAN",
          "tier": "FREE"
        })
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiNoneDs95A6ABC6
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/QueryMeResolver/Resource
  StylingApiClosetDsServiceRole61F98ADC:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: appsync.amazonaws.com
        Version: "2012-10-17"
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/ClosetDs/ServiceRole/Resource
  StylingApiClosetDsServiceRoleDefaultPolicyE595E568:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: lambda:InvokeFunction
            Effect: Allow
            Resource:
              Ref: ClosetResolverFnLive326F31AD
        Version: "2012-10-17"
      PolicyName: StylingApiClosetDsServiceRoleDefaultPolicyE595E568
      Roles:
        - Ref: StylingApiClosetDsServiceRole61F98ADC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/ClosetDs/ServiceRole/DefaultPolicy/Resource
  StylingApiClosetDs3024963C:
    Type: AWS::AppSync::DataSource
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      LambdaConfig:
        LambdaFunctionArn:
          Ref: ClosetResolverFnLive326F31AD
      Name: ClosetDs
      ServiceRoleArn:
        Fn::GetAtt:
          - StylingApiClosetDsServiceRole61F98ADC
          - Arn
      Type: AWS_LAMBDA
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/ClosetDs/Resource
  StylingApiMyClosetC8373A07:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: myCloset
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/MyCloset/Resource
  StylingApiMyWishlistResolver426A19B4:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: myWishlist
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/MyWishlistResolver/Resource
  StylingApiQueryBestieClosetItemsResolver9C2DC004:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: bestieClosetItems
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/QueryBestieClosetItemsResolver/Resource
  StylingApiClosetFeedResolverA7586067:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: closetFeed
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/ClosetFeedResolver/Resource
  StylingApiStoriesResolverEA4BABA8:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: stories
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/StoriesResolver/Resource
  StylingApiMyStoriesResolverEB0CC059:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: myStories
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/MyStoriesResolver/Resource
  StylingApiCreateClosetItemF16DABD7:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: createClosetItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/CreateClosetItem/Resource
  StylingApiRequestClosetApproval8385052A:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: requestClosetApproval
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/RequestClosetApproval/Resource
  StylingApiUpdateClosetMediaKeyD01273A7:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: updateClosetMediaKey
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/UpdateClosetMediaKey/Resource
  StylingApiUpdateClosetItemStory1E53C9EF:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: updateClosetItemStory
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/UpdateClosetItemStory/Resource
  StylingApiLikeClosetItemResolverDDD008BD:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: likeClosetItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/LikeClosetItemResolver/Resource
  StylingApiToggleFavoriteClosetItemResolverE4293E23:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: toggleFavoriteClosetItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/ToggleFavoriteClosetItemResolver/Resource
  StylingApiCommentOnClosetItemResolver7F7A6E8F:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: commentOnClosetItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/CommentOnClosetItemResolver/Resource
  StylingApiPinHighlightResolver002B0CAF:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: pinHighlight
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/PinHighlightResolver/Resource
  StylingApiToggleWishlistItemResolverDE94C35B:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: toggleWishlistItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/ToggleWishlistItemResolver/Resource
  StylingApiClosetItemCommentsResolver56F9E376:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: closetItemComments
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/ClosetItemCommentsResolver/Resource
  StylingApiAdminClosetItemLikesResolverFC561E87:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: adminClosetItemLikes
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AdminClosetItemLikesResolver/Resource
  StylingApiAdminClosetItemCommentsResolver42C32439:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: adminClosetItemComments
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AdminClosetItemCommentsResolver/Resource
  StylingApiPinnedClosetItemsResolver5F06D816:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: pinnedClosetItems
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/PinnedClosetItemsResolver/Resource
  StylingApiRequestBgChangeResolver4E1C8E8E:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: requestClosetBackgroundChange
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/RequestBgChangeResolver/Resource
  StylingApiCreateStoryResolver6AAA08F7:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: createStory
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/CreateStoryResolver/Resource
  StylingApiPublishStoryResolver54D7BE63:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: publishStory
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/PublishStoryResolver/Resource
  StylingApiAddClosetItemToFeedResolverDCFD3423:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: addClosetItemToCommunityFeed
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AddClosetItemToFeedResolver/Resource
  StylingApiRemoveClosetItemFromFeedResolver756772DF:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: removeClosetItemFromCommunityFeed
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/RemoveClosetItemFromFeedResolver/Resource
  StylingApiShareClosetItemToPinterestResolverE33FBADF:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: shareClosetItemToPinterest
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/ShareClosetItemToPinterestResolver/Resource
  StylingApiBestieCreateClosetItemResolver3803A0EE:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: bestieCreateClosetItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/BestieCreateClosetItemResolver/Resource
  StylingApiBestieUpdateClosetItemResolverEC0BE4C0:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: bestieUpdateClosetItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/BestieUpdateClosetItemResolver/Resource
  StylingApiBestieDeleteClosetItemResolverEDD9D880:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetDs
      FieldName: bestieDeleteClosetItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetDs3024963C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/BestieDeleteClosetItemResolver/Resource
  StylingApiClosetAdminSourceServiceRole9EF81003:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: appsync.amazonaws.com
        Version: "2012-10-17"
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/ClosetAdminSource/ServiceRole/Resource
  StylingApiClosetAdminSourceServiceRoleDefaultPolicyDFCEEFAE:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: lambda:InvokeFunction
            Effect: Allow
            Resource:
              Ref: ClosetAdminFnLive19204595
        Version: "2012-10-17"
      PolicyName: StylingApiClosetAdminSourceServiceRoleDefaultPolicyDFCEEFAE
      Roles:
        - Ref: StylingApiClosetAdminSourceServiceRole9EF81003
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/ClosetAdminSource/ServiceRole/DefaultPolicy/Resource
  StylingApiClosetAdminSource8E9FB41C:
    Type: AWS::AppSync::DataSource
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      LambdaConfig:
        LambdaFunctionArn:
          Ref: ClosetAdminFnLive19204595
      Name: ClosetAdminSource
      ServiceRoleArn:
        Fn::GetAtt:
          - StylingApiClosetAdminSourceServiceRole9EF81003
          - Arn
      Type: AWS_LAMBDA
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/ClosetAdminSource/Resource
  StylingApiAdminListPendingResolver16923FC0:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetAdminSource
      FieldName: adminListPending
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetAdminSource8E9FB41C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AdminListPendingResolver/Resource
  StylingApiAdminListClosetItemsResolver3D611162:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetAdminSource
      FieldName: adminListClosetItems
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetAdminSource8E9FB41C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AdminListClosetItemsResolver/Resource
  StylingApiAdminListBestieClosetItemsResolverB59AFF74:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetAdminSource
      FieldName: adminListBestieClosetItems
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Query
    DependsOn:
      - SchemaReady
      - StylingApiClosetAdminSource8E9FB41C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AdminListBestieClosetItemsResolver/Resource
  StylingApiAdminCreateClosetItemResolver9A76622F:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetAdminSource
      FieldName: adminCreateClosetItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetAdminSource8E9FB41C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AdminCreateClosetItemResolver/Resource
  StylingApiAdminApproveItem0F267B42:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetAdminSource
      FieldName: adminApproveItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetAdminSource8E9FB41C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AdminApproveItem/Resource
  StylingApiAdminRejectItemCC71EBDE:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetAdminSource
      FieldName: adminRejectItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetAdminSource8E9FB41C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AdminRejectItem/Resource
  StylingApiAdminSetClosetAudienceBD88A9DD:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetAdminSource
      FieldName: adminSetClosetAudience
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetAdminSource8E9FB41C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AdminSetClosetAudience/Resource
  StylingApiAdminUpdateClosetItemResolver5BCA141E:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetAdminSource
      FieldName: adminUpdateClosetItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetAdminSource8E9FB41C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AdminUpdateClosetItemResolver/Resource
  StylingApiAdminPublishClosetItemE70F2535:
    Type: AWS::AppSync::Resolver
    Properties:
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      DataSourceName: ClosetAdminSource
      FieldName: adminPublishClosetItem
      Kind: UNIT
      RequestMappingTemplate: '{"version": "2017-02-28", "operation": "Invoke", "payload": $util.toJson($ctx)}'
      ResponseMappingTemplate: $util.toJson($ctx.result)
      TypeName: Mutation
    DependsOn:
      - SchemaReady
      - StylingApiClosetAdminSource8E9FB41C
      - StylingApiSchemaD8A6FBCC
    Metadata:
      aws:cdk:path: ApiStack/StylingApi/AdminPublishClosetItem/Resource
  AppSyncSchemaReadyFnServiceRole62E33748:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/AppSyncSchemaReadyFn/ServiceRole/Resource
  AppSyncSchemaReadyFnServiceRoleDefaultPolicyE0925986:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - appsync:GetSchemaCreationStatus
              - appsync:GetIntrospectionSchema
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: AppSyncSchemaReadyFnServiceRoleDefaultPolicyE0925986
      Roles:
        - Ref: AppSyncSchemaReadyFnServiceRole62E33748
    Metadata:
      aws:cdk:path: ApiStack/AppSyncSchemaReadyFn/ServiceRole/DefaultPolicy/Resource
  AppSyncSchemaReadyFnD1C75E51:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-637423256673-us-east-1
        S3Key: 994710c6192f9415806215ea5f32b65cd7205ebb2da6cb06c159bc1856fcd502.zip
      Environment:
        Variables:
          APPSYNC_API_ID:
            Fn::GetAtt:
              - StylingApiC401F041
              - ApiId
          NODE_OPTIONS: --enable-source-maps
      Handler: index.handler
      MemorySize: 256
      Role:
        Fn::GetAtt:
          - AppSyncSchemaReadyFnServiceRole62E33748
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
      Timeout: 600
    DependsOn:
      - AppSyncSchemaReadyFnServiceRoleDefaultPolicyE0925986
      - AppSyncSchemaReadyFnServiceRole62E33748
    Metadata:
      aws:cdk:path: ApiStack/AppSyncSchemaReadyFn/Resource
      aws:asset:path: asset.994710c6192f9415806215ea5f32b65cd7205ebb2da6cb06c159bc1856fcd502
      aws:asset:is-bundled: true
      aws:asset:property: Code
  SchemaReadyProviderframeworkonEventServiceRole8F2E62B3:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/SchemaReadyProvider/framework-onEvent/ServiceRole/Resource
  SchemaReadyProviderframeworkonEventServiceRoleDefaultPolicyE2DDA385:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action: lambda:InvokeFunction
            Effect: Allow
            Resource:
              - Fn::GetAtt:
                  - AppSyncSchemaReadyFnD1C75E51
                  - Arn
              - Fn::Join:
                  - ""
                  - - Fn::GetAtt:
                        - AppSyncSchemaReadyFnD1C75E51
                        - Arn
                    - :*
          - Action: lambda:GetFunction
            Effect: Allow
            Resource:
              Fn::GetAtt:
                - AppSyncSchemaReadyFnD1C75E51
                - Arn
        Version: "2012-10-17"
      PolicyName: SchemaReadyProviderframeworkonEventServiceRoleDefaultPolicyE2DDA385
      Roles:
        - Ref: SchemaReadyProviderframeworkonEventServiceRole8F2E62B3
    Metadata:
      aws:cdk:path: ApiStack/SchemaReadyProvider/framework-onEvent/ServiceRole/DefaultPolicy/Resource
  SchemaReadyProviderframeworkonEvent3EBA120F:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-637423256673-us-east-1
        S3Key: bdc104ed9cab1b5b6421713c8155f0b753380595356f710400609664d3635eca.zip
      Description: AWS CDK resource provider framework - onEvent (ApiStack/SchemaReadyProvider)
      Environment:
        Variables:
          USER_ON_EVENT_FUNCTION_ARN:
            Fn::GetAtt:
              - AppSyncSchemaReadyFnD1C75E51
              - Arn
      Handler: framework.onEvent
      LoggingConfig:
        ApplicationLogLevel: FATAL
        LogFormat: JSON
      Role:
        Fn::GetAtt:
          - SchemaReadyProviderframeworkonEventServiceRole8F2E62B3
          - Arn
      Runtime: nodejs22.x
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
      Timeout: 900
    DependsOn:
      - SchemaReadyProviderframeworkonEventServiceRoleDefaultPolicyE2DDA385
      - SchemaReadyProviderframeworkonEventServiceRole8F2E62B3
    Metadata:
      aws:cdk:path: ApiStack/SchemaReadyProvider/framework-onEvent/Resource
      aws:asset:path: asset.bdc104ed9cab1b5b6421713c8155f0b753380595356f710400609664d3635eca
      aws:asset:is-bundled: false
      aws:asset:property: Code
  SchemaReady:
    Type: AWS::CloudFormation::CustomResource
    Properties:
      ServiceToken:
        Fn::GetAtt:
          - SchemaReadyProviderframeworkonEvent3EBA120F
          - Arn
      ApiId:
        Fn::GetAtt:
          - StylingApiC401F041
          - ApiId
      ExpectedField: adminPublishClosetItem
      SchemaBump: v1
    DependsOn:
      - StylingApiSchemaD8A6FBCC
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: ApiStack/SchemaReady/Default
  CreatorMediaBucket07B47A03:
    Type: AWS::S3::Bucket
    Properties:
      BucketEncryption:
        ServerSideEncryptionConfiguration:
          - ServerSideEncryptionByDefault:
              SSEAlgorithm: AES256
      CorsConfiguration:
        CorsRules:
          - AllowedHeaders:
              - "*"
            AllowedMethods:
              - PUT
              - GET
            AllowedOrigins:
              - http://localhost:5173
            ExposedHeaders:
              - ETag
            MaxAge: 3600
      PublicAccessBlockConfiguration:
        BlockPublicAcls: true
        BlockPublicPolicy: true
        IgnorePublicAcls: true
        RestrictPublicBuckets: true
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    UpdateReplacePolicy: Retain
    DeletionPolicy: Retain
    Metadata:
      aws:cdk:path: ApiStack/CreatorMediaBucket/Resource
  HelloFnServiceRoleDA97FE56:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/HelloFn/ServiceRole/Resource
  HelloFn7942DF23:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-637423256673-us-east-1
        S3Key: dba505f53767a9e6657cdeba0a1fe85822984a28978face5a785b36aa3fb4af7.zip
      Environment:
        Variables:
          NODE_OPTIONS: --enable-source-maps
      Handler: index.handler
      Role:
        Fn::GetAtt:
          - HelloFnServiceRoleDA97FE56
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    DependsOn:
      - HelloFnServiceRoleDA97FE56
    Metadata:
      aws:cdk:path: ApiStack/HelloFn/Resource
      aws:asset:path: asset.dba505f53767a9e6657cdeba0a1fe85822984a28978face5a785b36aa3fb4af7
      aws:asset:is-bundled: false
      aws:asset:property: Code
  ClosetResolverFnServiceRole21435BA2:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/ClosetResolverFn/ServiceRole/Resource
  ClosetResolverFnServiceRoleDefaultPolicy2117A20A:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - dynamodb:BatchGetItem
              - dynamodb:GetRecords
              - dynamodb:GetShardIterator
              - dynamodb:Query
              - dynamodb:GetItem
              - dynamodb:Scan
              - dynamodb:ConditionCheckItem
              - dynamodb:BatchWriteItem
              - dynamodb:PutItem
              - dynamodb:UpdateItem
              - dynamodb:DeleteItem
              - dynamodb:DescribeTable
            Effect: Allow
            Resource:
              - Fn::ImportValue: DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3
              - Fn::Join:
                  - ""
                  - - Fn::ImportValue: DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3
                    - /index/*
          - Action: states:StartExecution
            Effect: Allow
            Resource:
              Fn::ImportValue: BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513
          - Action: states:StartExecution
            Effect: Allow
            Resource:
              Fn::ImportValue: BestiesClosetStack:ExportsOutputRefBestieClosetUploadAutoPublishSMD39D3713F9680EDA
          - Action: states:StartExecution
            Effect: Allow
            Resource:
              Fn::ImportValue: BestiesClosetStack:ExportsOutputRefBackgroundChangeApprovalSMA6DF140DCA66162D
          - Action: states:StartExecution
            Effect: Allow
            Resource:
              Fn::ImportValue: BestiesStoriesStack:ExportsOutputRefStoryPublishSMAF8A41480C93DC91
          - Action: events:PutEvents
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: ClosetResolverFnServiceRoleDefaultPolicy2117A20A
      Roles:
        - Ref: ClosetResolverFnServiceRole21435BA2
    Metadata:
      aws:cdk:path: ApiStack/ClosetResolverFn/ServiceRole/DefaultPolicy/Resource
  ClosetResolverFnDB09D91C:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-637423256673-us-east-1
        S3Key: f637f88a5166c43b4ef4e7a155840a51323b0f4ae52e67828a3f8f91fa4ff79b.zip
      Environment:
        Variables:
          ADMIN_GROUP_NAME: ADMIN
          APPROVAL_SM_ARN:
            Fn::ImportValue: BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513
          BESTIE_AUTOPUBLISH_SM_ARN:
            Fn::ImportValue: BestiesClosetStack:ExportsOutputRefBestieClosetUploadAutoPublishSMD39D3713F9680EDA
          BG_CHANGE_SM_ARN:
            Fn::ImportValue: BestiesClosetStack:ExportsOutputRefBackgroundChangeApprovalSMA6DF140DCA66162D
          CREATOR_GROUP_NAME: CREATOR
          FAN_APPROVAL_SM_ARN:
            Fn::ImportValue: BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513
          NODE_OPTIONS: --enable-source-maps
          PK_NAME: pk
          PUBLIC_UPLOADS_CDN: ""
          SK_NAME: sk
          STATUS_GSI: gsi1
          STORY_PUBLISH_SM_ARN:
            Fn::ImportValue: BestiesStoriesStack:ExportsOutputRefStoryPublishSMAF8A41480C93DC91
          TABLE_NAME:
            Fn::ImportValue: DataStack:ExportsOutputRefAppTable815C50BC1988FCFB
      Handler: index.handler
      Role:
        Fn::GetAtt:
          - ClosetResolverFnServiceRole21435BA2
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    DependsOn:
      - ClosetResolverFnServiceRoleDefaultPolicy2117A20A
      - ClosetResolverFnServiceRole21435BA2
    Metadata:
      aws:cdk:path: ApiStack/ClosetResolverFn/Resource
      aws:asset:path: asset.f637f88a5166c43b4ef4e7a155840a51323b0f4ae52e67828a3f8f91fa4ff79b
      aws:asset:is-bundled: true
      aws:asset:property: Code
  ClosetResolverFnCurrentVersion71AF2A5Ed2865cecae5c37ab5ff06ab6d7239043:
    Type: AWS::Lambda::Version
    Properties:
      FunctionName:
        Ref: ClosetResolverFnDB09D91C
    Metadata:
      aws:cdk:path: ApiStack/ClosetResolverFn/CurrentVersion/Resource
      aws:cdk:do-not-refactor: true
  ClosetResolverFnLive326F31AD:
    Type: AWS::Lambda::Alias
    Properties:
      FunctionName:
        Ref: ClosetResolverFnDB09D91C
      FunctionVersion:
        Fn::GetAtt:
          - ClosetResolverFnCurrentVersion71AF2A5Ed2865cecae5c37ab5ff06ab6d7239043
          - Version
      Name: live
    UpdatePolicy:
      CodeDeployLambdaAliasUpdate:
        ApplicationName:
          Ref: ClosetResolverFnDeploymentGroupApplication6B92EE45
        DeploymentGroupName:
          Ref: ClosetResolverFnDeploymentGroupB4ABBE83
    Metadata:
      aws:cdk:path: ApiStack/ClosetResolverFnLive/Resource
  ClosetResolverFnAliasErrorsAlarmFFD2E07A:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ComparisonOperator: GreaterThanOrEqualToThreshold
      Dimensions:
        - Name: FunctionName
          Value:
            Ref: ClosetResolverFnDB09D91C
        - Name: Resource
          Value:
            Fn::Join:
              - ""
              - - Ref: ClosetResolverFnDB09D91C
                - :live
      EvaluationPeriods: 1
      MetricName: Errors
      Namespace: AWS/Lambda
      Period: 60
      Statistic: Sum
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
      Threshold: 1
    Metadata:
      aws:cdk:path: ApiStack/ClosetResolverFnAliasErrorsAlarm/Resource
  ClosetResolverFnDeploymentGroupServiceRole3D5952DE:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: codedeploy.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSCodeDeployRoleForLambdaLimited
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/ClosetResolverFnDeploymentGroup/ServiceRole/Resource
  ClosetResolverFnDeploymentGroupApplication6B92EE45:
    Type: AWS::CodeDeploy::Application
    Properties:
      ComputePlatform: Lambda
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/ClosetResolverFnDeploymentGroup/Application/Resource
  ClosetResolverFnDeploymentGroupB4ABBE83:
    Type: AWS::CodeDeploy::DeploymentGroup
    Properties:
      AlarmConfiguration:
        Alarms:
          - Name:
              Ref: ClosetResolverFnAliasErrorsAlarmFFD2E07A
        Enabled: true
      ApplicationName:
        Ref: ClosetResolverFnDeploymentGroupApplication6B92EE45
      AutoRollbackConfiguration:
        Enabled: true
        Events:
          - DEPLOYMENT_FAILURE
          - DEPLOYMENT_STOP_ON_REQUEST
          - DEPLOYMENT_STOP_ON_ALARM
      DeploymentConfigName: CodeDeployDefault.LambdaCanary10Percent5Minutes
      DeploymentStyle:
        DeploymentOption: WITH_TRAFFIC_CONTROL
        DeploymentType: BLUE_GREEN
      ServiceRoleArn:
        Fn::GetAtt:
          - ClosetResolverFnDeploymentGroupServiceRole3D5952DE
          - Arn
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/ClosetResolverFnDeploymentGroup/Resource
  ClosetAdminFnServiceRole87F02459:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/ClosetAdminFn/ServiceRole/Resource
  ClosetAdminFnServiceRoleDefaultPolicy08DF50EF:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - dynamodb:BatchGetItem
              - dynamodb:GetRecords
              - dynamodb:GetShardIterator
              - dynamodb:Query
              - dynamodb:GetItem
              - dynamodb:Scan
              - dynamodb:ConditionCheckItem
              - dynamodb:BatchWriteItem
              - dynamodb:PutItem
              - dynamodb:UpdateItem
              - dynamodb:DeleteItem
              - dynamodb:DescribeTable
            Effect: Allow
            Resource:
              - Fn::ImportValue: DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3
              - Fn::Join:
                  - ""
                  - - Fn::ImportValue: DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3
                    - /index/*
          - Action: states:StartExecution
            Effect: Allow
            Resource:
              Fn::ImportValue: BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513
          - Action:
              - dynamodb:Query
              - dynamodb:Scan
              - dynamodb:GetItem
              - dynamodb:UpdateItem
              - dynamodb:PutItem
              - dynamodb:DeleteItem
            Effect: Allow
            Resource:
              - Fn::ImportValue: DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3
              - Fn::Join:
                  - ""
                  - - Fn::ImportValue: DataStack:ExportsOutputFnGetAttAppTable815C50BCArnF3D9E3C3
                    - /index/*
          - Action:
              - states:SendTaskSuccess
              - states:SendTaskFailure
            Effect: Allow
            Resource: "*"
        Version: "2012-10-17"
      PolicyName: ClosetAdminFnServiceRoleDefaultPolicy08DF50EF
      Roles:
        - Ref: ClosetAdminFnServiceRole87F02459
    Metadata:
      aws:cdk:path: ApiStack/ClosetAdminFn/ServiceRole/DefaultPolicy/Resource
  ClosetAdminFnB4D542CC:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: cdk-hnb659fds-assets-637423256673-us-east-1
        S3Key: 4c8661a90fa63e1ceb9ed190df6417024837d3f5e72d5ee907920de30b70fcab.zip
      Environment:
        Variables:
          ADMIN_GROUP_NAME: ADMIN
          APPROVAL_SM_ARN:
            Fn::ImportValue: BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513
          FAN_APPROVAL_SM_ARN:
            Fn::ImportValue: BestiesClosetStack:ExportsOutputRefClosetUploadApprovalSM46D354C9ED6F8513
          NODE_OPTIONS: --enable-source-maps
          PK_NAME: pk
          PUBLIC_UPLOADS_CDN: ""
          SK_NAME: sk
          STATUS_GSI: gsi1
          TABLE_NAME:
            Fn::ImportValue: DataStack:ExportsOutputRefAppTable815C50BC1988FCFB
      Handler: index.handler
      MemorySize: 512
      Role:
        Fn::GetAtt:
          - ClosetAdminFnServiceRole87F02459
          - Arn
      Runtime: nodejs20.x
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
      Timeout: 10
    DependsOn:
      - ClosetAdminFnServiceRoleDefaultPolicy08DF50EF
      - ClosetAdminFnServiceRole87F02459
    Metadata:
      aws:cdk:path: ApiStack/ClosetAdminFn/Resource
      aws:asset:path: asset.4c8661a90fa63e1ceb9ed190df6417024837d3f5e72d5ee907920de30b70fcab
      aws:asset:is-bundled: true
      aws:asset:property: Code
  ClosetAdminFnCurrentVersionFAF5CD3De34e45939ddd1a8606ea184e439ea0f6:
    Type: AWS::Lambda::Version
    Properties:
      FunctionName:
        Ref: ClosetAdminFnB4D542CC
    Metadata:
      aws:cdk:path: ApiStack/ClosetAdminFn/CurrentVersion/Resource
      aws:cdk:do-not-refactor: true
  ClosetAdminFnLive19204595:
    Type: AWS::Lambda::Alias
    Properties:
      FunctionName:
        Ref: ClosetAdminFnB4D542CC
      FunctionVersion:
        Fn::GetAtt:
          - ClosetAdminFnCurrentVersionFAF5CD3De34e45939ddd1a8606ea184e439ea0f6
          - Version
      Name: live
    UpdatePolicy:
      CodeDeployLambdaAliasUpdate:
        ApplicationName:
          Ref: ClosetAdminFnDeploymentGroupApplication6B0E5F1B
        DeploymentGroupName:
          Ref: ClosetAdminFnDeploymentGroup7B95AC28
    Metadata:
      aws:cdk:path: ApiStack/ClosetAdminFnLive/Resource
  ClosetAdminFnAliasErrorsAlarm510C0B72:
    Type: AWS::CloudWatch::Alarm
    Properties:
      ComparisonOperator: GreaterThanOrEqualToThreshold
      Dimensions:
        - Name: FunctionName
          Value:
            Ref: ClosetAdminFnB4D542CC
        - Name: Resource
          Value:
            Fn::Join:
              - ""
              - - Ref: ClosetAdminFnB4D542CC
                - :live
      EvaluationPeriods: 1
      MetricName: Errors
      Namespace: AWS/Lambda
      Period: 60
      Statistic: Sum
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
      Threshold: 1
    Metadata:
      aws:cdk:path: ApiStack/ClosetAdminFnAliasErrorsAlarm/Resource
  ClosetAdminFnDeploymentGroupServiceRole7FC4FFFE:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: codedeploy.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AWSCodeDeployRoleForLambdaLimited
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/ClosetAdminFnDeploymentGroup/ServiceRole/Resource
  ClosetAdminFnDeploymentGroupApplication6B0E5F1B:
    Type: AWS::CodeDeploy::Application
    Properties:
      ComputePlatform: Lambda
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/ClosetAdminFnDeploymentGroup/Application/Resource
  ClosetAdminFnDeploymentGroup7B95AC28:
    Type: AWS::CodeDeploy::DeploymentGroup
    Properties:
      AlarmConfiguration:
        Alarms:
          - Name:
              Ref: ClosetAdminFnAliasErrorsAlarm510C0B72
        Enabled: true
      ApplicationName:
        Ref: ClosetAdminFnDeploymentGroupApplication6B0E5F1B
      AutoRollbackConfiguration:
        Enabled: true
        Events:
          - DEPLOYMENT_FAILURE
          - DEPLOYMENT_STOP_ON_REQUEST
          - DEPLOYMENT_STOP_ON_ALARM
      DeploymentConfigName: CodeDeployDefault.LambdaCanary10Percent5Minutes
      DeploymentStyle:
        DeploymentOption: WITH_TRAFFIC_CONTROL
        DeploymentType: BLUE_GREEN
      ServiceRoleArn:
        Fn::GetAtt:
          - ClosetAdminFnDeploymentGroupServiceRole7FC4FFFE
          - Arn
      Tags:
        - Key: App
          Value: stylingadventures
        - Key: Env
          Value: dev
    Metadata:
      aws:cdk:path: ApiStack/ClosetAdminFnDeploymentGroup/Resource
  CDKMetadata:
    Type: AWS::CDK::Metadata
    Properties:
      Analytics: v2:deflate64:H4sIAAAAAAAA/12RT08CMRDFP4v3MuLixeOCkQtBBOOVDG2BQv/ZaSFks9/dtLugcnq/1+nMpK8VVNUIhg94pgEXx4FWG2hWEfmR4ZnWjbhYNE5s4BM3Wo6RJEPv6WI5NNOAfv+ta6/YZGuL+5j9dyu+lwbZDM1G4CtGXLkUuMw3/rilJKdPMuTjG8+dlb93WqbQQLN0ujQXXTit+CXbjlqmy561dUIeCOZF3pLlUTnLaLRGIhkJ6iyMRtCMEz/KWJ7VYZ7W0XUaNJOtvQ25wZcMlHWytVestULKBwVaxrVL4oyR76GpNQbT1TCYlnEnpJBeuws0fTrFGWnjNLjk+8xq77XiGPtVd/aup21LlCXT8sZVxJ2yO8YTRWfWoS8SLII7KZETL5VbV/8BV35P0afYshwoHOjxVA3h6QWeHw6k1CAkG5WRsOz0B0NOyuhLAgAA
    Metadata:
      aws:cdk:path: ApiStack/CDKMetadata/Default
Outputs:
  GraphQlApiUrl:
    Value:
      Fn::GetAtt:
        - StylingApiC401F041
        - GraphQLUrl
  GraphQlApiId:
    Value:
      Fn::GetAtt:
        - StylingApiC401F041
        - ApiId
  CreatorMediaBucketName:
    Value:
      Ref: CreatorMediaBucket07B47A03
Parameters:
  BootstrapVersion:
    Type: AWS::SSM::Parameter::Value<String>
    Default: /cdk-bootstrap/hnb659fds/version
    Description: Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]

