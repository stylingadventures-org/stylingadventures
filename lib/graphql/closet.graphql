# lib/graphql/closet.graphql
scalar AWSDateTime

enum ClosetStatus {
  DRAFT
  PENDING
  APPROVED
  REJECTED
  PUBLISHED
}

enum ClosetAudience {
  PUBLIC
  BESTIE
  EXCLUSIVE
}

type ClosetItem {
  id: ID!
  userId: ID!
  ownerSub: String!
  status: ClosetStatus!
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
  mediaKey: String
  title: String
  reason: String
  audience: ClosetAudience
}

type ClosetFeedPage {
  items: [ClosetItem!]!
  nextToken: String
}

type Query {
  myCloset: [ClosetItem!]!
  adminListPending: [ClosetItem!]!
  closetFeed(limit: Int, nextToken: String): ClosetFeedPage!
}

type Mutation {
  createClosetItem(title: String, mediaKey: String): ClosetItem!
  requestClosetApproval(id: ID!): String!
  updateClosetMediaKey(id: ID!, mediaKey: String!): ClosetItem!

  adminApproveItem(id: ID!): ClosetItem!
  adminRejectItem(id: ID!, reason: String): ClosetItem!

  adminSetClosetAudience(id: ID!, audience: ClosetAudience!): ClosetItem!
}
